var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function s(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){e.appendChild(t)}function o(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode.removeChild(e)}function r(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function d(){return u(" ")}function m(){return u("")}function p(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function h(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function g(e){const t=[];for(let n=0;n<e.length;n+=1)e[n].checked&&t.push(e[n].__value);return t}function _(e,t){t=""+t,e.data!==t&&(e.data=t)}function w(e,t){(null!=t||e.value)&&(e.value=t)}function b(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}function v(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let y;function j(e){y=e}function O(e){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_mount.push(e)}const k=[],x=[],q=[],$=[],C=Promise.resolve();let z=!1;function E(e){q.push(e)}function S(){const e=new Set;do{for(;k.length;){const e=k.shift();j(e),A(e.$$)}for(;x.length;)x.pop()();for(let t=0;t<q.length;t+=1){const n=q[t];e.has(n)||(n(),e.add(n))}q.length=0}while(k.length);for(;$.length;)$.pop()();z=!1}function A(e){null!==e.fragment&&(e.update(e.dirty),l(e.before_update),e.fragment&&e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(E))}const L=new Set;const N="undefined"!=typeof window?window:global;function M(e,t){e.$$.dirty||(k.push(e),z||(z=!0,C.then(S)),e.$$.dirty=n()),e.$$.dirty[t]=!0}function T(i,a,o,c,r,f){const u=y;j(i);const d=a.props||{},m=i.$$={fragment:null,ctx:null,props:f,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:null};let p=!1;var h,g,_;m.ctx=o?o(i,d,(e,t,n=t)=>(m.ctx&&r(m.ctx[e],m.ctx[e]=n)&&(m.bound[e]&&m.bound[e](n),p&&M(i,e)),t)):d,m.update(),p=!0,l(m.before_update),m.fragment=!!c&&c(m.ctx),a.target&&(a.hydrate?m.fragment&&m.fragment.l((_=a.target,Array.from(_.childNodes))):m.fragment&&m.fragment.c(),a.intro&&((h=i.$$.fragment)&&h.i&&(L.delete(h),h.i(g))),function(e,n,i){const{fragment:a,on_mount:o,on_destroy:c,after_update:r}=e.$$;a&&a.m(n,i),E(()=>{const n=o.map(t).filter(s);c?c.push(...n):l(n),e.$$.on_mount=[]}),r.forEach(E)}(i,a.target,a.anchor),S()),j(u)}class R{$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx={})}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const F=5e3;async function P(e){let t;try{t=await e.json()}catch(t){return{ok:!1,error:"Server error encountered",status:e.status}}return t.ok=e.ok,t}async function D(e){let t;try{t=await fetch(e)}catch{return{ok:!1,error:"Kantele encountered a network error",status:!1}}return await P(t)}async function H(e,t){let n;try{n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch{return{ok:!1,error:"Kantele encountered a network error",status:!1}}return await P(n)}const{Object:U}=N;function I(e,t,n){const l=U.create(e);return l.ffilep=t[n],l}function W(e,t,n){const l=U.create(e);return l.resfile=t[n],l}function B(e,t,n){const l=U.create(e);return l.libfn=t[n],l}function Y(e,t,n){const l=U.create(e);return l.filep=t[n],l}function K(e,t,n){const l=U.create(e);return l.resfile=t[n],l}function V(e,t,n){const l=U.create(e);return l.libfn=t[n],l}function J(e,t,n){const l=U.create(e);return l.mfpkey=t[n],l}function Q(e,t,n){const l=U.create(e);return l.filep=t[n],l}function X(e,t,n){const l=U.create(e);return l.nf=t[n].nf,l.id=t[n].id,l.name=t[n].name,l}function Z(e,t,n){const l=U.create(e);return l.nf=t[n].nf,l.id=t[n].id,l.name=t[n].name,l.type=t[n].type,l}function G(e,t,n){const l=U.create(e);return l.opt=t[n],l}function ee(e,t,n){const l=U.create(e);return l.nf=t[n].nf,l.id=t[n].id,l.name=t[n].name,l.opts=t[n].opts,l}function te(e,t,n){const l=U.create(e);return l.ch=t[n].ch,l.sample=t[n].sample,l}function ne(e,t,n){const l=U.create(e);return l.isoq=t[n],l.each_value_12=t,l.isoq_index=n,l}function le(e,t,n){const l=U.create(e);return l.fn=t[n],l.each_value_15=t,l.fn_index=n,l}function se(e,t,n){const l=U.create(e);return l.sf=t[n],l}function ie(e,t,n){const l=U.create(e);return l.ds=t[n],l.each_value_14=t,l.ds_index=n,l}function ae(e,t,n){const l=U.create(e);return l.comp=t[n],l}function oe(e,t,n){const l=U.create(e);return l.wfv=t[n],l}function ce(e,t,n){const l=U.create(e);return l.wfid=t[n],l}function re(e,t,n){const l=U.create(e);return l.message=t[n],l}function fe(e,t,n){const l=U.create(e);return l.link=t[n],l}function ue(e,t,n){const l=U.create(e);return l.error=t[n],l}function de(e){let t,n=Object.entries(e.notif.errors).filter(vt).map(yt),l=[];for(let t=0;t<n.length;t+=1)l[t]=me(ue(e,n,t));return{c(){t=f("div");for(let e=0;e<l.length;e+=1)l[e].c();h(t,"class","notification is-danger is-light")},m(e,n){o(e,t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null)},p(e,s){if(e.Object||e.notif){let i;for(n=Object.entries(s.notif.errors).filter(vt).map(yt),i=0;i<n.length;i+=1){const a=ue(s,n,i);l[i]?l[i].p(e,a):(l[i]=me(a),l[i].c(),l[i].m(t,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){e&&c(t),r(l,e)}}}function me(e){let t,n,l=e.error+"";return{c(){t=f("div"),n=u(l)},m(e,l){o(e,t,l),a(t,n)},p(e,t){(e.Object||e.notif)&&l!==(l=t.error+"")&&_(n,l)},d(e){e&&c(t)}}}function pe(e){let t,n=Object.entries(e.notif.links).filter(jt).map(Ot),l=[];for(let t=0;t<n.length;t+=1)l[t]=he(fe(e,n,t));return{c(){t=f("div");for(let e=0;e<l.length;e+=1)l[e].c();h(t,"class","notification is-danger is-light errormsg svelte-5nys59")},m(e,n){o(e,t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null)},p(e,s){if(e.Object||e.notif){let i;for(n=Object.entries(s.notif.links).filter(jt).map(Ot),i=0;i<n.length;i+=1){const a=fe(s,n,i);l[i]?l[i].p(e,a):(l[i]=he(a),l[i].c(),l[i].m(t,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){e&&c(t),r(l,e)}}}function he(e){let t,n,l,s,i;return{c(){t=f("div"),n=u("Click here: "),l=f("a"),s=u("here"),h(l,"target","_blank"),h(l,"href",i=e.link)},m(e,i){o(e,t,i),a(t,n),a(t,l),a(l,s)},p(e,t){(e.Object||e.notif)&&i!==(i=t.link)&&h(l,"href",i)},d(e){e&&c(t)}}}function ge(e){let t,n=Object.entries(e.notif.messages).filter(kt).map(xt),l=[];for(let t=0;t<n.length;t+=1)l[t]=_e(re(e,n,t));return{c(){t=f("div");for(let e=0;e<l.length;e+=1)l[e].c();h(t,"class","notification is-success is-light errormsg svelte-5nys59")},m(e,n){o(e,t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null)},p(e,s){if(e.Object||e.notif){let i;for(n=Object.entries(s.notif.messages).filter(kt).map(xt),i=0;i<n.length;i+=1){const a=re(s,n,i);l[i]?l[i].p(e,a):(l[i]=_e(a),l[i].c(),l[i].m(t,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){e&&c(t),r(l,e)}}}function _e(e){let t,n,l=e.message+"";return{c(){t=f("div"),n=u(l)},m(e,l){o(e,t,l),a(t,n)},p(e,t){(e.Object||e.notif)&&l!==(l=t.message+"")&&_(n,l)},d(e){e&&c(t)}}}function we(e){let t,n,l,s,i=e.allwfs[e.wfid].name+"";return{c(){t=f("option"),n=u(i),l=d(),t.__value=s=e.wfid,t.value=t.__value},m(e,s){o(e,t,s),a(t,n),a(t,l)},p(e,l){(e.allwfs||e.wforder)&&i!==(i=l.allwfs[l.wfid].name+"")&&_(n,i),e.wforder&&s!==(s=l.wfid)&&(t.__value=s),t.value=t.__value},d(e){e&&c(t)}}}function be(e){let t,n=e.allwfs[e.config.wfid].versions,l=[];for(let t=0;t<n.length;t+=1)l[t]=ye(oe(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=m()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);o(e,t,n)},p(e,s){if(e.allwfs||e.config){let i;for(n=s.allwfs[s.config.wfid].versions,i=0;i<n.length;i+=1){const a=oe(s,n,i);l[i]?l[i].p(e,a):(l[i]=ye(a),l[i].c(),l[i].m(t.parentNode,t))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){r(l,e),e&&c(t)}}}function ve(e){let t;return{c(){(t=f("span")).textContent="LATEST:"},m(e,n){o(e,t,n)},d(e){e&&c(t)}}}function ye(e){let t,n,l,s,i,r,m,p=e.wfv.date+"",h=e.wfv.name+"",g=e.wfv.latest&&ve();return{c(){t=f("option"),g&&g.c(),n=d(),l=u(p),s=u(" -- "),i=u(h),r=d(),t.__value=m=e.wfv,t.value=t.__value},m(e,c){o(e,t,c),g&&g.m(t,null),a(t,n),a(t,l),a(t,s),a(t,i),a(t,r)},p(e,s){s.wfv.latest?g||((g=ve()).c(),g.m(t,n)):g&&(g.d(1),g=null),(e.allwfs||e.config)&&p!==(p=s.wfv.date+"")&&_(l,p),(e.allwfs||e.config)&&h!==(h=s.wfv.name+"")&&_(i,h),(e.allwfs||e.config)&&m!==(m=s.wfv)&&(t.__value=m),t.value=t.__value},d(e){e&&c(t),g&&g.d()}}}function je(e){let t,n,l,s,i,g,b,v,y,j,O,k,x,q,$,C,z,E,S,A,L,N=e.allwfs[e.config.wfid].wftype+"",M=e.config.analysisname+"",T="isobaric_quant"in e.wf.components&&Object.keys(e.config.isoquants).length,R="mzmldef"in e.wf.components&&Oe(e),F=Object.values(e.dsets),P=[];for(let t=0;t<F.length;t+=1)P[t]=Re(ie(e,F,t));let D=T&&Fe(e),H=e.wf.multicheck.length+e.wf.numparams.length+e.wf.flags.length&&Ye(e),U=e.wf.multifileparams.length+e.wf.fileparams.length&&Xe(e),I=e.wf.fixedfileparams.length&&rt(e);function W(e,t){return!t.runButtonActive||existing_analysis&&!existing_analysis.editable?t.postingAnalysis?dt:ut:mt}let B=W(0,e),Y=B(e);return{c(){t=f("div"),n=f("input"),l=d(),s=f("div"),i=u("Full name will be "),g=f("code"),b=u(N),v=u("_"),y=u(M),j=u("\n    This will be the folder name for the output and prefixed to the output filenames"),O=d(),R&&R.c(),k=d(),(x=f("div")).textContent="Datasets",q=d();for(let e=0;e<P.length;e+=1)P[e].c();$=d(),D&&D.c(),C=d(),H&&H.c(),z=d(),U&&U.c(),E=d(),I&&I.c(),S=d(),Y.c(),A=m(),h(n,"type","text"),h(n,"class","input"),h(n,"placeholder","Please enter analysis name"),h(t,"class","field"),h(x,"class","title is-5"),L=p(n,"input",e.input_input_handler)},m(c,r){o(c,t,r),a(t,n),w(n,e.config.analysisname),a(t,l),a(t,s),a(s,i),a(s,g),a(g,b),a(g,v),a(g,y),a(s,j),o(c,O,r),R&&R.m(c,r),o(c,k,r),o(c,x,r),o(c,q,r);for(let e=0;e<P.length;e+=1)P[e].m(c,r);o(c,$,r),D&&D.m(c,r),o(c,C,r),H&&H.m(c,r),o(c,z,r),U&&U.m(c,r),o(c,E,r),I&&I.m(c,r),o(c,S,r),Y.m(c,r),o(c,A,r)},p(e,t){if(e.config&&n.value!==t.config.analysisname&&w(n,t.config.analysisname),(e.allwfs||e.config)&&N!==(N=t.allwfs[t.config.wfid].wftype+"")&&_(b,N),e.config&&M!==(M=t.config.analysisname+"")&&_(y,M),"mzmldef"in t.wf.components?R?R.p(e,t):((R=Oe(t)).c(),R.m(k.parentNode,k)):R&&(R.d(1),R=null),e.Object||e.dsets||e.wf||e.config||e.matchedFr||e.matchFractions||e.updateIsoquant){let n;for(F=Object.values(t.dsets),n=0;n<F.length;n+=1){const l=ie(t,F,n);P[n]?P[n].p(e,l):(P[n]=Re(l),P[n].c(),P[n].m($.parentNode,$))}for(;n<P.length;n+=1)P[n].d(1);P.length=F.length}(e.wf||e.Object||e.config)&&(T="isobaric_quant"in t.wf.components&&Object.keys(t.config.isoquants).length),T?D?D.p(e,t):((D=Fe(t)).c(),D.m(C.parentNode,C)):D&&(D.d(1),D=null),t.wf.multicheck.length+t.wf.numparams.length+t.wf.flags.length?H?H.p(e,t):((H=Ye(t)).c(),H.m(z.parentNode,z)):H&&(H.d(1),H=null),t.wf.multifileparams.length+t.wf.fileparams.length?U?U.p(e,t):((U=Xe(t)).c(),U.m(E.parentNode,E)):U&&(U.d(1),U=null),t.wf.fixedfileparams.length?I?I.p(e,t):((I=rt(t)).c(),I.m(S.parentNode,S)):I&&(I.d(1),I=null),B===(B=W(0,t))&&Y?Y.p(e,t):(Y.d(1),(Y=B(t))&&(Y.c(),Y.m(A.parentNode,A)))},d(e){e&&c(t),e&&c(O),R&&R.d(e),e&&c(k),e&&c(x),e&&c(q),r(P,e),e&&c($),D&&D.d(e),e&&c(C),H&&H.d(e),e&&c(z),U&&U.d(e),e&&c(E),I&&I.d(e),e&&c(S),Y.d(e),e&&c(A),L()}}}function Oe(e){let t,n,l,s,i,u,m,g=Object.keys(e.wf.components.mzmldef),_=[];for(let t=0;t<g.length;t+=1)_[t]=ke(ae(e,g,t));return{c(){(t=f("div")).textContent="Mzml input type",n=d(),l=f("div"),s=f("div"),i=f("select"),(u=f("option")).textContent="Please select one";for(let e=0;e<_.length;e+=1)_[e].c();h(t,"class","title is-5"),u.__value="Please select one",u.value=u.__value,void 0===e.config.mzmldef&&E(()=>e.select_change_handler.call(i)),h(s,"class","select"),h(l,"class","field"),m=p(i,"change",e.select_change_handler)},m(c,r){o(c,t,r),o(c,n,r),o(c,l,r),a(l,s),a(s,i),a(i,u);for(let e=0;e<_.length;e+=1)_[e].m(i,null);b(i,e.config.mzmldef)},p(e,t){if(e.Object||e.wf){let n;for(g=Object.keys(t.wf.components.mzmldef),n=0;n<g.length;n+=1){const l=ae(t,g,n);_[n]?_[n].p(e,l):(_[n]=ke(l),_[n].c(),_[n].m(i,null))}for(;n<_.length;n+=1)_[n].d(1);_.length=g.length}e.config&&b(i,t.config.mzmldef)},d(e){e&&c(t),e&&c(n),e&&c(l),r(_,e),m()}}}function ke(e){let t,n,l,s,i,r,d=e.comp.split(" ").map(qt).join(" ")+"",m=e.wf.components.mzmldef[e.comp].join(", ")+"";return{c(){t=f("option"),n=u(d),l=u(" ("),s=u(m),i=u(")"),t.__value=r=e.comp,t.value=t.__value},m(e,c){o(e,t,c),a(t,n),a(t,l),a(t,s),a(t,i)},p(e,l){(e.Object||e.wf)&&d!==(d=l.comp.split(" ").map(qt).join(" ")+"")&&_(n,d),(e.wf||e.Object)&&m!==(m=l.wf.components.mzmldef[l.comp].join(", ")+"")&&_(s,m),(e.Object||e.wf)&&r!==(r=l.comp)&&(t.__value=r),t.value=t.__value},d(e){e&&c(t)}}}function xe(e){let t,n,l,s,i,p,g,w,b,v,y,j,O,k,x,q,$,C,z,E,S,A,L,N,M,T,R,F=e.ds.proj+"",P=e.ds.exp+"",D=e.ds.run+"",H=e.ds.details.qtype+"",U=e.ds.details.instruments.join(", ")+"",I=e.ds.prefrac&&"mzmldef"in e.wf.components&&e.config.mzmldef in e.wf.components.mzmldef&&e.wf.components.mzmldef[e.config.mzmldef].indexOf("plate")>-1,W=!e.ds.prefrac&&$e(e),B=!e.ds.filesaresets&&Ce(e);function Y(e,t){return t.ds.prefrac?t.ds.hr?Ee:ze:Se}let K=Y(0,e),V=K(e),J=Object.entries(e.ds.details.nrstoredfiles),Q=[];for(let t=0;t<J.length;t+=1)Q[t]=Ae(se(e,J,t));let X=e.ds.details.nrstoredfiles.refined_mzML&&Le(),Z=I&&Ne(e),G=e.ds.filesaresets&&Me(e);return{c(){t=f("div"),n=f("div"),W&&W.c(),l=d(),B&&B.c(),s=d(),i=f("div"),p=f("span"),g=u(F),w=u(" // "),b=u(P),v=u(" // "),y=u(D),j=u(" //"),O=d(),V.c(),k=d(),x=f("div"),q=f("span"),$=u(H),C=d();for(let e=0;e<Q.length;e+=1)Q[e].c();z=d(),E=f("span"),S=u("// "),A=u(U),L=d(),X&&X.c(),N=d(),M=f("div"),Z&&Z.c(),T=d(),G&&G.c(),R=m(),h(i,"class","subtitle is-6 has-text-primary"),h(x,"class","subtitle is-6"),h(n,"class","column"),h(M,"class","column"),h(t,"class","columns")},m(e,c){o(e,t,c),a(t,n),W&&W.m(n,null),a(n,l),B&&B.m(n,null),a(n,s),a(n,i),a(i,p),a(p,g),a(p,w),a(p,b),a(p,v),a(p,y),a(p,j),a(i,O),V.m(i,null),a(n,k),a(n,x),a(x,q),a(q,$),a(x,C);for(let e=0;e<Q.length;e+=1)Q[e].m(x,null);a(x,z),a(x,E),a(E,S),a(E,A),a(n,L),X&&X.m(n,null),a(t,N),a(t,M),Z&&Z.m(M,null),o(e,T,c),G&&G.m(e,c),o(e,R,c)},p(e,t){if(t.ds.prefrac?W&&(W.d(1),W=null):W?W.p(e,t):((W=$e(t)).c(),W.m(n,l)),t.ds.filesaresets?B&&(B.d(1),B=null):B?B.p(e,t):((B=Ce(t)).c(),B.m(n,s)),(e.Object||e.dsets)&&F!==(F=t.ds.proj+"")&&_(g,F),(e.Object||e.dsets)&&P!==(P=t.ds.exp+"")&&_(b,P),(e.Object||e.dsets)&&D!==(D=t.ds.run+"")&&_(y,D),K===(K=Y(0,t))&&V?V.p(e,t):(V.d(1),(V=K(t))&&(V.c(),V.m(i,null))),(e.Object||e.dsets)&&H!==(H=t.ds.details.qtype+"")&&_($,H),e.Object||e.dsets){let n;for(J=Object.entries(t.ds.details.nrstoredfiles),n=0;n<J.length;n+=1){const l=se(t,J,n);Q[n]?Q[n].p(e,l):(Q[n]=Ae(l),Q[n].c(),Q[n].m(x,z))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=J.length}(e.Object||e.dsets)&&U!==(U=t.ds.details.instruments.join(", ")+"")&&_(A,U),t.ds.details.nrstoredfiles.refined_mzML?X||((X=Le()).c(),X.m(n,null)):X&&(X.d(1),X=null),(e.Object||e.dsets||e.wf||e.config)&&(I=t.ds.prefrac&&"mzmldef"in t.wf.components&&t.config.mzmldef in t.wf.components.mzmldef&&t.wf.components.mzmldef[t.config.mzmldef].indexOf("plate")>-1),I?Z?Z.p(e,t):((Z=Ne(t)).c(),Z.m(M,null)):Z&&(Z.d(1),Z=null),t.ds.filesaresets?G?G.p(e,t):((G=Me(t)).c(),G.m(R.parentNode,R)):G&&(G.d(1),G=null)},d(e){e&&c(t),W&&W.d(),B&&B.d(),V.d(),r(Q,e),X&&X.d(),Z&&Z.d(),e&&c(T),G&&G.d(e),e&&c(R)}}}function qe(e){let t,n,l,s,i,r,d,m,p=e.ds.proj+"",g=e.ds.run+"",w=e.ds.details.qtype+"",b=e.ds.details.instruments.join(",")+"";return{c(){t=f("span"),n=u(p),l=u(" // Labelcheck // "),s=u(g),i=u(" // "),r=u(w),d=u(" // "),m=u(b),h(t,"class","has-text-primary")},m(e,c){o(e,t,c),a(t,n),a(t,l),a(t,s),a(t,i),a(t,r),a(t,d),a(t,m)},p(e,t){(e.Object||e.dsets)&&p!==(p=t.ds.proj+"")&&_(n,p),(e.Object||e.dsets)&&g!==(g=t.ds.run+"")&&_(s,g),(e.Object||e.dsets)&&w!==(w=t.ds.details.qtype+"")&&_(r,w),(e.Object||e.dsets)&&b!==(b=t.ds.details.instruments.join(",")+"")&&_(m,b)},d(e){e&&c(t)}}}function $e(e){let t,n,l,s;function i(){e.input_change_handler.call(t,e)}return{c(){t=f("input"),n=d(),(l=f("label")).textContent="Each file is a different sample",h(t,"type","checkbox"),h(l,"class","checkbox"),s=p(t,"change",i)},m(s,i){o(s,t,i),t.checked=e.ds.filesaresets,o(s,n,i),o(s,l,i)},p(n,l){e=l,(n.Object||n.dsets)&&(t.checked=e.ds.filesaresets)},d(e){e&&c(t),e&&c(n),e&&c(l),s()}}}function Ce(e){let t,n,s;function i(){e.input_input_handler_1.call(n,e)}return{c(){t=f("div"),h(n=f("input"),"type","text"),h(n,"class","input"),h(n,"placeholder","Name of set"),h(t,"class","field"),s=[p(n,"input",i),p(n,"change",e.updateIsoquant)]},m(l,s){o(l,t,s),a(t,n),w(n,e.ds.setname)},p(t,l){e=l,(t.Object||t.dsets)&&n.value!==e.ds.setname&&w(n,e.ds.setname)},d(e){e&&c(t),l(s)}}}function ze(e){let t,n,l=e.ds.prefrac+"";return{c(){t=f("span"),n=u(l)},m(e,l){o(e,t,l),a(t,n)},p(e,t){(e.Object||e.dsets)&&l!==(l=t.ds.prefrac+"")&&_(n,l)},d(e){e&&c(t)}}}function Ee(e){let t,n,l=e.ds.hr+"";return{c(){t=f("span"),n=u(l)},m(e,l){o(e,t,l),a(t,n)},p(e,t){(e.Object||e.dsets)&&l!==(l=t.ds.hr+"")&&_(n,l)},d(e){e&&c(t)}}}function Se(e){let t,n,l=e.ds.dtype+"";return{c(){t=f("span"),n=u(l)},m(e,l){o(e,t,l),a(t,n)},p(e,t){(e.Object||e.dsets)&&l!==(l=t.ds.dtype+"")&&_(n,l)},d(e){e&&c(t)}}}function Ae(e){let t,n,l,s,i,r,m=e.sf[1]+"",p=e.sf[0]+"";return{c(){t=f("span"),n=u("// "),l=u(m),s=d(),i=u(p),r=u(" files")},m(e,c){o(e,t,c),a(t,n),a(t,l),a(t,s),a(t,i),a(t,r)},p(e,t){(e.Object||e.dsets)&&m!==(m=t.sf[1]+"")&&_(l,m),(e.Object||e.dsets)&&p!==(p=t.sf[0]+"")&&_(i,p)},d(e){e&&c(t)}}}function Le(e){let t;return{c(){(t=f("div")).innerHTML="<strong>Enforcing use of refined mzML(s)</strong>",h(t,"class","subtitle is-6")},m(e,n){o(e,t,n)},d(e){e&&c(t)}}}function Ne(e){let t,n,s,i,r,m,g,b,v,y=e.matchedFr[e.ds.id]+"";function j(){e.input_input_handler_2.call(i,e)}function O(...t){return e.change_handler_1(e,...t)}return{c(){t=f("div"),(n=f("label")).textContent="Regex for fraction detection",s=d(),i=f("input"),r=d(),m=f("span"),g=u(y),b=u(" fractions matched"),h(n,"class","label"),h(i,"type","text"),h(i,"class","input"),h(t,"class","field"),v=[p(i,"input",j),p(i,"change",O)]},m(l,c){o(l,t,c),a(t,n),a(t,s),a(t,i),w(i,e.ds.frregex),o(l,r,c),o(l,m,c),a(m,g),a(m,b)},p(t,n){e=n,(t.Object||t.dsets)&&i.value!==e.ds.frregex&&w(i,e.ds.frregex),(t.matchedFr||t.Object||t.dsets)&&y!==(y=e.matchedFr[e.ds.id]+"")&&_(g,y)},d(e){e&&c(t),e&&c(r),e&&c(m),l(v)}}}function Me(e){let t,n=e.ds.files,l=[];for(let t=0;t<n.length;t+=1)l[t]=Te(le(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=m()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);o(e,t,n)},p(e,s){if(e.Object||e.dsets){let i;for(n=s.ds.files,i=0;i<n.length;i+=1){const a=le(s,n,i);l[i]?l[i].p(e,a):(l[i]=Te(a),l[i].c(),l[i].m(t.parentNode,t))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){r(l,e),e&&c(t)}}}function Te(e){let t,n,l,s,i,r,m,g,b=e.fn.name+"";function v(){e.input_input_handler_3.call(r,e)}return{c(){t=f("div"),n=f("div"),l=u(b),s=d(),i=f("div"),r=f("input"),h(n,"class","column"),h(r,"type","text"),h(r,"class","input"),h(r,"placeholder",m=e.fn.sample),h(i,"class","column"),h(t,"class","columns"),g=p(r,"input",v)},m(c,f){o(c,t,f),a(t,n),a(n,l),a(t,s),a(t,i),a(i,r),w(r,e.fn.setname)},p(t,n){e=n,(t.Object||t.dsets)&&b!==(b=e.fn.name+"")&&_(l,b),(t.Object||t.dsets)&&r.value!==e.fn.setname&&w(r,e.fn.setname),(t.Object||t.dsets)&&m!==(m=e.fn.sample)&&h(r,"placeholder",m)},d(e){e&&c(t),g()}}}function Re(e){let t,n;function l(e,t){return(null==n||e.Object||e.dsets)&&(n=!("labelcheck"!==t.ds.dtype.toLowerCase())),n?qe:xe}let s=l(null,e),i=s(e);return{c(){t=f("div"),i.c(),h(t,"class","box")},m(e,n){o(e,t,n),i.m(t,null)},p(e,n){s===(s=l(e,n))&&i?i.p(e,n):(i.d(1),(i=s(n))&&(i.c(),i.m(t,null)))},d(e){e&&c(t),i.d()}}}function Fe(e){let t,n,l,s=Object.entries(e.config.isoquants),i=[];for(let t=0;t<s.length;t+=1)i[t]=Be(ne(e,s,t));return{c(){t=f("div"),(n=f("div")).textContent="Isobaric quantification",l=d();for(let e=0;e<i.length;e+=1)i[e].c();h(n,"class","title is-5"),h(t,"class","box")},m(e,s){o(e,t,s),a(t,n),a(t,l);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,n){if(e.sortChannels||e.Object||e.config){let l;for(s=Object.entries(n.config.isoquants),l=0;l<s.length;l+=1){const a=ne(n,s,l);i[l]?i[l].p(e,a):(i[l]=Be(a),i[l].c(),i[l].m(t,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=s.length}},d(e){e&&c(t),r(i,e)}}}function Pe(e){let t,n,l,s,i;function r(){e.input_change_handler_1.call(n,e)}return{c(){t=f("div"),n=f("input"),l=d(),(s=f("label")).innerHTML='Use median sweeping (no predefined denominators)\n        <span class="icon is-small"><a title="Pick median denominator per PSM, only for single-set analyses"><i class="fa fa-question-circle"></i></a></span>',h(n,"type","checkbox"),h(s,"class","checkbox"),h(t,"class","field"),i=p(n,"change",r)},m(i,c){o(i,t,c),a(t,n),n.checked=e.isoq[1].sweep,a(t,l),a(t,s)},p(t,l){e=l,(t.Object||t.config)&&(n.checked=e.isoq[1].sweep)},d(e){e&&c(t),i()}}}function De(e){let t,n,l,s,i;function r(){e.input_change_handler_2.call(n,e)}return{c(){t=f("div"),n=f("input"),l=d(),(s=f("label")).innerHTML='Report median isobaric intensities\n        <span class="icon is-small"><a title="Reports median intensity rather than fold changes, not for use with DEqMS"><i class="fa fa-question-circle"></i></a></span>',h(n,"type","checkbox"),h(s,"class","checkbox"),h(t,"class","field"),i=p(n,"change",r)},m(i,c){o(i,t,c),a(t,n),n.checked=e.isoq[1].report_intensity,a(t,l),a(t,s)},p(t,l){e=l,(t.Object||t.config)&&(n.checked=e.isoq[1].report_intensity)},d(e){e&&c(t),i()}}}function He(e){let t;return{c(){(t=f("th")).innerHTML="<del>Denominator</del>"},m(e,n){o(e,t,n)},d(e){e&&c(t)}}}function Ue(e){let t;return{c(){(t=f("th")).textContent="Denominator"},m(e,n){o(e,t,n)},d(e){e&&c(t)}}}function Ie(e){let t,n;function l(){e.input_change_handler_3.call(t,e)}return{c(){h(t=f("input"),"type","checkbox"),n=p(t,"change",l)},m(n,l){o(n,t,l),t.checked=e.isoq[1].denoms[e.ch]},p(n,l){e=l,(n.Object||n.config||n.sortChannels)&&(t.checked=e.isoq[1].denoms[e.ch])},d(e){e&&c(t),n()}}}function We(e){let t,n,l,s,i,r,m,g,b,v,y,j,O,k=e.ch+"",x=e.sample+"",q=!e.isoq[1].sweep&&!e.isoq[1].report_intensity&&Ie(e);function $(){e.input_input_handler_4.call(y,e)}return{c(){t=f("tr"),n=f("td"),q&&q.c(),l=d(),s=f("td"),i=u(k),r=d(),m=f("td"),g=u(x),b=d(),v=f("td"),y=f("input"),j=d(),h(y,"type","text"),h(y,"class","input"),h(y,"placeholder","Sample group or empty (e.g. CTRL, TREAT)"),O=p(y,"input",$)},m(c,f){o(c,t,f),a(t,n),q&&q.m(n,null),a(t,l),a(t,s),a(s,i),a(t,r),a(t,m),a(m,g),a(t,b),a(t,v),a(v,y),w(y,e.isoq[1].samplegroups[e.ch]),a(t,j)},p(t,l){(e=l).isoq[1].sweep||e.isoq[1].report_intensity?q&&(q.d(1),q=null):q?q.p(t,e):((q=Ie(e)).c(),q.m(n,null)),(t.Object||t.config)&&k!==(k=e.ch+"")&&_(i,k),(t.Object||t.config)&&x!==(x=e.sample+"")&&_(g,x),(t.Object||t.config||t.sortChannels)&&y.value!==e.isoq[1].samplegroups[e.ch]&&w(y,e.isoq[1].samplegroups[e.ch])},d(e){e&&c(t),q&&q.d(),O()}}}function Be(e){let t,n,l,s,i,m,p,g,w,b,v,y,j,O,k,x,q,$,C,z,E=e.isoq[0]+"",S=1===Object.keys(e.config.isoquants).length&&!Object.values(e.isoq[1].denoms).length,A=!e.isoq[1].sweep&&!Object.values(e.isoq[1].denoms).filter(gt).length,L=S&&Pe(e),N=A&&De(e);function M(e,t){return t.isoq[1].sweep||t.isoq[1].report_intensity?He:Ue}let T=M(0,e),R=T(e),F=ht(e.isoq[1].channels),P=[];for(let t=0;t<F.length;t+=1)P[t]=We(te(e,F,t));return{c(){t=f("div"),n=u("Set: "),l=u(E),s=d(),L&&L.c(),i=d(),N&&N.c(),m=d(),p=f("div"),g=f("div"),w=f("table"),b=f("thead"),v=f("tr"),R.c(),y=d(),(j=f("th")).textContent="Channel",O=d(),(k=f("th")).textContent="Sample name",x=d(),(q=f("th")).innerHTML='Sample group \n                <span class="icon is-small"><a title="For DEqMS and PCA plots"><i class="fa fa-question-circle"></i></a></span>\n                LEAVE EMPTY FOR INTERNAL STANDARDS!',$=d(),C=f("tbody");for(let e=0;e<P.length;e+=1)P[e].c();z=d(),h(t,"class","has-text-primary title is-6"),h(w,"class","table is-striped is-narrow"),h(g,"class","column is-three-quarters"),h(p,"class","columns")},m(e,c){o(e,t,c),a(t,n),a(t,l),o(e,s,c),L&&L.m(e,c),o(e,i,c),N&&N.m(e,c),o(e,m,c),o(e,p,c),a(p,g),a(g,w),a(w,b),a(b,v),R.m(v,null),a(v,y),a(v,j),a(v,O),a(v,k),a(v,x),a(v,q),a(w,$),a(w,C);for(let e=0;e<P.length;e+=1)P[e].m(C,null);a(p,z)},p(e,t){if((e.Object||e.config)&&E!==(E=t.isoq[0]+"")&&_(l,E),(e.Object||e.config)&&(S=1===Object.keys(t.config.isoquants).length&&!Object.values(t.isoq[1].denoms).length),S?L?L.p(e,t):((L=Pe(t)).c(),L.m(i.parentNode,i)):L&&(L.d(1),L=null),(e.Object||e.config)&&(A=!t.isoq[1].sweep&&!Object.values(t.isoq[1].denoms).filter(gt).length),A?N?N.p(e,t):((N=De(t)).c(),N.m(m.parentNode,m)):N&&(N.d(1),N=null),T!==(T=M(0,t))&&(R.d(1),(R=T(t))&&(R.c(),R.m(v,y))),e.Object||e.config||e.sortChannels){let n;for(F=ht(t.isoq[1].channels),n=0;n<F.length;n+=1){const l=te(t,F,n);P[n]?P[n].p(e,l):(P[n]=We(l),P[n].c(),P[n].m(C,null))}for(;n<P.length;n+=1)P[n].d(1);P.length=F.length}},d(e){e&&c(t),e&&c(s),L&&L.d(e),e&&c(i),N&&N.d(e),e&&c(m),e&&c(p),R.d(),r(P,e)}}}function Ye(e){let t,n,l,s,i,u,m,p=e.wf.multicheck,g=[];for(let t=0;t<p.length;t+=1)g[t]=Ve(ee(e,p,t));let _=e.wf.numparams,w=[];for(let t=0;t<_.length;t+=1)w[t]=Je(Z(e,_,t));let b=e.wf.flags,v=[];for(let t=0;t<b.length;t+=1)v[t]=Qe(X(e,b,t));return{c(){t=f("div"),(n=f("div")).textContent="Workflow parameters",l=d();for(let e=0;e<g.length;e+=1)g[e].c();s=d();for(let e=0;e<w.length;e+=1)w[e].c();i=d(),(u=f("label")).textContent="Config flags",m=d();for(let e=0;e<v.length;e+=1)v[e].c();h(n,"class","title is-5"),h(u,"class","label"),h(t,"class","box")},m(e,c){o(e,t,c),a(t,n),a(t,l);for(let e=0;e<g.length;e+=1)g[e].m(t,null);a(t,s);for(let e=0;e<w.length;e+=1)w[e].m(t,null);a(t,i),a(t,u),a(t,m);for(let e=0;e<v.length;e+=1)v[e].m(t,null)},p(e,n){if(e.Object||e.wf||e.config){let l;for(p=n.wf.multicheck,l=0;l<p.length;l+=1){const i=ee(n,p,l);g[l]?g[l].p(e,i):(g[l]=Ve(i),g[l].c(),g[l].m(t,s))}for(;l<g.length;l+=1)g[l].d(1);g.length=p.length}if(e.config||e.wf){let l;for(_=n.wf.numparams,l=0;l<_.length;l+=1){const s=Z(n,_,l);w[l]?w[l].p(e,s):(w[l]=Je(s),w[l].c(),w[l].m(t,i))}for(;l<w.length;l+=1)w[l].d(1);w.length=_.length}if(e.wf||e.config){let l;for(b=n.wf.flags,l=0;l<b.length;l+=1){const s=X(n,b,l);v[l]?v[l].p(e,s):(v[l]=Qe(s),v[l].c(),v[l].m(t,null))}for(;l<v.length;l+=1)v[l].d(1);v.length=b.length}},d(e){e&&c(t),r(g,e),r(w,e),r(v,e)}}}function Ke(e){let t,n,l,s,i,r,m,g=e.opt[1]+"";return{c(){t=f("div"),n=f("input"),s=d(),i=f("label"),r=u(g),e.$$binding_groups[1].push(n),n.__value=l=`${e.id}___${e.opt[0]}`,n.value=n.__value,h(n,"type","checkbox"),h(i,"class","checkbox"),m=p(n,"change",e.input_change_handler_4)},m(l,c){o(l,t,c),a(t,n),n.checked=~e.config.multicheck.indexOf(n.__value),a(t,s),a(t,i),a(i,r)},p(e,t){e.config&&(n.checked=~t.config.multicheck.indexOf(n.__value)),(e.wf||e.Object)&&l!==(l=`${t.id}___${t.opt[0]}`)&&(n.__value=l),n.value=n.__value,(e.Object||e.wf)&&g!==(g=t.opt[1]+"")&&_(r,g)},d(l){l&&c(t),e.$$binding_groups[1].splice(e.$$binding_groups[1].indexOf(n),1),m()}}}function Ve(e){let t,n,l,s,i,m,p,g=e.name+"",w=e.nf+"",b=Object.entries(e.opts),v=[];for(let t=0;t<b.length;t+=1)v[t]=Ke(G(e,b,t));return{c(){t=f("div"),n=f("label"),l=u(g),s=d(),i=f("code"),m=u(w),p=d();for(let e=0;e<v.length;e+=1)v[e].c();h(n,"class","label"),h(t,"class","field")},m(e,c){o(e,t,c),a(t,n),a(n,l),a(n,s),a(n,i),a(i,m),a(t,p);for(let e=0;e<v.length;e+=1)v[e].m(t,null)},p(e,n){if(e.wf&&g!==(g=n.name+"")&&_(l,g),e.wf&&w!==(w=n.nf+"")&&_(m,w),e.Object||e.wf||e.config){let l;for(b=Object.entries(n.opts),l=0;l<b.length;l+=1){const s=G(n,b,l);v[l]?v[l].p(e,s):(v[l]=Ke(s),v[l].c(),v[l].m(t,null))}for(;l<v.length;l+=1)v[l].d(1);v.length=b.length}},d(e){e&&c(t),r(v,e)}}}function Je(e){let t,n,l,s,i,r,m,g,b,v=e.name+"",y=e.nf+"",j=!1;function O(){j=!0,e.input_input_handler_5.call(g,e)}return{c(){t=f("div"),n=f("label"),l=u(v),s=d(),i=f("code"),r=u(y),m=d(),g=f("input"),h(n,"class","label"),h(g,"type","number"),h(g,"class","input"),h(t,"class","field"),b=p(g,"input",O)},m(c,f){o(c,t,f),a(t,n),a(n,l),a(n,s),a(n,i),a(i,r),a(t,m),a(t,g),w(g,e.config.inputparams[e.id])},p(t,n){e=n,t.wf&&v!==(v=e.name+"")&&_(l,v),t.wf&&y!==(y=e.nf+"")&&_(r,y),j||!t.config&&!t.wf||w(g,e.config.inputparams[e.id]),j=!1},d(e){e&&c(t),b()}}}function Qe(e){let t,n,l,s,i,r,m,g,w,b,v,y=e.name+"",j=e.nf+"";return{c(){t=f("div"),n=f("input"),s=d(),i=f("label"),r=u(y),m=u(": "),g=f("code"),w=u(j),b=d(),e.$$binding_groups[0].push(n),n.__value=l=e.id,n.value=n.__value,h(n,"type","checkbox"),h(i,"class","checkbox"),v=p(n,"change",e.input_change_handler_5)},m(l,c){o(l,t,c),a(t,n),n.checked=~e.config.flags.indexOf(n.__value),a(t,s),a(t,i),a(i,r),a(t,m),a(t,g),a(g,w),a(t,b)},p(e,t){e.config&&(n.checked=~t.config.flags.indexOf(n.__value)),e.wf&&l!==(l=t.id)&&(n.__value=l),n.value=n.__value,e.wf&&y!==(y=t.name+"")&&_(r,y),e.wf&&j!==(j=t.nf+"")&&_(w,j)},d(l){l&&c(t),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(n),1),v()}}}function Xe(e){let t,n,l,s,i=e.wf.multifileparams,u=[];for(let t=0;t<i.length;t+=1)u[t]=lt(Q(e,i,t));let m=e.wf.fileparams,p=[];for(let t=0;t<m.length;t+=1)p[t]=ct(Y(e,m,t));return{c(){t=f("div"),(n=f("div")).textContent="Input files",l=d();for(let e=0;e<u.length;e+=1)u[e].c();s=d();for(let e=0;e<p.length;e+=1)p[e].c();h(n,"class","title is-5"),h(t,"class","box")},m(e,i){o(e,t,i),a(t,n),a(t,l);for(let e=0;e<u.length;e+=1)u[e].m(t,null);a(t,s);for(let e=0;e<p.length;e+=1)p[e].m(t,null)},p(e,n){if(e.Object||e.config||e.wf||e.removeMultifile||e.addMultifile){let l;for(i=n.wf.multifileparams,l=0;l<i.length;l+=1){const a=Q(n,i,l);u[l]?u[l].p(e,a):(u[l]=lt(a),u[l].c(),u[l].m(t,s))}for(;l<u.length;l+=1)u[l].d(1);u.length=i.length}if(e.config||e.wf){let l;for(m=n.wf.fileparams,l=0;l<m.length;l+=1){const s=Y(n,m,l);p[l]?p[l].p(e,s):(p[l]=ct(s),p[l].c(),p[l].m(t,null))}for(;l<p.length;l+=1)p[l].d(1);p.length=m.length}},d(e){e&&c(t),r(u,e),r(p,e)}}}function Ze(e){let t,n=e.wf.libfiles[e.filep.ftype],l=[];for(let t=0;t<n.length;t+=1)l[t]=Ge(V(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=m()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);o(e,t,n)},p(e,s){if(e.wf){let i;for(n=s.wf.libfiles[s.filep.ftype],i=0;i<n.length;i+=1){const a=V(s,n,i);l[i]?l[i].p(e,a):(l[i]=Ge(a),l[i].c(),l[i].m(t.parentNode,t))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){r(l,e),e&&c(t)}}}function Ge(e){let t,n,l,s,i,r=e.libfn.name+"",d=e.libfn.desc+"";return{c(){t=f("option"),n=u(r),l=u(" -- "),s=u(d),t.__value=i=e.libfn.id,t.value=t.__value},m(e,i){o(e,t,i),a(t,n),a(t,l),a(t,s)},p(e,l){e.wf&&r!==(r=l.libfn.name+"")&&_(n,r),e.wf&&d!==(d=l.libfn.desc+"")&&_(s,d),e.wf&&i!==(i=l.libfn.id)&&(t.__value=i),t.value=t.__value},d(e){e&&c(t)}}}function et(e){let t,n=e.wf.prev_resultfiles,l=[];for(let t=0;t<n.length;t+=1)l[t]=tt(K(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=m()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);o(e,t,n)},p(e,s){if(e.wf){let i;for(n=s.wf.prev_resultfiles,i=0;i<n.length;i+=1){const a=K(s,n,i);l[i]?l[i].p(e,a):(l[i]=tt(a),l[i].c(),l[i].m(t.parentNode,t))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){r(l,e),e&&c(t)}}}function tt(e){let t,n,l,s,i,r,d,m=e.resfile.analysisname+"",p=e.resfile.analysisdate+"",h=e.resfile.name+"";return{c(){t=f("option"),n=u(m),l=u(" -- "),s=u(p),i=u(" -- "),r=u(h),t.__value=d=e.resfile.id,t.value=t.__value},m(e,c){o(e,t,c),a(t,n),a(t,l),a(t,s),a(t,i),a(t,r)},p(e,l){e.wf&&m!==(m=l.resfile.analysisname+"")&&_(n,m),e.wf&&p!==(p=l.resfile.analysisdate+"")&&_(s,p),e.wf&&h!==(h=l.resfile.name+"")&&_(r,h),e.wf&&d!==(d=l.resfile.id)&&(t.__value=d),t.value=t.__value},d(e){e&&c(t)}}}function nt(e){let t,n,s,i,r,g,w,v,y,j,O,k,x,q,$=e.mfpkey+"";function C(...t){return e.click_handler_1(e,...t)}let z=e.filep.ftype in e.wf.libfiles&&Ze(e),S=e.filep.allow_resultfile&&et(e);function A(){e.select_change_handler_1.call(j,e)}return{c(){t=f("label"),n=u("File nr. "),s=u($),i=d(),r=f("span"),(g=f("a")).innerHTML='<i class="fa fa-trash-alt"></i>',w=d(),v=f("div"),y=f("div"),j=f("select"),(O=f("option")).textContent="Please select one",(k=f("option")).textContent="Do not use this parameter",z&&z.c(),x=m(),S&&S.c(),h(g,"title","Remove this file"),h(r,"class","icon is-small"),h(t,"class","label is-small"),O.disabled=!0,O.__value="",O.value=O.__value,k.__value="",k.value=k.__value,void 0===e.config.multifileparams[e.filep.id][e.mfpkey]&&E(A),h(y,"class","select"),h(v,"class","field"),q=[p(g,"click",C),p(j,"change",A)]},m(l,c){o(l,t,c),a(t,n),a(t,s),a(t,i),a(t,r),a(r,g),o(l,w,c),o(l,v,c),a(v,y),a(y,j),a(j,O),a(j,k),z&&z.m(j,null),a(j,x),S&&S.m(j,null),b(j,e.config.multifileparams[e.filep.id][e.mfpkey])},p(t,n){e=n,(t.Object||t.config||t.wf)&&$!==($=e.mfpkey+"")&&_(s,$),e.filep.ftype in e.wf.libfiles?z?z.p(t,e):((z=Ze(e)).c(),z.m(j,x)):z&&(z.d(1),z=null),e.filep.allow_resultfile?S?S.p(t,e):((S=et(e)).c(),S.m(j,null)):S&&(S.d(1),S=null),(t.config||t.wf||t.Object)&&b(j,e.config.multifileparams[e.filep.id][e.mfpkey])},d(e){e&&c(t),e&&c(w),e&&c(v),z&&z.d(),S&&S.d(),l(q)}}}function lt(e){let t,n,l,s,i,g,w,b,v=e.filep.name+"";function y(...t){return e.click_handler(e,...t)}let j=Object.keys(e.config.multifileparams[e.filep.id]),O=[];for(let t=0;t<j.length;t+=1)O[t]=nt(J(e,j,t));return{c(){t=f("label"),n=u(v),l=d(),s=f("span"),(i=f("a")).innerHTML='<i class="fa fa-plus-square"></i>',g=d();for(let e=0;e<O.length;e+=1)O[e].c();w=m(),h(i,"title","Add another file"),h(s,"class","icon is-small"),h(t,"class","label"),b=p(i,"click",y)},m(e,c){o(e,t,c),a(t,n),a(t,l),a(t,s),a(s,i),o(e,g,c);for(let t=0;t<O.length;t+=1)O[t].m(e,c);o(e,w,c)},p(t,l){if(e=l,t.wf&&v!==(v=e.filep.name+"")&&_(n,v),t.config||t.wf||t.Object||t.removeMultifile){let n;for(j=Object.keys(e.config.multifileparams[e.filep.id]),n=0;n<j.length;n+=1){const l=J(e,j,n);O[n]?O[n].p(t,l):(O[n]=nt(l),O[n].c(),O[n].m(w.parentNode,w))}for(;n<O.length;n+=1)O[n].d(1);O.length=j.length}},d(e){e&&c(t),e&&c(g),r(O,e),e&&c(w),b()}}}function st(e){let t,n=e.wf.libfiles[e.filep.ftype],l=[];for(let t=0;t<n.length;t+=1)l[t]=it(B(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=m()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);o(e,t,n)},p(e,s){if(e.wf){let i;for(n=s.wf.libfiles[s.filep.ftype],i=0;i<n.length;i+=1){const a=B(s,n,i);l[i]?l[i].p(e,a):(l[i]=it(a),l[i].c(),l[i].m(t.parentNode,t))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){r(l,e),e&&c(t)}}}function it(e){let t,n,l,s,i,r=e.libfn.name+"",d=e.libfn.desc+"";return{c(){t=f("option"),n=u(r),l=u(" -- "),s=u(d),t.__value=i=e.libfn.id,t.value=t.__value},m(e,i){o(e,t,i),a(t,n),a(t,l),a(t,s)},p(e,l){e.wf&&r!==(r=l.libfn.name+"")&&_(n,r),e.wf&&d!==(d=l.libfn.desc+"")&&_(s,d),e.wf&&i!==(i=l.libfn.id)&&(t.__value=i),t.value=t.__value},d(e){e&&c(t)}}}function at(e){let t,n=e.wf.prev_resultfiles,l=[];for(let t=0;t<n.length;t+=1)l[t]=ot(W(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=m()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);o(e,t,n)},p(e,s){if(e.wf){let i;for(n=s.wf.prev_resultfiles,i=0;i<n.length;i+=1){const a=W(s,n,i);l[i]?l[i].p(e,a):(l[i]=ot(a),l[i].c(),l[i].m(t.parentNode,t))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){r(l,e),e&&c(t)}}}function ot(e){let t,n,l,s,i,r,d,m=e.resfile.analysisname+"",p=e.resfile.analysisdate+"",h=e.resfile.name+"";return{c(){t=f("option"),n=u(m),l=u(" -- "),s=u(p),i=u(" -- "),r=u(h),t.__value=d=e.resfile.id,t.value=t.__value},m(e,c){o(e,t,c),a(t,n),a(t,l),a(t,s),a(t,i),a(t,r)},p(e,l){e.wf&&m!==(m=l.resfile.analysisname+"")&&_(n,m),e.wf&&p!==(p=l.resfile.analysisdate+"")&&_(s,p),e.wf&&h!==(h=l.resfile.name+"")&&_(r,h),e.wf&&d!==(d=l.resfile.id)&&(t.__value=d),t.value=t.__value},d(e){e&&c(t)}}}function ct(e){let t,n,l,s,i,r,g,w,v,y,j,O=e.filep.name+"",k=e.filep.ftype in e.wf.libfiles&&st(e),x=e.filep.allow_resultfile&&at(e);function q(){e.select_change_handler_2.call(r,e)}return{c(){t=f("div"),n=f("label"),l=u(O),s=d(),i=f("div"),r=f("select"),(g=f("option")).textContent="Please select one",(w=f("option")).textContent="Do not use this parameter",k&&k.c(),v=m(),x&&x.c(),y=d(),h(n,"class","label"),g.disabled=!0,g.__value="",g.value=g.__value,w.__value="",w.value=w.__value,void 0===e.config.fileparams[e.filep.id]&&E(q),h(i,"class","select"),h(t,"class","field"),j=p(r,"change",q)},m(c,f){o(c,t,f),a(t,n),a(n,l),a(t,s),a(t,i),a(i,r),a(r,g),a(r,w),k&&k.m(r,null),a(r,v),x&&x.m(r,null),b(r,e.config.fileparams[e.filep.id]),a(t,y)},p(t,n){e=n,t.wf&&O!==(O=e.filep.name+"")&&_(l,O),e.filep.ftype in e.wf.libfiles?k?k.p(t,e):((k=st(e)).c(),k.m(r,v)):k&&(k.d(1),k=null),e.filep.allow_resultfile?x?x.p(t,e):((x=at(e)).c(),x.m(r,null)):x&&(x.d(1),x=null),(t.config||t.wf)&&b(r,e.config.fileparams[e.filep.id])},d(e){e&&c(t),k&&k.d(),x&&x.d(),j()}}}function rt(e){let t,n,l,s=e.wf.fixedfileparams,i=[];for(let t=0;t<s.length;t+=1)i[t]=ft(I(e,s,t));return{c(){t=f("div"),(n=f("div")).textContent="Predefined files",l=d();for(let e=0;e<i.length;e+=1)i[e].c();h(n,"class","title is-5"),h(t,"class","box")},m(e,s){o(e,t,s),a(t,n),a(t,l);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,n){if(e.wf){let l;for(s=n.wf.fixedfileparams,l=0;l<s.length;l+=1){const a=I(n,s,l);i[l]?i[l].p(e,a):(i[l]=ft(a),i[l].c(),i[l].m(t,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=s.length}},d(e){e&&c(t),r(i,e)}}}function ft(e){let t,n,l,s,i,r,m,p,g,w,b,v,y,j=e.ffilep.name+"",O=e.ffilep.fn+"",k=e.ffilep.desc+"";return{c(){t=f("div"),n=f("label"),l=u(j),s=d(),i=f("div"),r=f("select"),(m=f("option")).textContent="Fixed selection",p=f("option"),g=u(O),w=u(" -- "),b=u(k),y=d(),h(n,"class","label"),m.disabled=!0,m.__value="",m.value=m.__value,p.__value=v=e.ffilep.fn+" -- "+e.ffilep.desc,p.value=p.__value,h(i,"class","select"),h(t,"class","field")},m(e,c){o(e,t,c),a(t,n),a(n,l),a(t,s),a(t,i),a(i,r),a(r,m),a(r,p),a(p,g),a(p,w),a(p,b),a(t,y)},p(e,t){e.wf&&j!==(j=t.ffilep.name+"")&&_(l,j),e.wf&&O!==(O=t.ffilep.fn+"")&&_(g,O),e.wf&&k!==(k=t.ffilep.desc+"")&&_(b,k),e.wf&&v!==(v=t.ffilep.fn+" -- "+t.ffilep.desc)&&(p.__value=v),p.value=p.__value},d(e){e&&c(t)}}}function ut(t){let n,l,s;return{c(){(n=f("a")).textContent="Store analysis",l=d(),(s=f("a")).textContent="Store and queue analysis",h(n,"class","button is-primary"),h(n,"disabled",""),h(s,"class","button is-primary"),h(s,"disabled","")},m(e,t){o(e,n,t),o(e,l,t),o(e,s,t)},p:e,d(e){e&&c(n),e&&c(l),e&&c(s)}}}function dt(t){let n,l,s;return{c(){(n=f("a")).textContent="Store analysis",l=d(),(s=f("a")).textContent="Store and queue analysis",h(n,"class","button is-primary is-loading"),h(s,"class","button is-primary is-loading")},m(e,t){o(e,n,t),o(e,l,t),o(e,s,t)},p:e,d(e){e&&c(n),e&&c(l),e&&c(s)}}}function mt(t){let n,s,i,a;return{c(){(n=f("a")).textContent="Store analysis",s=d(),(i=f("a")).textContent="Store and queue analysis",h(n,"class","button is-primary"),h(i,"class","button is-primary"),a=[p(n,"click",t.storeAnalysis),p(i,"click",t.runAnalysis)]},m(e,t){o(e,n,t),o(e,s,t),o(e,i,t)},p:e,d(e){e&&c(n),e&&c(s),e&&c(i),l(a)}}}function pt(t){let n,s,i,u,m,g,_,w,v,y,j,O,k,x,q,$,C,z,S,A,L,N,M,T,R,F,P,D=Object.values(t.notif.errors).some(bt),H=Object.values(t.notif.links).some(wt),U=Object.values(t.notif.messages).some(_t),I=D&&de(t),W=H&&pe(t),B=U&&ge(t),Y=t.wforder,K=[];for(let e=0;e<Y.length;e+=1)K[e]=we(ce(t,Y,e));let V=t.config.wfid&&be(t),J=t.wf&&je(t);return{c(){n=f("div"),I&&I.c(),s=d(),W&&W.c(),i=d(),B&&B.c(),u=d(),m=f("div"),(g=f("div")).textContent="Analysis",_=d(),w=f("div"),(v=f("div")).innerHTML='<label class="label">Workflow:</label>',y=d(),j=f("div"),O=f("div"),k=f("div"),x=f("select"),(q=f("option")).textContent="Select workflow";for(let e=0;e<K.length;e+=1)K[e].c();C=d(),(z=f("div")).innerHTML='<label class="label">Workflow version:</label>',S=d(),A=f("div"),L=f("div"),N=f("div"),M=f("select"),(T=f("option")).textContent="Select workflow version",V&&V.c(),F=d(),J&&J.c(),h(n,"class","errormsg svelte-5nys59"),h(g,"class","title is-5"),h(v,"class","field-label is-normal"),q.disabled=!0,q.__value=$=!1,q.value=q.__value,void 0===t.config.wfid&&E(()=>t.select0_change_handler.call(x)),h(k,"class","select"),h(O,"class","field"),h(j,"class","field-body"),h(z,"class","field-label is-normal"),T.disabled=!0,T.__value=R=!1,T.value=T.__value,void 0===t.config.wfversion&&E(()=>t.select1_change_handler.call(M)),h(N,"class","select"),h(L,"class","field"),h(A,"class","field-body"),h(w,"class","field is-horizontal"),h(m,"class","content"),P=[p(x,"change",t.select0_change_handler),p(x,"change",t.change_handler),p(M,"change",t.select1_change_handler),p(N,"change",t.fetchWorkflow)]},m(e,l){o(e,n,l),I&&I.m(n,null),a(n,s),W&&W.m(n,null),a(n,i),B&&B.m(n,null),o(e,u,l),o(e,m,l),a(m,g),a(m,_),a(m,w),a(w,v),a(w,y),a(w,j),a(j,O),a(O,k),a(k,x),a(x,q);for(let e=0;e<K.length;e+=1)K[e].m(x,null);b(x,t.config.wfid),a(w,C),a(w,z),a(w,S),a(w,A),a(A,L),a(L,N),a(N,M),a(M,T),V&&V.m(M,null),b(M,t.config.wfversion),a(m,F),J&&J.m(m,null)},p(e,t){if((e.Object||e.notif)&&(D=Object.values(t.notif.errors).some(bt)),D?I?I.p(e,t):((I=de(t)).c(),I.m(n,s)):I&&(I.d(1),I=null),(e.Object||e.notif)&&(H=Object.values(t.notif.links).some(wt)),H?W?W.p(e,t):((W=pe(t)).c(),W.m(n,i)):W&&(W.d(1),W=null),(e.Object||e.notif)&&(U=Object.values(t.notif.messages).some(_t)),U?B?B.p(e,t):((B=ge(t)).c(),B.m(n,null)):B&&(B.d(1),B=null),e.wforder||e.allwfs){let n;for(Y=t.wforder,n=0;n<Y.length;n+=1){const l=ce(t,Y,n);K[n]?K[n].p(e,l):(K[n]=we(l),K[n].c(),K[n].m(x,null))}for(;n<K.length;n+=1)K[n].d(1);K.length=Y.length}e.config&&b(x,t.config.wfid),t.config.wfid?V?V.p(e,t):((V=be(t)).c(),V.m(M,null)):V&&(V.d(1),V=null),e.config&&b(M,t.config.wfversion),t.wf?J?J.p(e,t):((J=je(t)).c(),J.m(m,null)):J&&(J.d(1),J=null)},i:e,o:e,d(e){e&&c(n),I&&I.d(),W&&W.d(),B&&B.d(),e&&c(u),e&&c(m),r(K,e),V&&V.d(),J&&J.d(),l(P)}}}function ht(e){return Object.entries(e).sort((e,t)=>e[0].replace("N","A")>t[0].replace("N","A")).map(e=>({ch:e[0],sample:e[1][0],chid:e[1][1]}))}const gt=e=>e,_t=e=>1===e,wt=e=>1===e,bt=e=>1===e,vt=e=>1==e[1],yt=e=>e[0],jt=e=>1==e[1],Ot=e=>e[0],kt=e=>1==e[1],xt=e=>e[0],qt=e=>`${e[0].toUpperCase()}${e.slice(1).toLowerCase()}`;function $t(e,t,n){let l={errors:{},messages:{},links:{}},s=!0,i=!1,a=!1,o={},c=!1,r=[],f={},u={wfid:!1,wfversion:!1,analysisname:"",flags:[],multicheck:[],isoquants:{},fileparams:{},inputparams:{},multifileparams:{},mzmldef:!1,v1:!1,v2:!1,version_dep:{v1:{instype:!1,dtype:!1}}},d={};async function m(){if(!function(){n("notif",l={errors:{},messages:{},links:{}});const e=RegExp("^[a-z0-9_-]+$","i");return u.analysisname?e.test(u.analysisname)||n("notif",l.errors["Analysisname may only contain a-z 0-9 _ -"]=1,l):n("notif",l.errors["Analysisname must be filled in"]=1,l),u.wfid||n("notif",l.errors["You must select a workflow"]=1,l),u.wfversion||n("notif",l.errors["You must select a workflow version"]=1,l),"mzmldef"in c.components&&!u.mzmldef&&n("notif",l.errors["You must select a mzml definition file"]=1,l),Object.values(f).forEach(t=>{"labelcheck"===u.version_dep.v1.dtype.toLowerCase()||t.filesaresets||t.setname?t.filesaresets?t.files.filter(e=>!e.setname).length&&n("notif",l.errors[`File ${fn.name} needs to have a setname`]=1,l):t.setname&&!e.test(t.setname)&&n("notif",l.errors[`Dataset ${t.proj} - ${t.exp} - ${t.run} needs to have another set name: only a-z 0-9 _ are allowed`]=1,l):n("notif",l.errors[`Dataset ${t.proj} - ${t.exp} - ${t.run} needs to have a set name`]=1,l)}),Object.entries(u.isoquants).forEach(([t,s])=>{Object.entries(s.samplegroups).forEach(([s,i])=>{i&&!e.test(i)&&n("notif",l.errors[`Incorrect sample group name for set ${t}, channel ${s}, only A-Z a-z 0-9 _ are allowed`]=1,l)})}),0===Object.keys(l.errors).length}())return!1;n("runButtonActive",s=!1),n("postingAnalysis",i=!0),n("notif",l.messages["Validated data"]=1,l);let e=Object.fromEntries(Object.entries(u.fileparams).filter(([e,t])=>t));c.fixedfileparams.forEach(t=>{e[t.id]=t.sfid});let t=Object.fromEntries(Object.entries(u.multifileparams).map(([e,t])=>[e,Object.values(t).filter(e=>e)]).filter(([e,t])=>t.length));Object.fromEntries(Object.values(f).flatMap(e=>e.files.map(e=>[e.id,e.fr])));n("notif",l.messages[`Using ${Object.keys(f).length} dataset(s)`]=1,l),l.messages[`${Object.keys(e).length} other inputfiles found`];let r={analysis_id:!!existing_analysis&&existing_analysis.analysis_id,dsids:Object.keys(f),dssetnames:Object.fromEntries(Object.entries(f).filter(([e,t])=>!t.filesaresets).map(([e,t])=>[e,t.setname])),fnsetnames:Object.fromEntries(Object.entries(f).filter(([e,t])=>t.filesaresets).map(([e,t])=>t.files.map(e=>[e.id,e.setname])).flat()),frregex:Object.fromEntries(Object.entries(f).map(([e,t])=>[e,t.frregex])),matchedfractions:d,singlefiles:e,multifiles:t,components:{mzmldef:u.mzmldef,sampletable:!1},wfid:u.wfid,nfwfvid:u.wfversion.id,analysisname:`${o[u.wfid].wftype}_${u.analysisname}`,isoquant:{},params:{flags:Object.fromEntries(u.flags.map(e=>[e,!0])),inputparams:u.inputparams,multicheck:u.multicheck.reduce((e,t)=>{const n=t.split("___");return console.log(n),e[n[0]].push(n[1]),e},Object.fromEntries(u.multicheck.map(e=>{return[e.split("___")[0],[]]})))}};if(u.v1&&(r.params.inst=["--instrument",u.version_dep.v1.instype]),"isobaric_quant"in c.components&&(r.isoquant=u.isoquants),"isobaric_quant"in c.components||"sampletable"in c.components){const e=Object.entries(u.isoquants).flatMap(([e,t])=>Object.entries(t.channels).map(([n,l])=>[n,e,l,t.samplegroups[n]]).sort((e,t)=>e[0].replace("N","A")>t[0].replace("N","A")));r.components.sampletable=e.map(e=>e.slice(0,3).concat(e[3]?e[3]:"X__POOL"))}if(!Object.entries(l.errors).filter(([e,t])=>t).length){n("notif",l.messages[`Storing analysis for ${u.analysisname}`]=1,l);const e=await H("/analysis/store/",r);e.error?(n("notif",l.errors[e.error]=1,l),"link"in e&&n("notif",l.links[e.link]=1,l)):a=e.analysis_id}n("postingAnalysis",i=!1),n("runButtonActive",s=!0)}async function p(){let e=new URL("/analysis/workflow",document.location);const t={dsids:dsids.join(","),wfvid:u.wfversion.id};e.search=new URLSearchParams(t).toString();const s=await D(e);if("error"in s){const e=`While fetching workflow versions, encountered: ${s.error}`;n("notif",l.errors[e]=1,l),setTimeout(function(e){n("notif",l.errors[e]=0,l)},F,e)}else n("wf",c=s.wf),n("config",u.v1=1===c.analysisapi,u),n("config",u.v2=2===c.analysisapi,u);c.multifileparams.length&&n("config",u.multifileparams=Object.fromEntries(c.multifileparams.map(e=>[e.id,{0:""}])),u),async function(){let e=new URL("/analysis/dsets/",document.location);const t={dsids:dsids.join(","),anid:existing_analysis?existing_analysis.analysis_id:0};e.search=new URLSearchParams(t).toString();const s=await D(e);if(s.error){const e=s.errmsg;n("notif",l.errors[e]=1,l),setTimeout(function(e){n("notif",l.errors[e]=0,l)},F,e)}else{n("dsets",f=s.dsets),Object.entries(f).filter(e=>e[1].prefrac).forEach(e=>w(f[e[0]]));const e=new Set(Object.values(f).map(e=>e.dtype.toLowerCase()));n("config",u.version_dep.v1.dtype=e.size>1?"mixed":e.keys().next().value,u);const t=new Set(Object.values(f).map(e=>e.details.qtypeshort));u.v1&&t.size>1?n("notif",l.errors["Mixed quant types detected, cannot use those in single run, use more advanced pipeline version"]=1,l):n("config",u.version_dep.v1.qtype=t.keys().next().value,u);const i=new Set(Object.values(f).flatMap(e=>e.details.instrument_types).map(e=>e.toLowerCase()));u.v1&&i.size>1?n("notif",l.errors["Mixed instrument types detected, cannot use those in single run, use more advanced pipeline version"]=1,l):n("config",u.version_dep.v1.instype=i.keys().next().value,u)}}()}function h(e,t){delete u.multifileparams[e][t];let l={};Object.keys(u.multifileparams[e]).forEach((t,n)=>{l[n]=u.multifileparams[e][t]}),n("config",u.multifileparams[e]=l,u)}function _(e){const t=Object.keys(u.multifileparams[e]).map(e=>+e),l=t.length?Math.max(...t)+1:0;n("config",u.multifileparams[e][l]="",u)}function w(e){let t=new Set;for(let n of e.files){const l=n.name.match(RegExp(e.frregex));l?(n.fr=l[1],t.add(l[1])):n.fr="NA"}n("matchedFr",d[e.id]=t.size,d)}O(async()=>{await async function(){let e=new URL("/analysis/workflows",document.location);const t=await D(e);if("error"in t){const e=`While fetching workflows, encountered: ${t.error}`;n("notif",l.errors[e]=1,l),setTimeout(function(e){n("notif",l.errors[e]=0,l)},F,e)}else n("allwfs",o=t.allwfs),n("wforder",r=t.order)}(),existing_analysis&&async function(){n("config",u.wfid=existing_analysis.wfid,u),n("config",u.wfversion_id=existing_analysis.wfversion_id,u),n("config",u.wfversion=o[existing_analysis.wfid].versions.filter(e=>e.id===existing_analysis.wfversion_id)[0],u);for(const e of["analysisname","mzmldef","flags","inputparams","multicheck","fileparams","isoquants"])n("config",u[e]=existing_analysis[e],u);await p(),Object.assign(u.multifileparams,existing_analysis.multifileparams)}()});const b=[[],[]];return{notif:l,runButtonActive:s,postingAnalysis:i,allwfs:o,wf:c,wforder:r,dsets:f,config:u,matchedFr:d,storeAnalysis:m,runAnalysis:async function(){if(await m(),!Object.entries(l.errors).filter(([e,t])=>t).length){n("notif",l.messages[`Queueing analysis job for ${u.analysisname}`]=1,l);const e={analysis_id:a},t=await H("/analysis/run/",e);t.error?n("notif",l.errors[t.error]=1,l):window.location.href="/?tab=searches"}},fetchWorkflow:p,removeMultifile:h,addMultifile:_,matchFractions:w,updateIsoquant:function(){if("isobaric_quant"in c.components||"sampletable"in c.components){Object.values(f).forEach(e=>{const t=`Sample set mixing error! Channels for datasets with setname ${e.setname} are not identical!`;n("notif",l.errors[t]=0,l),!e.setname||e.setname in u.isoquants?e.setname&&e.setname in u.isoquants&&u.isoquants[e.setname].channels!==e.details.channels&&n("notif",l.errors[t]=1,l):n("config",u.isoquants[e.setname]={chemistry:e.details.qtypeshort,channels:e.details.channels,samplegroups:Object.fromEntries(Object.keys(e.details.channels).map(e=>[e,""])),denoms:Object.fromEntries(Object.keys(e.details.channels).map(e=>[e,!1])),report_intensity:!1,sweep:!1},u)});const e=new Set(Object.values(f).map(e=>e.setname).filter(e=>e));Object.keys(u.isoquants).filter(t=>!e.has(t)).forEach(e=>{delete u.isoquants[e]}),n("config",u.isoquants=Object.assign({},u.isoquants),u)}},select0_change_handler:function(){u.wfid=v(this),n("config",u),n("wforder",r)},change_handler:e=>n("wf",c=n("config",u.wfversion=!1,u)),select1_change_handler:function(){u.wfversion=v(this),n("config",u),n("wforder",r)},input_input_handler:function(){u.analysisname=this.value,n("config",u),n("wforder",r)},select_change_handler:function(){u.mzmldef=v(this),n("config",u),n("wforder",r)},input_change_handler:function({ds:e}){e.filesaresets=this.checked,n("Object",Object),n("dsets",f),n("wf",c)},input_input_handler_1:function({ds:e}){e.setname=this.value,n("Object",Object),n("dsets",f),n("wf",c)},input_input_handler_2:function({ds:e}){e.frregex=this.value,n("Object",Object),n("dsets",f),n("wf",c)},change_handler_1:({ds:e},t)=>w(e),input_input_handler_3:function({fn:e}){e.setname=this.value,n("Object",Object),n("dsets",f),n("wf",c)},input_change_handler_1:function({isoq:e}){e[1].sweep=this.checked,n("Object",Object),n("config",u),n("wf",c),n("wforder",r)},input_change_handler_2:function({isoq:e}){e[1].report_intensity=this.checked,n("Object",Object),n("config",u),n("wf",c),n("wforder",r)},input_change_handler_3:function({isoq:e,ch:t}){e[1].denoms[t]=this.checked,n("Object",Object),n("config",u),n("sortChannels",ht),n("wf",c),n("wforder",r)},input_input_handler_4:function({isoq:e,ch:t}){e[1].samplegroups[t]=this.value,n("Object",Object),n("config",u),n("sortChannels",ht),n("wf",c),n("wforder",r)},input_change_handler_4:function(){u.multicheck=g(b[1]),n("config",u),n("wforder",r)},input_input_handler_5:function({id:e}){var t;u.inputparams[e]=""===(t=this.value)?void 0:+t,n("config",u),n("wf",c),n("wforder",r)},input_change_handler_5:function(){u.flags=g(b[0]),n("config",u),n("wforder",r)},click_handler:({filep:e},t)=>_(e.id),click_handler_1:({filep:e,mfpkey:t},n)=>h(e.id,t),select_change_handler_1:function({filep:e,mfpkey:t}){u.multifileparams[e.id][t]=v(this),n("config",u),n("wf",c),n("Object",Object),n("wforder",r)},select_change_handler_2:function({filep:e}){u.fileparams[e.id]=v(this),n("config",u),n("wf",c),n("wforder",r)},$$binding_groups:b}}return new class extends R{constructor(e){super(),T(this,e,$t,pt,i,{})}}({target:document.querySelector("#apps")})}();
//# sourceMappingURL=bundle.js.map
