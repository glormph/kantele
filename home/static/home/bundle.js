var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function l(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function r(t,e,n){t.$$.on_destroy.push(i(e,n))}function c(t,e,n,s){return t[1]&&s?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](s(e))):n.ctx}function a(t){return null==t?"":t}function u(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function g(){return h(" ")}function $(){return h("")}function v(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.data!==e&&(t.data=e)}function w(t,e){(null!=e||t.value)&&(t.value=e)}function x(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}}function _(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}class k{constructor(t,e=null){this.e=m("div"),this.a=e,this.u(t)}m(t,e=null){for(let n=0;n<this.n.length;n+=1)d(t,this.n[n],e);this.t=t}u(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}p(t){this.d(),this.u(t),this.m(this.t,this.a)}d(){this.n.forEach(f)}}let j;function C(t){j=t}function O(){if(!j)throw new Error("Function called outside component initialization");return j}function T(t){O().$$.on_mount.push(t)}function I(){const t=O();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const l=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);s.slice().forEach(e=>{e.call(t,l)})}}}function N(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const A=[],S=[],W=[],E=[],L=Promise.resolve();let M=!1;function z(t){W.push(t)}function P(t){E.push(t)}let R=!1;const U=new Set;function q(){if(!R){R=!0;do{for(let t=0;t<A.length;t+=1){const e=A[t];C(e),D(e.$$)}for(A.length=0;S.length;)S.pop()();for(let t=0;t<W.length;t+=1){const e=W[t];U.has(e)||(U.add(e),e())}W.length=0}while(A.length);for(;E.length;)E.pop()();M=!1,R=!1,U.clear()}}function D(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}const F=new Set;let H;function B(){H={r:0,c:[],p:H}}function Q(){H.r||s(H.c),H=H.p}function J(t,e){t&&t.i&&(F.delete(t),t.i(e))}function Y(t,e,n,s){if(t&&t.o){if(F.has(t))return;F.add(t),H.c.push(()=>{F.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}}function G(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function K(t){t&&t.c()}function V(t,n,o){const{fragment:i,on_mount:r,on_destroy:c,after_update:a}=t.$$;i&&i.m(n,o),z(()=>{const n=r.map(e).filter(l);c?c.push(...n):s(n),t.$$.on_mount=[]}),a.forEach(z)}function X(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(t,e){-1===t.$$.dirty[0]&&(A.push(t),M||(M=!0,L.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function tt(e,l,o,i,r,c,a=[-1]){const u=j;C(e);const d=l.props||{},p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:a};let m=!1;if(p.ctx=o?o(e,d,(t,n,...s)=>{const l=s.length?s[0]:n;return p.ctx&&r(p.ctx[t],p.ctx[t]=l)&&(p.bound[t]&&p.bound[t](l),m&&Z(e,t)),n}):[],p.update(),m=!0,s(p.before_update),p.fragment=!!i&&i(p.ctx),l.target){if(l.hydrate){const t=(h=l.target,Array.from(h.childNodes));p.fragment&&p.fragment.l(t),t.forEach(f)}else p.fragment&&p.fragment.c();l.intro&&J(e.$$.fragment),V(e,l.target,l.anchor),q()}var h;C(u)}class et{$destroy(){X(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const nt=[];function st(t,e){return{subscribe:lt(t,e).subscribe}}function lt(e,n=t){let s;const l=[];function i(t){if(o(e,t)&&(e=t,s)){const t=!nt.length;for(let t=0;t<l.length;t+=1){const n=l[t];n[1](),nt.push(n,e)}if(t){for(let t=0;t<nt.length;t+=2)nt[t][0](nt[t+1]);nt.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(o,r=t){const c=[o,r];return l.push(c),1===l.length&&(s=n(i)||t),o(e),()=>{const t=l.indexOf(c);-1!==t&&l.splice(t,1),0===l.length&&(s(),s=null)}}}}function ot(e,n,o){const r=!Array.isArray(e),c=r?[e]:e,a=n.length<2;return st(o,e=>{let o=!1;const u=[];let d=0,f=t;const p=()=>{if(d)return;f();const s=n(r?u[0]:u,e);a?e(s):f=l(s)?s:t},m=c.map((t,e)=>i(t,t=>{u[e]=t,d&=~(1<<e),o&&p()},()=>{d|=1<<e}));return o=!0,p(),function(){s(m),f()}})}function it(t){let e,n;var s=t[0];if(s)var l=new s({});return{c(){l&&K(l.$$.fragment),e=$()},m(t,s){l&&V(l,t,s),d(t,e,s),n=!0},p(t,n){if(s!==(s=t[0])){if(l){B();const t=l;Y(t.$$.fragment,1,0,()=>{X(t,1)}),Q()}s?(K((l=new s({})).$$.fragment),J(l.$$.fragment,1),V(l,e.parentNode,e)):l=null}},i(t){n||(l&&J(l.$$.fragment,t),n=!0)},o(t){l&&Y(l.$$.fragment,t),n=!1},d(t){t&&f(e),l&&X(l,t)}}}function rt(t){let e,n;var s=t[0];function l(t){return{props:{params:t[1]}}}if(s)var o=new s(l(t));return{c(){o&&K(o.$$.fragment),e=$()},m(t,s){o&&V(o,t,s),d(t,e,s),n=!0},p(t,n){const i={};if(2&n&&(i.params=t[1]),s!==(s=t[0])){if(o){B();const t=o;Y(t.$$.fragment,1,0,()=>{X(t,1)}),Q()}s?(K((o=new s(l(t))).$$.fragment),J(o.$$.fragment,1),V(o,e.parentNode,e)):o=null}else s&&o.$set(i)},i(t){n||(o&&J(o.$$.fragment,t),n=!0)},o(t){o&&Y(o.$$.fragment,t),n=!1},d(t){t&&f(e),o&&X(o,t)}}}function ct(t){let e,n,s,l;const o=[rt,it],i=[];function r(t,e){return t[1]?0:1}return e=r(t),n=i[e]=o[e](t),{c(){n.c(),s=$()},m(t,n){i[e].m(t,n),d(t,s,n),l=!0},p(t,[l]){let c=e;(e=r(t))===c?i[e].p(t,l):(B(),Y(i[c],1,1,()=>{i[c]=null}),Q(),(n=i[e])||(n=i[e]=o[e](t)).c(),J(n,1),n.m(s.parentNode,s))},i(t){l||(J(n),l=!0)},o(t){Y(n),l=!1},d(t){i[e].d(t),t&&f(s)}}}function at(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let s="";return n>-1&&(s=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:s}}const ut=st(at(),function(t){const e=()=>{t(at())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}),dt=(ot(ut,t=>t.location),ot(ut,t=>t.querystring));function ft(e,n,s){let l,o=t;r(e,ut,t=>s(4,l=t)),e.$$.on_destroy.push(()=>o());let{routes:i={}}=n,{prefix:c=""}=n;class a{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:n,keys:s}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,s,l,o,i=[],r="",c=t.split("/");for(c[0]||c.shift();l=c.shift();)"*"===(n=l[0])?(i.push("wild"),r+="/(.*)"):":"===n?(s=l.indexOf("?",1),o=l.indexOf(".",1),i.push(l.substring(1,~s?s:~o?o:l.length)),r+=~s&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(r+=(~s?"?":"")+"\\"+l.substring(o))):r+="/"+l;return{keys:i,pattern:new RegExp("^"+r+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.route,this.conditions=e.conditions||[],this.userData=e.userData):(this.component=e,this.conditions=[],this.userData=void 0),this._pattern=n,this._keys=s}match(t){c&&t.startsWith(c)&&(t=t.substr(c.length)||"/");const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let s=0;for(;s<this._keys.length;)n[this._keys[s]]=e[++s]||null;return n}checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!this.conditions[e](t))return!1;return!0}}const u=[];i instanceof Map?i.forEach((t,e)=>{u.push(new a(e,t))}):Object.keys(i).forEach(t=>{u.push(new a(t,i[t]))});let d=null,f=null;const p=I(),m=(t,e)=>{setTimeout(()=>{p(t,e)},0)};return e.$set=(t=>{"routes"in t&&s(2,i=t.routes),"prefix"in t&&s(3,c=t.prefix)}),e.$$.update=(()=>{if(17&e.$$.dirty){s(0,d=null);let t=0;for(;!d&&t<u.length;){const e=u[t].match(l.location);if(e){const n={component:u[t].component,name:u[t].component.name,location:l.location,querystring:l.querystring,userData:u[t].userData};if(!u[t].checkConditions(n)){m("conditionsFailed",n);break}s(0,d=u[t].component),e&&"object"==typeof e&&Object.keys(e).length?s(1,f=e):s(1,f=null),m("routeLoaded",n)}t++}}}),[d,f,i,c]}class pt extends et{constructor(t){super(),tt(this,t,ft,ct,o,{routes:2,prefix:3})}}async function mt(t){let e;try{e=await t.json()}catch(e){return{ok:!1,error:"Server error encountered",status:t.status}}return e.ok=t.ok,e}async function ht(t){let e;try{e=await fetch(t)}catch{return{ok:!1,error:"Kantele encountered a network error",status:!1}}return await mt(e)}async function gt(t,e){let n;try{n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch{return{ok:!1,error:"Kantele encountered a network error",status:!1}}return await mt(n)}function $t(t,e,n){const s=t.slice();return s[32]=e[n].id,s[27]=e[n].name,s}function vt(t,e,n){const s=t.slice();return s[27]=e[n].name,s[28]=e[n].files,s[29]=e[n].instrument_id,s[30]=e,s[31]=n,s}function bt(t,e,n){const s=t.slice();return s[21]=e[n].dsname,s[22]=e[n].dirname,s[23]=e[n].nrraw,s[24]=e[n].dsinstrument,s[25]=e,s[26]=n,s}function yt(t,e,n){const s=t.slice();return s[27]=e[n].name,s[32]=e[n].id,s}function wt(t){let e,n,s,l=t[27]+"";return{c(){e=m("option"),n=h(l),e.__value=s=t[32],e.value=e.__value},m(t,s){d(t,e,s),u(e,n)},p(t,o){8&o[0]&&l!==(l=t[27]+"")&&y(n,l),8&o[0]&&s!==(s=t[32])&&(e.__value=s),e.value=e.__value},d(t){t&&f(e)}}}function xt(e){let n;return{c(){(n=m("a")).textContent="Check directory",b(n,"class","button is-small"),b(n,"disabled","")},m(t,e){d(t,n,e)},p:t,d(t){t&&f(n)}}}function _t(e){let n,s;return{c(){(n=m("a")).textContent="Check directory",b(n,"class","button is-small")},m(t,l,o){d(t,n,l),o&&s(),s=v(n,"click",e[12])},p:t,d(t){t&&f(n),s()}}}function kt(t){let e,n,l,o,i,r,c,a,$,y,w,x,_,k=Object.values(t[6]),j=[];for(let e=0;e<k.length;e+=1)j[e]=Ot(vt(t,k,e));return{c(){e=m("hr"),n=g(),l=m("h5"),o=h("Datasets\n        "),(i=m("a")).textContent="Previous",r=g(),(c=m("a")).textContent="Import datasets",a=g(),$=m("table"),(y=m("thead")).innerHTML="<th>Dataset</th> \n          <th># of raw files</th> \n          <th>Instrument</th>",w=g(),x=m("tbody");for(let t=0;t<j.length;t+=1)j[t].c();b(i,"class","button is-small"),b(c,"class","button is-small is-info"),b(l,"class","title is-5"),b($,"class","table")},m(f,p,m){d(f,e,p),d(f,n,p),d(f,l,p),u(l,o),u(l,i),u(l,r),u(l,c),d(f,a,p),d(f,$,p),u($,y),u($,w),u($,x);for(let t=0;t<j.length;t+=1)j[t].m(x,null);m&&s(_),_=[v(i,"click",t[19]),v(c,"click",t[11])]},p(t,e){if(192&e[0]){let n;for(k=Object.values(t[6]),n=0;n<k.length;n+=1){const s=vt(t,k,n);j[n]?j[n].p(s,e):(j[n]=Ot(s),j[n].c(),j[n].m(x,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=k.length}},d(t){t&&f(e),t&&f(n),t&&f(l),t&&f(a),t&&f($),p(j,t),s(_)}}}function jt(t){let e,n,s,l,o,i,r,c,a,$,y,w,x,_,k,j,C,O;function T(t,e){return(null==o||32&e[0])&&(o=!t[5].filter(St).length),o?It:Tt}let I=T(t,[-1]),N=I(t),A=t[5],S=[];for(let e=0;e<A.length;e+=1)S[e]=Nt(bt(t,A,e));return{c(){e=m("hr"),n=g(),s=m("h5"),l=h("Raw files found in directories\n        "),N.c(),i=g(),r=m("table"),c=m("thead"),(a=m("th")).textContent="Directory",$=g(),(y=m("th")).textContent="# of raw files",w=g(),x=m("th"),_=m("input"),k=h(" 1 directory per dataset"),j=g(),C=m("tbody");for(let t=0;t<S.length;t+=1)S[t].c();b(s,"class","title is-5"),b(_,"class","checkbox"),b(_,"type","checkbox"),_.value=t[4],b(r,"class","table")},m(o,f,p){d(o,e,f),d(o,n,f),d(o,s,f),u(s,l),N.m(s,null),d(o,i,f),d(o,r,f),u(r,c),u(c,a),u(c,$),u(c,y),u(c,w),u(c,x),u(x,_),u(x,k),u(r,j),u(r,C);for(let t=0;t<S.length;t+=1)S[t].m(C,null);p&&O(),O=v(_,"click",t[10])},p(t,e){if(I===(I=T(t,e))&&N?N.p(t,e):(N.d(1),(N=I(t))&&(N.c(),N.m(s,null))),16&e[0]&&(_.value=t[4]),32&e[0]){let n;for(A=t[5],n=0;n<A.length;n+=1){const s=bt(t,A,n);S[n]?S[n].p(s,e):(S[n]=Nt(s),S[n].c(),S[n].m(C,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=A.length}},d(t){t&&f(e),t&&f(n),t&&f(s),N.d(),t&&f(i),t&&f(r),p(S,t),O()}}}function Ct(t){let e,n,s,l=t[27]+"";return{c(){e=m("option"),n=h(l),e.__value=s=t[32],e.value=e.__value},m(t,s){d(t,e,s),u(e,n)},p(t,o){128&o[0]&&l!==(l=t[27]+"")&&y(n,l),128&o[0]&&s!==(s=t[32])&&(e.__value=s),e.value=e.__value},d(t){t&&f(e)}}}function Ot(t){let e,n,s,l,o,i,r,c,a,$,w,_,k=t[27]+"",j=t[28].length+"",C=t[7],O=[];for(let e=0;e<C.length;e+=1)O[e]=Ct($t(t,C,e));function T(){t[20].call($,t[29],t[30],t[31])}return{c(){e=m("tr"),n=m("td"),s=h(k),l=g(),o=m("td"),i=h(j),r=g(),c=m("td"),a=m("div"),$=m("select");for(let t=0;t<O.length;t+=1)O[t].c();w=g(),void 0===t[29]&&z(T),b(a,"class","select")},m(f,p,m){d(f,e,p),u(e,n),u(n,s),u(e,l),u(e,o),u(o,i),u(e,r),u(e,c),u(c,a),u(a,$);for(let t=0;t<O.length;t+=1)O[t].m($,null);x($,t[29]),u(c,w),m&&_(),_=v($,"change",T)},p(e,n){if(t=e,64&n[0]&&k!==(k=t[27]+"")&&y(s,k),64&n[0]&&j!==(j=t[28].length+"")&&y(i,j),128&n[0]){let e;for(C=t[7],e=0;e<C.length;e+=1){const s=$t(t,C,e);O[e]?O[e].p(s,n):(O[e]=Ct(s),O[e].c(),O[e].m($,null))}for(;e<O.length;e+=1)O[e].d(1);O.length=C.length}64&n[0]&&x($,t[29])},d(t){t&&f(e),p(O,t),_()}}}function Tt(e){let n,s;return{c(){(n=m("a")).textContent="Group directories",b(n,"class","button is-small")},m(t,l,o){d(t,n,l),o&&s(),s=v(n,"click",e[13])},p:t,d(t){t&&f(n),s()}}}function It(e){let n;return{c(){(n=m("a")).textContent="Group directories",b(n,"class","button is-small"),b(n,"disabled","")},m(t,e){d(t,n,e)},p:t,d(t){t&&f(n)}}}function Nt(t){let e,n,s,l,o,i,r,c,a,p,$,x=t[22]+"",_=t[23]+"";function k(){t[18].call(a,t[21],t[25],t[26])}return{c(){e=m("tr"),n=m("td"),s=h(x),l=g(),o=m("td"),i=h(_),r=g(),c=m("td"),a=m("input"),p=g(),b(a,"class","input"),b(a,"type","text")},m(f,m,h){d(f,e,m),u(e,n),u(n,s),u(e,l),u(e,o),u(o,i),u(e,r),u(e,c),u(c,a),w(a,t[21]),u(e,p),h&&$(),$=v(a,"input",k)},p(e,n){t=e,32&n[0]&&x!==(x=t[22]+"")&&y(s,x),32&n[0]&&_!==(_=t[23]+"")&&y(i,_),32&n[0]&&a.value!==t[21]&&w(a,t[21])},d(t){t&&f(e),$()}}}function At(e){let n,o,i,r,c,a,$,y,_,k,j,C,O,T,I,N,A,S,W,E,L,M,P=e[3],R=[];for(let t=0;t<P.length;t+=1)R[t]=wt(yt(e,P,t));let U=e[9]&&function(e){let n;return{c(){(n=m("div")).textContent=`${e[9]}`,b(n,"class","has-text-danger")},m(t,e){d(t,n,e)},p:t,d(t){t&&f(n)}}}(e);function q(t,e){return t[1]?_t:xt}let D=q(e),F=D(e);function H(t,e){return t[5].length&&"rawfiles"===t[8]?jt:t[5].length&&"dsets"===t[8]?kt:void 0}let B=H(e),Q=B&&B(e);return{c(){n=m("div"),o=m("div"),i=g(),r=m("div"),c=m("div"),(a=m("h5")).textContent="Import external raw files to datasets",$=g(),y=m("div"),_=m("div"),k=h("Server share name to find data:\n          "),j=m("div"),C=m("select");for(let t=0;t<R.length;t+=1)R[t].c();O=g(),T=m("div"),I=h("Directory to import from\n          "),N=m("input"),A=g(),U&&U.c(),S=g(),F.c(),W=g(),Q&&Q.c(),E=g(),L=m("button"),b(o,"class","modal-background"),b(a,"class","title is-5"),void 0===e[2]&&z(()=>e[16].call(C)),b(j,"class","select"),b(_,"class","control"),b(N,"class","input"),b(N,"type","text"),b(N,"placeholder","Where you have downloaded the data"),b(T,"class","control"),b(y,"class","field"),b(c,"class","box"),b(r,"class","modal-content"),b(L,"class","modal-close is-large"),b(L,"aria-label","close"),b(n,"class","modal is-active")},m(t,f,p){d(t,n,f),u(n,o),u(n,i),u(n,r),u(r,c),u(c,a),u(c,$),u(c,y),u(y,_),u(_,k),u(_,j),u(j,C);for(let t=0;t<R.length;t+=1)R[t].m(C,null);x(C,e[2]),u(y,O),u(y,T),u(T,I),u(T,N),w(N,e[1]),u(c,A),U&&U.m(c,null),u(c,S),F.m(c,null),u(c,W),Q&&Q.m(c,null),u(n,E),u(n,L),p&&s(M),M=[v(window,"keyup",e[14]),v(C,"change",e[16]),v(N,"input",e[17]),v(L,"click",function(){l(e[0])&&e[0].apply(this,arguments)})]},p(t,n){if(e=t,8&n[0]){let t;for(P=e[3],t=0;t<P.length;t+=1){const s=yt(e,P,t);R[t]?R[t].p(s,n):(R[t]=wt(s),R[t].c(),R[t].m(C,null))}for(;t<R.length;t+=1)R[t].d(1);R.length=P.length}4&n[0]&&x(C,e[2]),2&n[0]&&N.value!==e[1]&&w(N,e[1]),e[9]&&U.p(e,n),D===(D=q(e))&&F?F.p(e,n):(F.d(1),(F=D(e))&&(F.c(),F.m(c,W))),B===(B=H(e))&&Q?Q.p(e,n):(Q&&Q.d(1),(Q=B&&B(e))&&(Q.c(),Q.m(c,null)))},i:t,o:t,d(t){t&&f(n),p(R,t),U&&U.d(),F.d(),Q&&Q.d(),s(M)}}}const St=t=>""!==t.dsname;function Wt(t,e,n){let s,l,{toggleWindow:o}=e,i=[],r=!1,c=[],a={},u=[],d="rawfiles";async function f(){let t=await ht("/files/external/scan");n(3,i=t.shares),n(2,l=i[0].id)}T(async()=>{f()});return t.$set=(t=>{"toggleWindow"in t&&n(0,o=t.toggleWindow)}),[o,s,l,i,r,c,a,u,d,void 0,function(){n(4,r=!1===r),console.log(c),r&&n(5,c=c.map(t=>Object.assign(t,{dsname:t.dirname.replaceAll("/","_")}))),console.log(c)},async function(){const t={dirname:s,share_id:l,dsets:Object.values(a)};console.log(t),await gt("/files/external/import",t)},async function(){let t=await ht(`/files/external/scan?dirname=${s}`);n(5,c=t.dirsfound.map(t=>Object.assign({nrraw:t.files.length,dsname:""},t))),n(7,u=t.instruments.map(t=>({id:t[0],name:t[1]})))},function(){n(6,a={}),c.filter(t=>""!==t.dsname).forEach(t=>{t.dsname in a||n(6,a[t.dsname]={name:t.dsname,instrument_id:u[0].id,files:[]},a),n(6,a[t.dsname].files=a[t.dsname].files.concat(t.files),a)}),n(8,d="dsets")},function(t){27===t.keyCode&&o()},f,function(){l=_(this),n(2,l),n(3,i)},function(){s=this.value,n(1,s)},function(t,e,s){e[s].dsname=this.value,n(5,c)},t=>n(8,d="rawfiles"),function(t,e,s){e[s].instrument_id=_(this),n(6,a),n(7,u)}]}class Et extends et{constructor(t){super(),tt(this,t,Wt,At,o,{toggleWindow:0},[-1,-1])}}const Lt=5e3;function Mt(t){let e;return{c(){e=h(t[0])},m(t,n){d(t,e,n)},p(t,n){1&n&&y(e,t[0])},d(t){t&&f(e)}}}function zt(t){let e,n;return{c(){e=m("del"),n=h(t[0])},m(t,s){d(t,e,s),u(e,n)},p(t,e){1&e&&y(n,t[0])},d(t){t&&f(e)}}}function Pt(t){let e,n,s;function l(t,s){return(null==e||131&s)&&(e=!(!(t[1].confirm&&t[1].confirm.indexOf(t[0])>-1)||t[7])),e?Bt:((null==n||3&s)&&(n=!!(t[1].confirm&&t[1].confirm.indexOf(t[0])>-1)),n?Ht:Ft)}let o=l(t,-1),i=o(t);return{c(){i.c(),s=$()},m(t,e){i.m(t,e),d(t,s,e)},p(t,e){o===(o=l(t,e))&&i?i.p(t,e):(i.d(1),(i=o(t))&&(i.c(),i.m(s.parentNode,s)))},d(t){i.d(t),t&&f(s)}}}function Rt(t){let e,n,s;return{c(){e=m("span"),b(n=m("i"),"class","fa fa-square"),b(e,"class",s=`icon is-small ${t[5][t[0]]}`)},m(t,s){d(t,e,s),u(e,n)},p(t,n){33&n&&s!==(s=`icon is-small ${t[5][t[0]]}`)&&b(e,"class",s)},d(t){t&&f(e)}}}function Ut(t){let e,n,s,l;return{c(){e=m("span"),b(n=m("i"),"class",s=`fa fa-${t[4]}`),b(e,"title",t[3]),b(e,"class",l="icon is-small is-info")},m(t,s){d(t,e,s),u(e,n)},p(t,l){16&l&&s!==(s=`fa fa-${t[4]}`)&&b(n,"class",s),8&l&&b(e,"title",t[3])},d(t){t&&f(e)}}}function qt(t){let e;function n(t,e){return t[0]?Jt:Qt}let s=n(t),l=s(t);return{c(){e=m("span"),l.c(),b(e,"class","has-icon")},m(t,n){d(t,e,n),l.m(e,null)},p(t,o){s!==(s=n(t))&&(l.d(1),(l=s(t))&&(l.c(),l.m(e,null)))},d(t){t&&f(e),l.d()}}}function Dt(t){let e;function n(t,e){return t[5]?Gt:Yt}let s=n(t),l=s(t);return{c(){l.c(),e=$()},m(t,n){l.m(t,n),d(t,e,n)},p(t,o){s===(s=n(t))&&l?l.p(t,o):(l.d(1),(l=s(t))&&(l.c(),l.m(e.parentNode,e)))},d(t){l.d(t),t&&f(e)}}}function Ft(t){let e,n,s;return{c(){e=m("button"),n=h(t[0]),b(e,"class","button is-small")},m(l,o,i){d(l,e,o),u(e,n),i&&s(),s=v(e,"click",t[11])},p(t,e){1&e&&y(n,t[0])},d(t){t&&f(e),s()}}}function Ht(t){let e,n,s,l;return{c(){e=m("button"),n=h(t[0]),s=h(" - Are you sure?"),b(e,"class","button is-small is-danger is-light")},m(o,i,r){d(o,e,i),u(e,n),u(e,s),r&&l(),l=v(e,"click",t[10])},p(t,e){1&e&&y(n,t[0])},d(t){t&&f(e),l()}}}function Bt(t){let e,n,s;return{c(){e=m("button"),n=h(t[0]),b(e,"class","button is-small")},m(l,o,i){d(l,e,o),u(e,n),i&&s(),s=v(e,"click",t[9])},p(t,e){1&e&&y(n,t[0])},d(t){t&&f(e),s()}}}function Qt(t){let e;return{c(){e=h("-")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function Jt(t){let e;return{c(){b(e=m("i"),"class","fa fa-check has-text-success")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function Yt(t){let e,n;return{c(){e=m("span"),n=h(t[0]),b(e,"class","tag is-info")},m(t,s){d(t,e,s),u(e,n)},p(t,e){1&e&&y(n,t[0])},d(t){t&&f(e)}}}function Gt(t){let e,n,s;return{c(){e=m("span"),n=h(t[0]),b(e,"class",s=`tag ${t[5][t[0]]}`)},m(t,s){d(t,e,s),u(e,n)},p(t,l){1&l&&y(n,t[0]),33&l&&s!==(s=`tag ${t[5][t[0]]}`)&&b(e,"class",s)},d(t){t&&f(e)}}}function Kt(e){let n;function s(t,e){return"tag"===t[1].type?Dt:"bool"===t[1].type?qt:"icon"===t[1].type?Ut:"state"===t[1].type?Rt:"button"===t[1].type?Pt:t[6]?zt:Mt}let l=s(e),o=l(e);return{c(){o.c(),n=$()},m(t,e){o.m(t,e),d(t,n,e)},p(t,[e]){l===(l=s(t))&&o?o.p(t,e):(o.d(1),(o=l(t))&&(o.c(),o.m(n.parentNode,n)))},i:t,o:t,d(t){o.d(t),t&&f(n)}}}function Vt(t,e,n){const s=I();let{value:l}=e,{field:o}=e,{rowid:i}=e,{help:r=""}=e,{icon:c}=e,{color:a}=e,{inactive:u}=e,d=!1;return t.$set=(t=>{"value"in t&&n(0,l=t.value),"field"in t&&n(1,o=t.field),"rowid"in t&&n(2,i=t.rowid),"help"in t&&n(3,r=t.help),"icon"in t&&n(4,c=t.icon),"color"in t&&n(5,a=t.color),"inactive"in t&&n(6,u=t.inactive)}),[l,o,i,r,c,a,u,d,s,function(){n(7,d=!0),setTimeout(()=>{n(7,d=!1)},Lt)},t=>s("rowAction",{id:i,action:l}),t=>s("rowAction",{id:i,action:l})]}class Xt extends et{constructor(t){super(),tt(this,t,Vt,Kt,o,{value:0,field:1,rowid:2,help:3,icon:4,color:5,inactive:6})}}function Zt(t,e,n){const s=t.slice();return s[53]=e[n],s}function te(t,e,n){const s=t.slice();return s[53]=e[n],s}function ee(t,e,n){const s=t.slice();return s[50]=e[n],s}function ne(t,e,n){const s=t.slice();return s[58]=e[n],s}function se(t,e,n){const s=t.slice();return s[46]=e[n][0],s[47]=e[n][1],s}function le(t,e,n){const s=t.slice();return s[50]=e[n],s}function oe(t){let e,n=t[50].name+"";return{c(){e=h(n)},m(t,n){d(t,e,n)},p(t,s){4&s[0]&&n!==(n=t[50].name+"")&&y(e,n)},d(t){t&&f(e)}}}function ie(t){let e,n,s;return{c(){e=m("span"),b(n=m("i"),"class",s=a(`fa fa-${t[50].name.slice(2)}`)+" svelte-1xpxw1y"),b(e,"class","icon is-small")},m(t,s){d(t,e,s),u(e,n)},p(t,e){4&e[0]&&s!==(s=a(`fa fa-${t[50].name.slice(2)}`)+" svelte-1xpxw1y")&&b(n,"class",s)},d(t){t&&f(e)}}}function re(t){let e,n,s;function l(t,e){return(null==n||4&e[0])&&(n=!("__"!==t[50].name.slice(0,2))),n?ie:oe}let o=l(t,[-1]),i=o(t);return{c(){e=m("th"),i.c(),s=g()},m(t,n){d(t,e,n),i.m(e,null),u(e,s)},p(t,n){o===(o=l(t,n))&&i?i.p(t,n):(i.d(1),(i=o(t))&&(i.c(),i.m(e,s)))},d(t){t&&f(e),i.d()}}}function ce(t){let e;return{c(){(e=m("div")).innerHTML='<i class="fa fa-spinner fa-pulse fa-2x"></i>',b(e,"class","has-text-centered spinner svelte-1xpxw1y")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function ae(t){let e;function n(t,e){return t[10]?ue:de}let s=n(t),l=s(t);return{c(){e=m("div"),l.c(),b(e,"class","box svelte-1xpxw1y")},m(t,n){d(t,e,n),l.m(e,null)},p(t,o){s===(s=n(t))&&l?l.p(t,o):(l.d(1),(l=s(t))&&(l.c(),l.m(e,null)))},d(t){t&&f(e),l.d()}}}function ue(t){let e;return{c(){e=new k(t[11],null)},m(t,n){e.m(t,n)},p(t,n){2048&n[0]&&e.p(t[11])},d(t){t&&e.d()}}}function de(e){let n;return{c(){b(n=m("i"),"class","fa fa-spinner fa-pulse fa-2x")},m(t,e){d(t,n,e)},p:t,d(t){t&&f(n)}}}function fe(t){let e,n,s,l,o,i,r;function c(...e){return t[37](t[58],t[47],...e)}return{c(){e=m("a"),n=m("span"),s=m("i"),o=g(),b(s,"class",l=a(`fa fa-${t[58].name.slice(2)}`)+" svelte-1xpxw1y"),b(n,"class","icon has-text-info is-small"),b(e,"title",i=t[58].alt)},m(t,l,i){d(t,e,l),u(e,n),u(n,s),u(e,o),i&&r(),r=v(e,"click",c)},p(n,o){t=n,16&o[0]&&l!==(l=a(`fa fa-${t[58].name.slice(2)}`)+" svelte-1xpxw1y")&&b(s,"class",l),16&o[0]&&i!==(i=t[58].alt)&&b(e,"title",i)},d(t){t&&f(e),r()}}}function pe(t){let e;function n(...e){return t[44](t[47],...e)}const s=new Xt({props:{value:t[47][t[50].id],rowid:t[46],inactive:t[5].some(n),help:t[50].help,icon:t[50].icon,field:t[50],color:t[3][t[50].id]}});return s.$on("rowAction",t[45]),{c(){K(s.$$.fragment)},m(t,n){V(s,t,n),e=!0},p(e,l){t=e;const o={};133&l[0]&&(o.value=t[47][t[50].id]),129&l[0]&&(o.rowid=t[46]),161&l[0]&&(o.inactive=t[5].some(n)),4&l[0]&&(o.help=t[50].help),4&l[0]&&(o.icon=t[50].icon),4&l[0]&&(o.field=t[50]),12&l[0]&&(o.color=t[3][t[50].id]),s.$set(o)},i(t){e||(J(s.$$.fragment,t),e=!0)},o(t){Y(s.$$.fragment,t),e=!1},d(t){X(s,t)}}}function me(t){let e,n,s=t[47][t[50].id],l=[];for(let e=0;e<s.length;e+=1)l[e]=ge(Zt(t,s,e));const o=t=>Y(l[t],1,1,()=>{l[t]=null});return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=$()},m(t,s){for(let e=0;e<l.length;e+=1)l[e].m(t,s);d(t,e,s),n=!0},p(t,n){if(173&n[0]){let i;for(s=t[47][t[50].id],i=0;i<s.length;i+=1){const o=Zt(t,s,i);l[i]?(l[i].p(o,n),J(l[i],1)):(l[i]=ge(o),l[i].c(),J(l[i],1),l[i].m(e.parentNode,e))}for(B(),i=s.length;i<l.length;i+=1)o(i);Q()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)J(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)Y(l[t]);n=!1},d(t){p(l,t),t&&f(e)}}}function he(t){let e,n,s=(t[47][t[50].links].length||t[47][t[50].links]>0)&&$e(t);return{c(){s&&s.c(),e=$()},m(t,l){s&&s.m(t,l),d(t,e,l),n=!0},p(t,n){t[47][t[50].links].length||t[47][t[50].links]>0?s?(s.p(t,n),J(s,1)):((s=$e(t)).c(),J(s,1),s.m(e.parentNode,e)):s&&(B(),Y(s,1,1,()=>{s=null}),Q())},i(t){n||(J(s),n=!0)},o(t){Y(s),n=!1},d(t){s&&s.d(t),t&&f(e)}}}function ge(t){let e;function n(...e){return t[42](t[47],...e)}const s=new Xt({props:{value:t[53],rowid:t[46],inactive:t[5].some(n),help:t[50].help,icon:t[50].icon,field:t[50],color:t[3][t[50].id]}});return s.$on("rowAction",t[43]),{c(){K(s.$$.fragment)},m(t,n){V(s,t,n),e=!0},p(e,l){t=e;const o={};133&l[0]&&(o.value=t[53]),129&l[0]&&(o.rowid=t[46]),161&l[0]&&(o.inactive=t[5].some(n)),4&l[0]&&(o.help=t[50].help),4&l[0]&&(o.icon=t[50].icon),4&l[0]&&(o.field=t[50]),12&l[0]&&(o.color=t[3][t[50].id]),s.$set(o)},i(t){e||(J(s.$$.fragment,t),e=!0)},o(t){Y(s.$$.fragment,t),e=!1},d(t){X(s,t)}}}function $e(t){let e,n,s,l,o;const i=[be,ve],r=[];function c(t,e){return t[50].multi?0:1}return n=c(t),s=r[n]=i[n](t),{c(){e=m("a"),s.c(),b(e,"href",l=`${t[50].linkroute}?ids=${t[47][t[50].links]}`)},m(t,s){d(t,e,s),r[n].m(e,null),o=!0},p(t,a){let u=n;(n=c(t))===u?r[n].p(t,a):(B(),Y(r[u],1,1,()=>{r[u]=null}),Q(),(s=r[n])||(s=r[n]=i[n](t)).c(),J(s,1),s.m(e,null)),(!o||133&a[0]&&l!==(l=`${t[50].linkroute}?ids=${t[47][t[50].links]}`))&&b(e,"href",l)},i(t){o||(J(s),o=!0)},o(t){Y(s),o=!1},d(t){t&&f(e),r[n].d()}}}function ve(t){let e;function n(...e){return t[40](t[47],...e)}const s=new Xt({props:{value:t[47][t[50].id],rowid:t[46],inactive:t[5].some(n),help:t[50].help,icon:t[50].icon,field:t[50],color:t[3][t[50].id]}});return s.$on("rowAction",t[41]),{c(){K(s.$$.fragment)},m(t,n){V(s,t,n),e=!0},p(e,l){t=e;const o={};133&l[0]&&(o.value=t[47][t[50].id]),129&l[0]&&(o.rowid=t[46]),161&l[0]&&(o.inactive=t[5].some(n)),4&l[0]&&(o.help=t[50].help),4&l[0]&&(o.icon=t[50].icon),4&l[0]&&(o.field=t[50]),12&l[0]&&(o.color=t[3][t[50].id]),s.$set(o)},i(t){e||(J(s.$$.fragment,t),e=!0)},o(t){Y(s.$$.fragment,t),e=!1},d(t){X(s,t)}}}function be(t){let e,n,s=t[47][t[50].id],l=[];for(let e=0;e<s.length;e+=1)l[e]=ye(te(t,s,e));const o=t=>Y(l[t],1,1,()=>{l[t]=null});return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=$()},m(t,s){for(let e=0;e<l.length;e+=1)l[e].m(t,s);d(t,e,s),n=!0},p(t,n){if(173&n[0]){let i;for(s=t[47][t[50].id],i=0;i<s.length;i+=1){const o=te(t,s,i);l[i]?(l[i].p(o,n),J(l[i],1)):(l[i]=ye(o),l[i].c(),J(l[i],1),l[i].m(e.parentNode,e))}for(B(),i=s.length;i<l.length;i+=1)o(i);Q()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)J(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)Y(l[t]);n=!1},d(t){p(l,t),t&&f(e)}}}function ye(t){let e;function n(...e){return t[38](t[47],...e)}const s=new Xt({props:{value:t[53],rowid:t[46],inactive:t[5].some(n),help:t[50].help,icon:t[50].icon,field:t[50],color:t[3][t[50].id]}});return s.$on("rowAction",t[39]),{c(){K(s.$$.fragment)},m(t,n){V(s,t,n),e=!0},p(e,l){t=e;const o={};133&l[0]&&(o.value=t[53]),129&l[0]&&(o.rowid=t[46]),161&l[0]&&(o.inactive=t[5].some(n)),4&l[0]&&(o.help=t[50].help),4&l[0]&&(o.icon=t[50].icon),4&l[0]&&(o.field=t[50]),12&l[0]&&(o.color=t[3][t[50].id]),s.$set(o)},i(t){e||(J(s.$$.fragment,t),e=!0)},o(t){Y(s.$$.fragment,t),e=!1},d(t){X(s,t)}}}function we(t){let e,n,s,l;const o=[he,me,pe],i=[];function r(t,e){return t[50].links?0:t[50].multi?1:2}return n=r(t),s=i[n]=o[n](t),{c(){e=m("td"),s.c()},m(t,s){d(t,e,s),i[n].m(e,null),l=!0},p(t,l){let c=n;(n=r(t))===c?i[n].p(t,l):(B(),Y(i[c],1,1,()=>{i[c]=null}),Q(),(s=i[n])||(s=i[n]=o[n](t)).c(),J(s,1),s.m(e,null))},i(t){l||(J(s),l=!0)},o(t){Y(s),l=!1},d(t){t&&f(e),i[n].d()}}}function xe(t){let e,n,l,o,i,r,c,a,h,$,y,w,x,_=t[9]===t[46]&&ae(t);function k(...e){return t[34](t[46],...e)}function j(...e){return t[35](t[46],...e)}let C=t[4],O=[];for(let e=0;e<C.length;e+=1)O[e]=fe(ne(t,C,e));let T=t[2],I=[];for(let e=0;e<T.length;e+=1)I[e]=we(ee(t,T,e));const N=t=>Y(I[t],1,1,()=>{I[t]=null});return{c(){e=m("tr"),n=m("td"),l=m("input"),i=g(),r=m("a"),(c=m("span")).innerHTML='<i class="fa fa-eye"></i>',a=g(),_&&_.c(),h=g();for(let t=0;t<O.length;t+=1)O[t].c();$=g();for(let t=0;t<I.length;t+=1)I[t].c();y=g(),b(l,"type","checkbox"),l.__value=o=t[47].id,l.value=l.__value,t[33][0].push(l),b(c,"class","has-text-info icon is-small")},m(o,f,p){d(o,e,f),u(e,n),u(n,l),l.checked=~t[1].indexOf(l.__value),u(n,i),u(n,r),u(r,c),u(r,a),_&&_.m(r,null),u(n,h);for(let t=0;t<O.length;t+=1)O[t].m(n,null);u(e,$);for(let t=0;t<I.length;t+=1)I[t].m(e,null);u(e,y),w=!0,p&&s(x),x=[v(l,"change",t[32]),v(r,"click",k),v(r,"mouseenter",j),v(r,"mouseleave",t[36])]},p(s,i){if(t=s,(!w||129&i[0]&&o!==(o=t[47].id))&&(l.__value=o),l.value=l.__value,2&i[0]&&(l.checked=~t[1].indexOf(l.__value)),t[9]===t[46]?_?_.p(t,i):((_=ae(t)).c(),_.m(r,null)):_&&(_.d(1),_=null),145&i[0]){let e;for(C=t[4],e=0;e<C.length;e+=1){const s=ne(t,C,e);O[e]?O[e].p(s,i):(O[e]=fe(s),O[e].c(),O[e].m(n,null))}for(;e<O.length;e+=1)O[e].d(1);O.length=C.length}if(173&i[0]){let n;for(T=t[2],n=0;n<T.length;n+=1){const s=ee(t,T,n);I[n]?(I[n].p(s,i),J(I[n],1)):(I[n]=we(s),I[n].c(),J(I[n],1),I[n].m(e,y))}for(B(),n=T.length;n<I.length;n+=1)N(n);Q()}},i(t){if(!w){for(let t=0;t<T.length;t+=1)J(I[t]);w=!0}},o(t){I=I.filter(Boolean);for(let t=0;t<I.length;t+=1)Y(I[t]);w=!1},d(n){n&&f(e),t[33][0].splice(t[33][0].indexOf(l),1),_&&_.d(),p(O,n),p(I,n),s(x)}}}function _e(t){let e,n,l,o,i,r,c,a,$,x,_,k,j,C,O,T,I,N,A,S=t[6].toLowerCase()+"",W=t[2],E=[];for(let e=0;e<W.length;e+=1)E[e]=re(le(t,W,e));let L=t[13]&&ce(),M=t[7].map(t[31]),z=[];for(let e=0;e<M.length;e+=1)z[e]=xe(se(t,M,e));const P=t=>Y(z[t],1,1,()=>{z[t]=null});return{c(){e=m("div"),n=m("input"),l=h("Search deleted "),o=h(S),i=g(),r=m("input"),a=g(),$=m("table"),x=m("thead"),_=m("tr"),k=m("th"),j=m("input"),C=g();for(let t=0;t<E.length;t+=1)E[t].c();O=g(),L&&L.c(),T=g(),I=m("tbody");for(let t=0;t<z.length;t+=1)z[t].c();b(n,"type","checkbox"),b(r,"class","input is-small"),b(r,"type","text"),b(r,"placeholder",c=`Type a query and press enter to search ${t[6].toLowerCase()}`),b(j,"type","checkbox"),b($,"class","table"),b(e,"class","content is-small")},m(c,f,p){d(c,e,f),u(e,n),n.checked=t[12],u(e,l),u(e,o),u(e,i),u(e,r),w(r,t[8]),u(e,a),u(e,$),u($,x),u(x,_),u(_,k),u(k,j),u(_,C);for(let t=0;t<E.length;t+=1)E[t].m(_,null);u($,O),L&&L.m($,null),u($,T),u($,I);for(let t=0;t<z.length;t+=1)z[t].m(I,null);N=!0,p&&s(A),A=[v(n,"change",t[29]),v(r,"keyup",t[15]),v(r,"input",t[30]),v(j,"click",t[14])]},p(t,e){if(4096&e[0]&&(n.checked=t[12]),(!N||64&e[0])&&S!==(S=t[6].toLowerCase()+"")&&y(o,S),(!N||64&e[0]&&c!==(c=`Type a query and press enter to search ${t[6].toLowerCase()}`))&&b(r,"placeholder",c),256&e[0]&&r.value!==t[8]&&w(r,t[8]),4&e[0]){let n;for(W=t[2],n=0;n<W.length;n+=1){const s=le(t,W,n);E[n]?E[n].p(s,e):(E[n]=re(s),E[n].c(),E[n].m(_,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=W.length}if(t[13]?L||((L=ce()).c(),L.m($,T)):L&&(L.d(1),L=null),200383&e[0]){let n;for(M=t[7].map(t[31]),n=0;n<M.length;n+=1){const s=se(t,M,n);z[n]?(z[n].p(s,e),J(z[n],1)):(z[n]=xe(s),z[n].c(),J(z[n],1),z[n].m(I,null))}for(B(),n=M.length;n<z.length;n+=1)P(n);Q()}},i(t){if(!N){for(let t=0;t<M.length;t+=1)J(z[t]);N=!0}},o(t){z=z.filter(Boolean);for(let t=0;t<z.length;t+=1)Y(z[t]);N=!1},d(t){t&&f(e),p(E,t),L&&L.d(),p(z,t),s(A)}}}function ke(t,e,n){let s;r(t,dt,t=>n(24,s=t));let{items:l={}}=e,{fields:o}=e,{statecolors:i}=e,{fixedbuttons:c=[]}=e,{selected:a}=e,{getdetails:u}=e,{inactive:d=[]}=e,{fetchUrl:f}=e,{findUrl:p}=e,{notif:m}=e,{tab:h}=e,{treatItems:g=async function(t,e,s,o,i){for(let r of i){const i=await gt(t,{item_id:r});if(i.ok){const t=`${e} with id ${r} queued for ${s}`;n(18,m.messages[t]=1,m),setTimeout(function(t){n(18,m.messages[t]=0,m)},Lt,t),o&&o(l[r]),n(0,l)}else{const t=`Something went wrong ${s} ${e} with id ${r}: ${i.error}`;n(18,m.errors[t]=1,m),setTimeout(function(t){n(18,m.errors[t]=0,m)},Lt,t)}}}}=e;const $=I();let v,b=[],y="",w=!1,x=!1,_="",k=!1,j=!1;function C(t){W(t.length?f+`?ids=${t.join(",")}`:f)}function O(t){W(`${p}?q=${t}&deleted=${k}`)}async function A(t){n(9,w=t),n(10,x=!1),n(11,_=await u(t)),n(10,x=!0)}function S(t){$("detailview",{ids:[t]})}async function W(t){n(13,j=!0);const e=v=new Object,s=await ht(t);if(n(13,j=!1),"error"in s){const t=`While fetching ${h.toLowerCase()}: ${s.error}`;n(18,m.errors[t]=1,m),setTimeout(function(t){n(18,m.errors[t]=0,m)},Lt,t)}else{if(e!==v)return;n(7,b=[]),n(0,l={}),n(0,l=s.items),n(7,b=s.order)}}T(async()=>{let t;try{t=Object.fromEntries(s.split("&").map(t=>t.split("=")))}catch{return void C([])}"ids"in t?C(t.ids.split(",")):"q"in t?(n(12,k="deleted"in t&&["true",1,"True"].indexOf(t.deleted)>-1),n(8,y=t.q.split(",").join(" ")),O(t.q)):C([])});const E=[[]];return t.$set=(t=>{"items"in t&&n(0,l=t.items),"fields"in t&&n(2,o=t.fields),"statecolors"in t&&n(3,i=t.statecolors),"fixedbuttons"in t&&n(4,c=t.fixedbuttons),"selected"in t&&n(1,a=t.selected),"getdetails"in t&&n(19,u=t.getdetails),"inactive"in t&&n(5,d=t.inactive),"fetchUrl"in t&&n(20,f=t.fetchUrl),"findUrl"in t&&n(21,p=t.findUrl),"notif"in t&&n(18,m=t.notif),"tab"in t&&n(6,h=t.tab),"treatItems"in t&&n(22,g=t.treatItems)}),[l,a,o,i,c,d,h,b,y,w,x,_,k,j,function(){a.length<b.length?n(1,a=b):n(1,a=[])},function(t){if(13===t.keyCode){const t=y.split(" ").join(",");!function(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");setTimeout(()=>{window.location.hash=("#"==t.charAt(0)?"":"#")+t},0)}(`#/${h.toLowerCase()}?q=${t}&deleted=${k}`),O(t)}},A,S,m,u,f,p,g,v,s,$,C,O,W,function(){k=this.checked,n(12,k)},function(){y=this.value,n(8,y)},t=>[t,l[t]],function(){a=function(t){const e=[];for(let n=0;n<t.length;n+=1)t[n].checked&&e.push(t[n].__value);return e}(E[0]),n(1,a)},E,(t,e)=>S(t),(t,e)=>A(t),t=>n(9,w=!1),(t,e,n)=>t.action(e.id),(t,e)=>t[e],function(e){N(t,e)},(t,e)=>t[e],function(e){N(t,e)},(t,e)=>t[e],function(e){N(t,e)},(t,e)=>t[e],function(e){N(t,e)}]}class je extends et{constructor(t){super(),tt(this,t,ke,_e,o,{items:0,fields:2,statecolors:3,fixedbuttons:4,selected:1,getdetails:19,inactive:5,fetchUrl:20,findUrl:21,notif:18,tab:6,treatItems:22},[-1,-1,-1])}}function Ce(t,e,n){const s=t.slice();return s[3]=e[n],s}function Oe(t,e,n){const s=t.slice();return s[6]=e[n],s}function Te(t,e,n){const s=t.slice();return s[9]=e[n],s}function Ie(t){let e,n=Object.entries(t[1].errors).filter(ze).map(Pe),s=[];for(let e=0;e<n.length;e+=1)s[e]=Ne(Te(t,n,e));return{c(){e=m("div");for(let t=0;t<s.length;t+=1)s[t].c();b(e,"class","notification is-danger is-light errormsg svelte-e70ios")},m(t,n){d(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,l){if(2&l){let o;for(n=Object.entries(t[1].errors).filter(ze).map(Pe),o=0;o<n.length;o+=1){const i=Te(t,n,o);s[o]?s[o].p(i,l):(s[o]=Ne(i),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){t&&f(e),p(s,t)}}}function Ne(t){let e,n,s=t[9]+"";return{c(){e=m("div"),n=h(s)},m(t,s){d(t,e,s),u(e,n)},p(t,e){2&e&&s!==(s=t[9]+"")&&y(n,s)},d(t){t&&f(e)}}}function Ae(t){let e,n=Object.entries(t[1].messages).filter(Re).map(Ue),s=[];for(let e=0;e<n.length;e+=1)s[e]=Se(Oe(t,n,e));return{c(){e=m("div");for(let t=0;t<s.length;t+=1)s[t].c();b(e,"class","notification is-success is-light errormsg svelte-e70ios")},m(t,n){d(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,l){if(2&l){let o;for(n=Object.entries(t[1].messages).filter(Re).map(Ue),o=0;o<n.length;o+=1){const i=Oe(t,n,o);s[o]?s[o].p(i,l):(s[o]=Se(i),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){t&&f(e),p(s,t)}}}function Se(t){let e,n,s=t[6]+"";return{c(){e=m("div"),n=h(s)},m(t,s){d(t,e,s),u(e,n)},p(t,e){2&e&&s!==(s=t[6]+"")&&y(n,s)},d(t){t&&f(e)}}}function We(t){let e,n,s,l,o,i,r,c=t[3]+"";return{c(){e=m("li"),n=m("a"),s=m("span"),l=h(c),i=g(),b(n,"href",o=`#/${t[3].toLowerCase()}`),b(e,"class",r=t[0]===t[3]?"is-active":"")},m(t,o){d(t,e,o),u(e,n),u(n,s),u(s,l),u(e,i)},p(t,n){1&n&&r!==(r=t[0]===t[3]?"is-active":"")&&b(e,"class",r)},d(t){t&&f(e)}}}function Ee(e){let n,s,l,o,i,r=Object.values(e[1].errors).some(Me),c=Object.values(e[1].messages).some(Le),a=r&&Ie(e),h=c&&Ae(e),$=e[2],v=[];for(let t=0;t<$.length;t+=1)v[t]=We(Ce(e,$,t));return{c(){a&&a.c(),n=g(),h&&h.c(),s=g(),l=m("div"),o=m("div"),i=m("ul");for(let t=0;t<v.length;t+=1)v[t].c();b(o,"class","tabs is-toggle is-centered is-small"),b(l,"class","content")},m(t,e){a&&a.m(t,e),d(t,n,e),h&&h.m(t,e),d(t,s,e),d(t,l,e),u(l,o),u(o,i);for(let t=0;t<v.length;t+=1)v[t].m(i,null)},p(t,[e]){if(2&e&&(r=Object.values(t[1].errors).some(Me)),r?a?a.p(t,e):((a=Ie(t)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),2&e&&(c=Object.values(t[1].messages).some(Le)),c?h?h.p(t,e):((h=Ae(t)).c(),h.m(s.parentNode,s)):h&&(h.d(1),h=null),5&e){let n;for($=t[2],n=0;n<$.length;n+=1){const s=Ce(t,$,n);v[n]?v[n].p(s,e):(v[n]=We(s),v[n].c(),v[n].m(i,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=$.length}},i:t,o:t,d(t){a&&a.d(t),t&&f(n),h&&h.d(t),t&&f(s),t&&f(l),p(v,t)}}}const Le=t=>1===t,Me=t=>1===t,ze=t=>1==t[1],Pe=t=>t[0],Re=t=>1==t[1],Ue=t=>t[0];function qe(t,e,n){let{tabshow:s}=e,{notif:l}=e;return t.$set=(t=>{"tabshow"in t&&n(0,s=t.tabshow),"notif"in t&&n(1,l=t.notif)}),[s,l,["Datasets","Projects","Analyses","Files","Jobs"]]}class De extends et{constructor(t){super(),tt(this,t,qe,Ee,o,{tabshow:0,notif:1})}}function Fe(t,e,n){const s=t.slice();return s[5]=e[n],s}function He(t,e,n){const s=t.slice();return s[8]=e[n],s}function Be(t){let e,n=Object.entries(t[0].errors).filter(Xe).map(Ze),s=[];for(let e=0;e<n.length;e+=1)s[e]=Qe(He(t,n,e));return{c(){e=m("div");for(let t=0;t<s.length;t+=1)s[t].c();b(e,"class","notification is-danger is-light errormsg svelte-1jth1a0")},m(t,n){d(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,l){if(1&l){let o;for(n=Object.entries(t[0].errors).filter(Xe).map(Ze),o=0;o<n.length;o+=1){const i=He(t,n,o);s[o]?s[o].p(i,l):(s[o]=Qe(i),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){t&&f(e),p(s,t)}}}function Qe(t){let e,n,s=t[8]+"";return{c(){e=m("div"),n=h(s)},m(t,s){d(t,e,s),u(e,n)},p(t,e){1&e&&s!==(s=t[8]+"")&&y(n,s)},d(t){t&&f(e)}}}function Je(t){let e,n=Object.entries(t[0].messages).filter(tn).map(en),s=[];for(let e=0;e<n.length;e+=1)s[e]=Ye(Fe(t,n,e));return{c(){e=m("div");for(let t=0;t<s.length;t+=1)s[t].c();b(e,"class","notification is-success is-light errormsg svelte-1jth1a0")},m(t,n){d(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,l){if(1&l){let o;for(n=Object.entries(t[0].messages).filter(tn).map(en),o=0;o<n.length;o+=1){const i=Fe(t,n,o);s[o]?s[o].p(i,l):(s[o]=Ye(i),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){t&&f(e),p(s,t)}}}function Ye(t){let e,n,s=t[5]+"";return{c(){e=m("div"),n=h(s)},m(t,s){d(t,e,s),u(e,n)},p(t,e){1&e&&s!==(s=t[5]+"")&&y(n,s)},d(t){t&&f(e)}}}function Ge(t){let e,n,o,i,r,a,p,h,$=Object.values(t[0].errors).some(Ve),y=Object.values(t[0].messages).some(Ke),w=$&&Be(t),x=y&&Je(t);const _=t[4].default,k=function(t,e,n,s){if(t){const l=c(t,e,n,s);return t[0](l)}}(_,t,t[3],null);return{c(){e=m("div"),n=m("div"),w&&w.c(),o=g(),x&&x.c(),i=g(),k&&k.c(),r=g(),(a=m("button")).innerHTML='<span class="icon"><i class="fa fa-times"></i></span>',b(a,"class","button closebutton svelte-1jth1a0"),b(a,"aria-label","close"),b(n,"class","box modalbox svelte-1jth1a0"),b(e,"class","detailbox svelte-1jth1a0")},m(c,f,m){d(c,e,f),u(e,n),w&&w.m(n,null),u(n,o),x&&x.m(n,null),u(n,i),k&&k.m(n,null),u(n,r),u(n,a),p=!0,m&&s(h),h=[v(window,"keyup",t[2]),v(a,"click",function(){l(t[1]())&&t[1]().apply(this,arguments)})]},p(e,[s]){t=e,1&s&&($=Object.values(t[0].errors).some(Ve)),$?w?w.p(t,s):((w=Be(t)).c(),w.m(n,o)):w&&(w.d(1),w=null),1&s&&(y=Object.values(t[0].messages).some(Ke)),y?x?x.p(t,s):((x=Je(t)).c(),x.m(n,i)):x&&(x.d(1),x=null),k&&k.p&&8&s&&k.p(c(_,t,t[3],null),function(t,e,n,s){if(t[2]&&s){const l=t[2](s(n));if(void 0===e.dirty)return l;if("object"==typeof l){const t=[],n=Math.max(e.dirty.length,l.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|l[s];return t}return e.dirty|l}return e.dirty}(_,t[3],s,null))},i(t){p||(J(k,t),p=!0)},o(t){Y(k,t),p=!1},d(t){t&&f(e),w&&w.d(),x&&x.d(),k&&k.d(t),s(h)}}}const Ke=t=>1===t,Ve=t=>1===t,Xe=t=>1==t[1],Ze=t=>t[0],tn=t=>1==t[1],en=t=>t[0];function nn(t,e,n){let{notif:s}=e,{closeWindow:l}=e;let{$$slots:o={},$$scope:i}=e;return t.$set=(t=>{"notif"in t&&n(0,s=t.notif),"closeWindow"in t&&n(1,l=t.closeWindow),"$$scope"in t&&n(3,i=t.$$scope)}),[s,l,function(t){27===t.keyCode&&l()},i,o]}class sn extends et{constructor(t){super(),tt(this,t,nn,Ge,o,{notif:0,closeWindow:1})}}function ln(t,e,n){const s=t.slice();return s[26]=e[n],s}function on(t,e,n){const s=t.slice();return s[32]=e[n].id,s[33]=e[n].name,s}function rn(t,e,n){const s=t.slice();return s[29]=e[n],s}function cn(t,e,n){const s=t.slice();return s[36]=e[n],s}function an(t,e,n){const s=t.slice();return s[39]=e[n],s}function un(t,e,n){const s=t.slice();return s[42]=e[n][0],s[43]=e[n][1],s}function dn(t,e,n){const s=t.slice();return s[46]=e[n],s}function fn(t,e,n){const s=t.slice();return s[22]=e[n][0],s[23]=e[n][1],s}function pn(t){let e,n,s,l,o=t[46][1]+"",i=t[46][0]+"";return{c(){e=m("div"),n=h(o),s=h(" stored files of type "),l=h(i)},m(t,o){d(t,e,o),u(e,n),u(e,s),u(e,l)},p(t,e){4&e[0]&&o!==(o=t[46][1]+"")&&y(n,o),4&e[0]&&i!==(i=t[46][0]+"")&&y(l,i)},d(t){t&&f(e)}}}function mn(t){let e,n,s,l,o,i,r,c,a=t[43]+"";function p(...e){return t[13](t[22],t[42],...e)}return{c(){e=m("div"),n=m("div"),s=m("span"),l=h(a),o=g(),i=m("a"),r=g(),b(s,"class","tag is-light"),b(i,"class","tag is-info is-delete"),b(n,"class","tags has-addons"),b(e,"class","control")},m(t,a,f){d(t,e,a),u(e,n),u(n,s),u(s,l),u(n,o),u(n,i),u(e,r),f&&c(),c=v(i,"click",p)},p(e,n){t=e,4&n[0]&&a!==(a=t[43]+"")&&y(l,a)},d(t){t&&f(e),c()}}}function hn(t){let e,n,s,l=t[23].allowners[t[39]]+"";return{c(){e=m("option"),n=h(l),e.__value=s=t[39],e.value=e.__value},m(t,s){d(t,e,s),u(e,n)},p(t,o){4&o[0]&&l!==(l=t[23].allowners[t[39]]+"")&&y(n,l),4&o[0]&&s!==(s=t[39])&&(e.__value=s),e.value=e.__value},d(t){t&&f(e)}}}function gn(t){let e,n,s,l,o=t[23].qtype.name+"";return{c(){e=m("div"),(n=m("span")).textContent="Quant type",s=g(),l=h(o),b(n,"class","has-text-weight-bold")},m(t,o){d(t,e,o),u(e,n),u(e,s),u(e,l)},p(t,e){4&e[0]&&o!==(o=t[23].qtype.name+"")&&y(l,o)},d(t){t&&f(e)}}}function $n(t){let e,n,s,l,o,i=t[36]+"";return{c(){e=m("div"),n=m("div"),s=m("span"),l=h(i),o=g(),b(s,"class","tag is-light"),b(n,"class","tags"),b(e,"class","control")},m(t,i){d(t,e,i),u(e,n),u(n,s),u(s,l),u(e,o)},p(t,e){4&e[0]&&i!==(i=t[36]+"")&&y(l,i)},d(t){t&&f(e)}}}function vn(t){let e,n,s,l,o,i,r,c,a=Object.keys(t[23].pwiz_versions).length,h=t[23].pwiz_sets,$=[];for(let e=0;e<h.length;e+=1)$[e]=jn(rn(t,h,e));let v=a&&Cn(t);return{c(){e=m("div"),(n=m("label")).textContent="Conversion mzML results / pipeline version(s)",s=g(),l=m("table"),o=m("tbody");for(let t=0;t<$.length;t+=1)$[t].c();i=g(),r=m("div"),v&&v.c(),c=g(),b(n,"class","label"),b(l,"class","table"),b(e,"class","field"),b(r,"class","field")},m(t,a){d(t,e,a),u(e,n),u(e,s),u(e,l),u(l,o);for(let t=0;t<$.length;t+=1)$[t].m(o,null);d(t,i,a),d(t,r,a),v&&v.m(r,null),u(r,c)},p(t,e){if(484&e[0]){let n;for(h=t[23].pwiz_sets,n=0;n<h.length;n+=1){const s=rn(t,h,n);$[n]?$[n].p(s,e):($[n]=jn(s),$[n].c(),$[n].m(o,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=h.length}4&e[0]&&(a=Object.keys(t[23].pwiz_versions).length),a?v?v.p(t,e):((v=Cn(t)).c(),v.m(r,c)):v&&(v.d(1),v=null)},d(t){t&&f(e),p($,t),t&&f(i),t&&f(r),v&&v.d()}}}function bn(t){let e,n,l,o,i,r,c=t[23].refine_versions,a=[];for(let e=0;e<c.length;e+=1)a[e]=xn(on(t,c,e));function h(){t[18].call(n,t[23])}function $(...e){return t[19](t[22],t[23],...e)}return{c(){e=m("div"),n=m("select"),(l=m("option")).textContent="Pick a refine version";for(let t=0;t<a.length;t+=1)a[t].c();o=g(),(i=m("button")).textContent="Refine mzML",l.__value="",l.value=l.__value,void 0===t[5][t[23].id]&&z(h),b(e,"class","select is-small"),b(i,"class","button is-small")},m(c,f,p){d(c,e,f),u(e,n),u(n,l);for(let t=0;t<a.length;t+=1)a[t].m(n,null);x(n,t[5][t[23].id]),d(c,o,f),d(c,i,f),p&&s(r),r=[v(n,"change",h),v(i,"click",$)]},p(e,s){if(t=e,4&s[0]){let e;for(c=t[23].refine_versions,e=0;e<c.length;e+=1){const l=on(t,c,e);a[e]?a[e].p(l,s):(a[e]=xn(l),a[e].c(),a[e].m(n,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=c.length}36&s[0]&&x(n,t[5][t[23].id])},d(t){t&&f(e),p(a,t),t&&f(o),t&&f(i),s(r)}}}function yn(t){let e,n;function s(...e){return t[17](t[22],t[29],...e)}return{c(){(e=m("button")).textContent="Re-convert",b(e,"class","button is-small")},m(t,l,o){d(t,e,l),o&&n(),n=v(e,"click",s)},p(e,n){t=e},d(t){t&&f(e),n()}}}function wn(t){let e,n;function s(...e){return t[16](t[22],t[29],...e)}return{c(){(e=m("button")).textContent="Re-refine",b(e,"class","button is-small")},m(t,l,o){d(t,e,l),o&&n(),n=v(e,"click",s)},p(e,n){t=e},d(t){t&&f(e),n()}}}function xn(t){let e,n,s,l,o=t[33]+"";return{c(){e=m("option"),n=h("Refine "),s=h(o),e.__value=l=t[32],e.value=e.__value},m(t,l){d(t,e,l),u(e,n),u(e,s)},p(t,n){4&n[0]&&o!==(o=t[33]+"")&&y(s,o),4&n[0]&&l!==(l=t[32])&&(e.__value=l),e.value=e.__value},d(t){t&&f(e)}}}function _n(t){let e,n,s,l,o=t[29].existing+"";return{c(){e=m("span"),n=h(", "),s=h(o),l=h(" files")},m(t,o){d(t,e,o),u(e,n),u(e,s),u(e,l)},p(t,e){4&e[0]&&o!==(o=t[29].existing+"")&&y(s,o)},d(t){t&&f(e)}}}function kn(t){let e;return{c(){(e=m("span")).textContent="Refined",b(e,"class","tag is-light is-warning")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function jn(t){let e,n,s,l,o,i,r,c,a,p,$,v,w,x,_,k,j,C,O,T=t[29].state+"",I=t[29].version+"",N=t[29].created+"";function A(t,e){return"Incomplete"===t[29].state&&t[29].refined?wn:"Incomplete"===t[29].state||"No mzmls"===t[29].state?yn:t[29].refineready?bn:void 0}let S=A(t),W=S&&S(t),E="Incomplete"===t[29].state&&_n(t),L=t[29].refined&&kn();return{c(){e=m("tr"),n=m("td"),W&&W.c(),s=g(),l=m("td"),o=m("span"),i=h(T),c=g(),a=m("td"),p=m("span"),$=h(I),v=g(),w=m("span"),x=h(", created "),_=h(N),k=g(),E&&E.c(),j=g(),C=m("td"),L&&L.c(),O=g(),b(o,"class",r=`tag ${t[6][t[29].state]}`),b(p,"class","has-text-weight-bold")},m(t,r){d(t,e,r),u(e,n),W&&W.m(n,null),u(e,s),u(e,l),u(l,o),u(o,i),u(e,c),u(e,a),u(a,p),u(p,$),u(a,v),u(a,w),u(w,x),u(w,_),u(a,k),E&&E.m(a,null),u(e,j),u(e,C),L&&L.m(C,null),u(e,O)},p(t,e){S===(S=A(t))&&W?W.p(t,e):(W&&W.d(1),(W=S&&S(t))&&(W.c(),W.m(n,null))),4&e[0]&&T!==(T=t[29].state+"")&&y(i,T),4&e[0]&&r!==(r=`tag ${t[6][t[29].state]}`)&&b(o,"class",r),4&e[0]&&I!==(I=t[29].version+"")&&y($,I),4&e[0]&&N!==(N=t[29].created+"")&&y(_,N),"Incomplete"===t[29].state?E?E.p(t,e):((E=_n(t)).c(),E.m(a,null)):E&&(E.d(1),E=null),t[29].refined?L||((L=kn()).c(),L.m(C,null)):L&&(L.d(1),L=null)},d(t){t&&f(e),W&&W.d(),E&&E.d(),L&&L.d()}}}function Cn(t){let e,n,s,l,o,i,r,c,a=Object.entries(t[23].pwiz_versions),h=[];for(let e=0;e<a.length;e+=1)h[e]=On(ln(t,a,e));function y(){t[20].call(l,t[23])}function w(t,e){return t[4][t[23].id]?In:Tn}let _=w(t),k=_(t);return{c(){(e=m("div")).textContent="Or replace with mzMLs of another version",n=g(),s=m("div"),l=m("select"),(o=m("option")).textContent="Pick a proteowizard version";for(let t=0;t<h.length;t+=1)h[t].c();i=g(),k.c(),r=$(),o.__value="",o.value=o.__value,void 0===t[4][t[23].id]&&z(y),b(s,"class","select")},m(a,f,p){d(a,e,f),d(a,n,f),d(a,s,f),u(s,l),u(l,o);for(let t=0;t<h.length;t+=1)h[t].m(l,null);x(l,t[4][t[23].id]),d(a,i,f),k.m(a,f),d(a,r,f),p&&c(),c=v(l,"change",y)},p(e,n){if(t=e,4&n[0]){let e;for(a=Object.entries(t[23].pwiz_versions),e=0;e<a.length;e+=1){const s=ln(t,a,e);h[e]?h[e].p(s,n):(h[e]=On(s),h[e].c(),h[e].m(l,null))}for(;e<h.length;e+=1)h[e].d(1);h.length=a.length}20&n[0]&&x(l,t[4][t[23].id]),_===(_=w(t))&&k?k.p(t,n):(k.d(1),(k=_(t))&&(k.c(),k.m(r.parentNode,r)))},d(t){t&&f(e),t&&f(n),t&&f(s),p(h,t),t&&f(i),k.d(t),t&&f(r),c()}}}function On(t){let e,n,s,l=t[26][1]+"";return{c(){e=m("option"),n=h(l),e.__value=s=t[26][0],e.value=e.__value},m(t,s){d(t,e,s),u(e,n)},p(t,o){4&o[0]&&l!==(l=t[26][1]+"")&&y(n,l),4&o[0]&&s!==(s=t[26][0])&&(e.__value=s),e.value=e.__value},d(t){t&&f(e)}}}function Tn(e){let n;return{c(){(n=m("button")).textContent="Convert!",n.disabled=!0,b(n,"class","button")},m(t,e){d(t,n,e)},p:t,d(t){t&&f(n)}}}function In(t){let e,n;function s(...e){return t[21](t[22],t[23],...e)}return{c(){(e=m("button")).textContent="Convert!",b(e,"class","button")},m(t,l,o){d(t,e,l),o&&n(),n=v(e,"click",s)},p(e,n){t=e},d(t){t&&f(e),n()}}}function Nn(t){let e,n,l,o,i,r,c,a,w,_,k,j,C,O,T,I,N,A,S,W,E,L,M,P,R,U,q,D,F,H,B,Q=t[23].storage_loc+"",J=Object.entries(t[23].nrstoredfiles),Y=[];for(let e=0;e<J.length;e+=1)Y[e]=pn(dn(t,J,e));let G=Object.entries(t[23].owners),K=[];for(let e=0;e<G.length;e+=1)K[e]=mn(un(t,G,e));let V=Wn(t[23].allowners,t[23].owners),X=[];for(let e=0;e<V.length;e+=1)X[e]=hn(an(t,V,e));function Z(){t[14].call(W,t[22])}function tt(...e){return t[15](t[22],...e)}let et=t[23].qtype&&gn(t),nt=t[23].instruments,st=[];for(let e=0;e<nt.length;e+=1)st[e]=$n(cn(t,nt,e));let lt="pwiz_versions"in t[23]&&vn(t);return{c(){e=m("p"),(n=m("span")).textContent="Storage location:",l=g(),o=h(Q),i=g(),r=m("hr"),c=g(),a=m("div"),w=m("div"),_=m("div");for(let t=0;t<Y.length;t+=1)Y[t].c();k=g(),j=m("div"),(C=m("div")).textContent="Owners",O=g(),T=m("div");for(let t=0;t<K.length;t+=1)K[t].c();I=g(),N=m("div"),A=m("div"),S=m("div"),W=m("select"),(E=m("option")).textContent="Add an owner";for(let t=0;t<X.length;t+=1)X[t].c();M=g(),P=m("div"),et&&et.c(),R=g(),(U=m("div")).textContent="Instrument(s)",q=g(),D=m("div");for(let t=0;t<st.length;t+=1)st[t].c();F=g(),lt&&lt.c(),H=$(),b(n,"class","has-text-weight-bold"),b(_,"class","field"),b(w,"class","column"),b(C,"class","has-text-weight-bold"),b(T,"class","field is-grouped is-grouped-multiline"),E.disabled=!0,E.__value=L=!1,E.value=E.__value,void 0===t[3][t[22]]&&z(Z),b(S,"class","select"),b(A,"class","control"),b(N,"class","field"),b(j,"class","column"),b(U,"class","has-text-weight-bold"),b(D,"class","field is-grouped is-grouped-multiline"),b(P,"class","column"),b(a,"class","columns")},m(f,p,m){d(f,e,p),u(e,n),u(e,l),u(e,o),d(f,i,p),d(f,r,p),d(f,c,p),d(f,a,p),u(a,w),u(w,_);for(let t=0;t<Y.length;t+=1)Y[t].m(_,null);u(a,k),u(a,j),u(j,C),u(j,O),u(j,T);for(let t=0;t<K.length;t+=1)K[t].m(T,null);u(j,I),u(j,N),u(N,A),u(A,S),u(S,W),u(W,E);for(let t=0;t<X.length;t+=1)X[t].m(W,null);x(W,t[3][t[22]]),u(a,M),u(a,P),et&&et.m(P,null),u(P,R),u(P,U),u(P,q),u(P,D);for(let t=0;t<st.length;t+=1)st[t].m(D,null);d(f,F,p),lt&&lt.m(f,p),d(f,H,p),m&&s(B),B=[v(W,"change",Z),v(W,"change",tt)]},p(e,n){if(t=e,4&n[0]&&Q!==(Q=t[23].storage_loc+"")&&y(o,Q),4&n[0]){let e;for(J=Object.entries(t[23].nrstoredfiles),e=0;e<J.length;e+=1){const s=dn(t,J,e);Y[e]?Y[e].p(s,n):(Y[e]=pn(s),Y[e].c(),Y[e].m(_,null))}for(;e<Y.length;e+=1)Y[e].d(1);Y.length=J.length}if(516&n[0]){let e;for(G=Object.entries(t[23].owners),e=0;e<G.length;e+=1){const s=un(t,G,e);K[e]?K[e].p(s,n):(K[e]=mn(s),K[e].c(),K[e].m(T,null))}for(;e<K.length;e+=1)K[e].d(1);K.length=G.length}if(4&n[0]){let e;for(V=Wn(t[23].allowners,t[23].owners),e=0;e<V.length;e+=1){const s=an(t,V,e);X[e]?X[e].p(s,n):(X[e]=hn(s),X[e].c(),X[e].m(W,null))}for(;e<X.length;e+=1)X[e].d(1);X.length=V.length}if(12&n[0]&&x(W,t[3][t[22]]),t[23].qtype?et?et.p(t,n):((et=gn(t)).c(),et.m(P,R)):et&&(et.d(1),et=null),4&n[0]){let e;for(nt=t[23].instruments,e=0;e<nt.length;e+=1){const s=cn(t,nt,e);st[e]?st[e].p(s,n):(st[e]=$n(s),st[e].c(),st[e].m(D,null))}for(;e<st.length;e+=1)st[e].d(1);st.length=nt.length}"pwiz_versions"in t[23]?lt?lt.p(t,n):((lt=vn(t)).c(),lt.m(H.parentNode,H)):lt&&(lt.d(1),lt=null)},d(t){t&&f(e),t&&f(i),t&&f(r),t&&f(c),t&&f(a),p(Y,t),p(K,t),p(X,t),et&&et.d(),p(st,t),t&&f(F),lt&&lt.d(t),t&&f(H),s(B)}}}function An(t){let e,n=Object.entries(t[2]),s=[];for(let e=0;e<n.length;e+=1)s[e]=Nn(fn(t,n,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=$()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);d(t,e,n)},p(t,l){if(1020&l[0]){let o;for(n=Object.entries(t[2]),o=0;o<n.length;o+=1){const i=fn(t,n,o);s[o]?s[o].p(i,l):(s[o]=Nn(i),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){p(s,t),t&&f(e)}}}function Sn(t){let e;const n=new sn({props:{notif:t[1],closeWindow:t[0],$$slots:{default:[An]},$$scope:{ctx:t}}});return{c(){K(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,e){const s={};2&e[0]&&(s.notif=t[1]),1&e[0]&&(s.closeWindow=t[0]),60&e[0]|262144&e[1]&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(J(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function Wn(t,e){const n=Object.keys(t).concat(Object.keys(e)).reduce(function(t,e){return t.delete(e)||t.add(e),t},new Set);return Array.from(n)}function En(t,e,n){let{closeWindow:s}=e,{dsetIds:l}=e,o={errors:{},messages:{}},i={},r=Object.fromEntries(l.map(t=>[t,!1])),c=Object.fromEntries(l.map(t=>[t,!1])),a=Object.fromEntries(l.map(t=>[t,!1]));async function u(t,e){const s=await gt("createmzml/",{dsid:t,pwiz_id:e});if(s.ok){m(l);const t="Queued dataset for mzML conversion";n(1,o.messages[t]=1,o),setTimeout(function(t){n(1,o.messages[t]=0,o)},Lt,t)}else{const t=`Something went wrong trying to queue dataset mzML conversion: ${s.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},Lt,t)}}async function d(t,e){const s=await gt("refinemzml/",{dsid:t,refine_id:e});if(s.ok){m(l);const t="Queued dataset for mzML precursor refining";n(1,o.messages[t]=1,o),setTimeout(function(t){n(1,o.messages[t]=0,o)},Lt,t)}else{const t=`Something went wrong trying to queue precursor refining: ${s.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},Lt,t)}}async function f(t,e,s){const l=await gt("datasets/save/owner/",{dataset_id:t,op:s,owner:e});if(l.ok)p([t]);else{const t=`Something went wrong trying to change owner of the dataset: ${l.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},Lt,t)}n(3,r[t]=!1,r)}async function p(t){let e={};const s=t.map(async t=>{const s=await ht(`/show/dataset/${t}`);if(s.ok)e[t]=s;else{const t=`Something went wrong fetching dataset info: ${s.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},Lt,t)}});await Promise.all(s);n(2,i=Object.assign(i,e))}function m(t){n(2,i={}),p(t)}T(async()=>{m(l)});return t.$set=(t=>{"closeWindow"in t&&n(0,s=t.closeWindow),"dsetIds"in t&&n(10,l=t.dsetIds)}),t.$$.update=(()=>{1024&t.$$.dirty[0]&&m(l)}),[s,o,i,r,c,a,{Ready:"is-success",Incomplete:"is-warning",Processing:"is-danger is-light"},u,d,f,l,p,m,(t,e,n)=>f(t,e,"del"),function(t){r[t]=_(this),n(3,r),n(2,i)},(t,e)=>f(t,r[t],"add"),(t,e,n)=>d(t,e.id),(t,e,n)=>u(t,e.id),function(t){a[t.id]=_(this),n(5,a),n(2,i)},(t,e,n)=>d(t,a[e.id]),function(t){c[t.id]=_(this),n(4,c),n(2,i)},(t,e,n)=>u(t,c[e.id])]}class Ln extends et{constructor(t){super(),tt(this,t,En,Sn,o,{closeWindow:0,dsetIds:10},[-1,-1])}}function Mn(e){let n,s,l,o,i,r,c;return{c(){(n=m("a")).textContent="Analyze datasets",s=g(),(l=m("a")).textContent="Retire datasets",o=g(),(i=m("a")).textContent="Reactivate datasets",r=g(),(c=m("a")).textContent="Purge datasets",b(n,"class","button"),b(n,"title","Search MS data"),b(n,"disabled",""),b(l,"class","button"),b(l,"title","Move datasets to cold storage (delete)"),b(l,"disabled",""),b(i,"class","button"),b(i,"title","Move datasets to active storage (undelete)"),b(i,"disabled",""),b(c,"class","button"),b(c,"title","PERMANENTLY delete datasets from active and cold storage"),b(c,"disabled","")},m(t,e){d(t,n,e),d(t,s,e),d(t,l,e),d(t,o,e),d(t,i,e),d(t,r,e),d(t,c,e)},p:t,d(t){t&&f(n),t&&f(s),t&&f(l),t&&f(o),t&&f(i),t&&f(r),t&&f(c)}}}function zn(t){let e,n,l,o,i,r,c,a;function u(t,e){return t[5]?Rn:Pn}let p=u(t),h=p(t);return{c(){(e=m("a")).textContent="Analyze datasets",n=g(),(l=m("a")).textContent="Retire datasets",o=g(),(i=m("a")).textContent="Reactivate datasets",r=g(),h.c(),c=$(),b(e,"class","button"),b(e,"title","Search MS data"),b(l,"class","button"),b(l,"title","Move datasets to cold storage (delete)"),b(i,"class","button"),b(i,"title","Move datasets to active storage (undelete)")},m(u,f,p){d(u,e,f),d(u,n,f),d(u,l,f),d(u,o,f),d(u,i,f),d(u,r,f),h.m(u,f),d(u,c,f),p&&s(a),a=[v(e,"click",t[11]),v(l,"click",t[12]),v(i,"click",t[13])]},p(t,e){p===(p=u(t))&&h?h.p(t,e):(h.d(1),(h=p(t))&&(h.c(),h.m(c.parentNode,c)))},d(t){t&&f(e),t&&f(n),t&&f(l),t&&f(o),t&&f(i),t&&f(r),h.d(t),t&&f(c),s(a)}}}function Pn(e){let n,s;return{c(){(n=m("a")).textContent="Purge datasets",b(n,"class","button"),b(n,"title","PERMANENTLY delete datasets from active and cold storage")},m(t,l,o){d(t,n,l),o&&s(),s=v(n,"click",e[15])},p:t,d(t){t&&f(n),s()}}}function Rn(e){let n,s;return{c(){(n=m("a")).textContent="Are you sure? Purge datasets",b(n,"class","button is-danger is-light"),b(n,"title","PERMANENTLY delete datasets from active and cold storage")},m(t,l,o){d(t,n,l),o&&s(),s=v(n,"click",e[14])},p:t,d(t){t&&f(n),s()}}}function Un(t){let e;const n=new Et({props:{toggleWindow:t[20]}});return{c(){K(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,e){const s={};1&e&&(s.toggleWindow=t[20]),n.$set(s)},i(t){e||(J(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function qn(t){let e;const n=new Ln({props:{closeWindow:t[21],dsetIds:t[3]}});return{c(){K(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,e){const s={};8&e&&(s.closeWindow=t[21]),8&e&&(s.dsetIds=t[3]),n.$set(s)},i(t){e||(J(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function Dn(e){let n,s,l,o,i,r,c,a,u,p;const h=new De({props:{tabshow:"Datasets",notif:e[2]}});function y(t,e){return t[1].length?zn:Mn}let w=y(e),x=w(e),_=is_staff&&function(e){let n,s;return{c(){(n=m("a")).textContent="Import external data",b(n,"class","button"),b(n,"title","Already downloaded files on tmp inbox")},m(t,l,o){d(t,n,l),o&&s(),s=v(n,"click",e[16])},p:t,d(t){t&&f(n),s()}}}(e);function k(t){e[17].call(null,t)}function j(t){e[18].call(null,t)}function C(t){e[19].call(null,t)}let O={tab:"Datasets",fetchUrl:"/show/datasets",findUrl:"/find/datasets",getdetails:Hn,fixedbuttons:e[9],fields:e[7],inactive:e[6],statecolors:e[8]};void 0!==e[4]&&(O.treatItems=e[4]),void 0!==e[2]&&(O.notif=e[2]),void 0!==e[1]&&(O.selected=e[1]);const T=new je({props:O});S.push(()=>G(T,"treatItems",k)),S.push(()=>G(T,"notif",j)),S.push(()=>G(T,"selected",C)),T.$on("detailview",e[10]);let I=e[0]&&Un(e),N=e[3]&&qn(e);return{c(){K(h.$$.fragment),n=g(),x.c(),s=g(),_&&_.c(),l=g(),K(T.$$.fragment),c=g(),I&&I.c(),a=g(),N&&N.c(),u=$()},m(t,e){V(h,t,e),d(t,n,e),x.m(t,e),d(t,s,e),_&&_.m(t,e),d(t,l,e),V(T,t,e),d(t,c,e),I&&I.m(t,e),d(t,a,e),N&&N.m(t,e),d(t,u,e),p=!0},p(t,[e]){const n={};4&e&&(n.notif=t[2]),h.$set(n),w===(w=y(t))&&x?x.p(t,e):(x.d(1),(x=w(t))&&(x.c(),x.m(s.parentNode,s))),is_staff&&_.p(t,e);const l={};!o&&16&e&&(o=!0,l.treatItems=t[4],P(()=>o=!1)),!i&&4&e&&(i=!0,l.notif=t[2],P(()=>i=!1)),!r&&2&e&&(r=!0,l.selected=t[1],P(()=>r=!1)),T.$set(l),t[0]?I?(I.p(t,e),J(I,1)):((I=Un(t)).c(),J(I,1),I.m(a.parentNode,a)):I&&(B(),Y(I,1,1,()=>{I=null}),Q()),t[3]?N?(N.p(t,e),J(N,1)):((N=qn(t)).c(),J(N,1),N.m(u.parentNode,u)):N&&(B(),Y(N,1,1,()=>{N=null}),Q())},i(t){p||(J(h.$$.fragment,t),J(T.$$.fragment,t),J(I),J(N),p=!0)},o(t){Y(h.$$.fragment,t),Y(T.$$.fragment,t),Y(I),Y(N),p=!1},d(t){X(h,t),t&&f(n),x.d(t),t&&f(s),_&&_.d(t),t&&f(l),X(T,t),t&&f(c),I&&I.d(t),t&&f(a),N&&N.d(t),t&&f(u)}}}function Fn(t){window.open(`/datasets/show/${t}`,"_blank")}async function Hn(t){const e=await ht(`/show/dataset/${t}`);return`\n    <p><span class="has-text-weight-bold">Storage location:</span> ${e.storage_loc}</p>\n    <p><span class="has-text-weight-bold">Owners:</span> ${Object.values(e.owners).join(", ")}</p>\n    <hr>\n    <p>\n    ${Object.entries(e.nrstoredfiles).map(t=>`<div>${t[1]} stored files of type ${t[0]}</div>`).join("")}\n    </p>\n    `}function Bn(t,e,n){let s,l=!1,o=[],i={errors:{},messages:{}},r=!1,c=!1;return[l,o,i,r,s,c,["deleted"],[{id:"ptype",name:"Project type",type:"str",multi:!1},{id:"storestate",name:"Stored",type:"tag",multi:!1,links:"fn_ids",linkroute:"#/files/"},{id:"jobstates",name:"__hourglass-half",type:"state",multi:!0,links:"jobids",linkroute:"#/jobs"},{id:"analyses",name:"",type:"icon",icon:"cogs",links:"ana_ids",linkroute:"#/analyses"},{id:"proj",name:"Project",type:"str",multi:!1},{id:"exp",name:"Experiment",type:"str",multi:!1},{id:"run",name:"Run",type:"str",multi:!1},{id:"usr",name:"Creator",type:"str",multi:!1},{id:"dtype",name:"Datatype",type:"str",multi:!1}],{storestate:{cold:"is-info",purged:"is-danger",complete:"is-success","active-only":"is-warning",new:"is-warning",empty:"is-light",broken:"is-light"},jobstates:{wait:"has-text-grey-light",pending:"has-text-info",error:"has-text-danger",processing:"has-text-warning",done:"has-text-success"}},[{name:"__edit",alt:"Show metadata",action:Fn}],function(t){n(3,r=t.detail.ids)},async function(){window.open(`/analysis/new?dsids=${o.join(",")}`,"_blank")},function(){s("datasets/archive/dataset/","dataset","archiving",t=>{t.deleted=!0},o)},function(){s("datasets/undelete/dataset/","dataset","reactivating",t=>{t.deleted=!1},o)},function(){s("datasets/purge/dataset/","dataset","reactivating",t=>{t.deleted=!0},o)},function(){n(5,c=!0),setTimeout(()=>{n(5,c=!1)},Lt)},t=>n(0,l=!1===l),function(t){n(4,s=t)},function(t){n(2,i=t)},function(t){n(1,o=t)},t=>n(0,l=!1===l),()=>{n(3,r=!1)}]}class Qn extends et{constructor(t){super(),tt(this,t,Bn,Dn,o,{})}}function Jn(t){let e,n,s,l,o,i;const r=new De({props:{tabshow:"Jobs",notif:t[1]}});function c(e){t[12].call(null,e)}function a(e){t[13].call(null,e)}function u(e){t[14].call(null,e)}function p(e){t[15].call(null,e)}let m={tab:"Jobs",fetchUrl:"/show/jobs",findUrl:"find/jobs",getdetails:Yn,fixedbuttons:t[6],fields:t[4],inactive:["canceled"],statecolors:t[5]};void 0!==t[3]&&(m.items=t[3]),void 0!==t[2]&&(m.treatItems=t[2]),void 0!==t[1]&&(m.notif=t[1]),void 0!==t[0]&&(m.selected=t[0]);const h=new je({props:m});return S.push(()=>G(h,"items",c)),S.push(()=>G(h,"treatItems",a)),S.push(()=>G(h,"notif",u)),S.push(()=>G(h,"selected",p)),h.$on("rowAction",t[16]),{c(){K(r.$$.fragment),e=g(),K(h.$$.fragment)},m(t,n){V(r,t,n),d(t,e,n),V(h,t,n),i=!0},p(t,[e]){const i={};2&e&&(i.notif=t[1]),r.$set(i);const c={};!n&&8&e&&(n=!0,c.items=t[3],P(()=>n=!1)),!s&&4&e&&(s=!0,c.treatItems=t[2],P(()=>s=!1)),!l&&2&e&&(l=!0,c.notif=t[1],P(()=>l=!1)),!o&&1&e&&(o=!0,c.selected=t[0],P(()=>o=!1)),h.$set(c)},i(t){i||(J(r.$$.fragment,t),J(h.$$.fragment,t),i=!0)},o(t){Y(r.$$.fragment,t),Y(h.$$.fragment,t),i=!1},d(t){X(r,t),t&&f(e),X(h,t)}}}async function Yn(t){const e=await ht(`/show/job/${t}`);return`\n    <p>${e.files} files in job</p>\n    ${e.errmsg?`<p>Error msg: ${e.errmsg}</p>`:""}\n    <p>\n    <span class="tag is-danger">${e.tasks.error}</span>\n    <span class="tag is-warning">${e.tasks.procpen}</span>\n    <span class="tag is-success">${e.tasks.done}</span>\n    </p>\n  `}function Gn(t,e,n){let s,l,o=[],i={errors:{},messages:{}};function r(t){s("/jobs/retry/","job","retrying",t=>{d(t.id)},[t])}function c(t){s("/jobs/pause/","job","pausing",t=>{d(t.id)},[t])}function a(t){s("/jobs/delete/","job","deleting",t=>{d(t.id)},[t])}function u(t,e){({retry:r,"force retry":r,pause:c,delete:a})[t](e)}async function d(t){const e=await ht(`/refresh/job/${t}`);if(e.ok)n(3,l[t]=Object.assign(l[t],e),l);else{const s=`Something went wrong trying to refresh job ${t}: ${e.error}`;n(1,i.errors[s]=1,i),setTimeout(function(t){n(1,i.errors[t]=0,i)},Lt,s)}}return[o,i,s,l,[{id:"state",name:"__hourglass-half",type:"state",multi:!1},{id:"name",name:"Job name",type:"str",multi:!1},{id:"files",name:"",help:"Files",type:"icon",icon:"database",multi:!1,links:"fn_ids",linkroute:"#/files"},{id:"analysis",name:"",help:"Analysis",type:"icon",icon:"cogs",multi:!1,links:"analysis",linkroute:"#/analyses"},{id:"datasets",name:"",help:"Datasets",type:"icon",icon:"clipboard-list",multi:!1,links:"dset_ids",linkroute:"#/datasets"},{id:"usr",name:"Users",type:"str",multi:!1},{id:"date",name:"Date",type:"str",multi:!1},{id:"actions",name:"Actions",type:"button",multi:!0,confirm:["delete"]}],{state:{wait:"has-text-grey-light",pending:"has-text-info",error:"has-text-danger",processing:"has-text-warning",done:"has-text-success"}},[{name:"__redo",alt:"Refresh job",action:d}],u,r,c,a,d,function(t){n(3,l=t)},function(t){n(2,s=t)},function(t){n(1,i=t)},function(t){n(0,o=t)},t=>u(t.detail.action,t.detail.id)]}function Kn(t,e,n){const s=t.slice();return s[9]=e[n][0],s[10]=e[n][1],s}function Vn(t){let e,n,s,l=t[10].description+"";return{c(){e=m("p"),(n=m("span")).textContent="Description:",s=h(l),b(n,"class","has-text-weight-bold")},m(t,l){d(t,e,l),u(e,n),u(e,s)},p(t,e){4&e&&l!==(l=t[10].description+"")&&y(s,l)},d(t){t&&f(e)}}}function Xn(t){let e,n,o,i,r,c,a,p,$,x,_,k,j,C,O,T,I,N,A,S,W,E,L=t[10].producer+"",M=t[10].server+"",z=t[10].path+"",P=t[10].description&&Vn(t);function R(){t[8].call(I,t[9])}return{c(){e=m("p"),(n=m("span")).textContent="Producer",o=g(),i=h(L),r=g(),c=m("p"),(a=m("span")).textContent="Storage location:",p=g(),$=m("span"),x=h(M),_=h(" / "),k=h(z),j=g(),P&&P.c(),C=g(),O=m("div"),T=m("p"),I=m("input"),N=g(),A=m("p"),(S=m("a")).textContent="Rename file",W=g(),b(n,"class","has-text-weight-bold"),b(a,"class","has-text-weight-bold"),b($,"class","has-text-primary"),b(I,"class","input is-small"),b(I,"type","text"),b(T,"class","control is-expanded"),b(S,"class","button is-small is-primary"),b(A,"class","control"),b(O,"class","field is-grouped")},m(f,m,h){d(f,e,m),u(e,n),u(e,o),u(e,i),d(f,r,m),d(f,c,m),u(c,a),u(c,p),u(c,$),u($,x),u(c,_),u(c,k),d(f,j,m),P&&P.m(f,m),d(f,C,m),d(f,O,m),u(O,T),u(T,I),w(I,t[3][t[9]]),u(O,N),u(O,A),u(A,S),u(O,W),h&&s(E),E=[v(I,"input",R),v(S,"click",function(){l(t[4](t[3][t[9]],t[9]))&&t[4](t[3][t[9]],t[9]).apply(this,arguments)})]},p(e,n){t=e,4&n&&L!==(L=t[10].producer+"")&&y(i,L),4&n&&M!==(M=t[10].server+"")&&y(x,M),4&n&&z!==(z=t[10].path+"")&&y(k,z),t[10].description?P?P.p(t,n):((P=Vn(t)).c(),P.m(C.parentNode,C)):P&&(P.d(1),P=null),12&n&&I.value!==t[3][t[9]]&&w(I,t[3][t[9]])},d(t){t&&f(e),t&&f(r),t&&f(c),t&&f(j),P&&P.d(t),t&&f(C),t&&f(O),s(E)}}}function Zn(t){let e,n=Object.entries(t[2]),s=[];for(let e=0;e<n.length;e+=1)s[e]=Xn(Kn(t,n,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=$()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);d(t,e,n)},p(t,l){if(28&l){let o;for(n=Object.entries(t[2]),o=0;o<n.length;o+=1){const i=Kn(t,n,o);s[o]?s[o].p(i,l):(s[o]=Xn(i),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){p(s,t),t&&f(e)}}}function ts(t){let e;const n=new sn({props:{notif:t[1],closeWindow:t[0],$$slots:{default:[Zn]},$$scope:{ctx:t}}});return{c(){K(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,[e]){const s={};2&e&&(s.notif=t[1]),1&e&&(s.closeWindow=t[0]),8204&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(J(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function es(t,e,n){let{closeWindow:s}=e,{fnIds:l}=e,o={errors:{},messages:{}},i={},r=Object.fromEntries(l.map(t=>[t,!1]));async function c(t){let e={};const s=t.map(async t=>{const s=await ht(`/show/file/${t}`);if(s.ok)e[t]=s,n(3,r[t]=s.filename,r);else{const t=`Something went wrong fetching file info: ${s.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},Lt,t)}});await Promise.all(s);n(2,i=Object.assign(i,e))}function a(t){n(2,i={}),c(t)}return T(async()=>{a(l)}),t.$set=(t=>{"closeWindow"in t&&n(0,s=t.closeWindow),"fnIds"in t&&n(5,l=t.fnIds)}),t.$$.update=(()=>{32&t.$$.dirty&&a(l)}),[s,o,i,r,async function(t,e){if(console.log(i[e].filename),console.log(t),t!==i[e].filename){const s=await gt("/files/rename/",{newname:t,sf_id:e});if(s.ok){n(2,i[e].filename=t,i);const s=`Queued file for renaming to ${t}`;n(1,o.messages[s]=1,o),setTimeout(function(t){n(1,o.messages[t]=0,o)},Lt,s)}else{const t=`Something went wrong trying to rename the file: ${s.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},Lt,t)}}},l,c,a,function(t){r[t]=this.value,n(3,r),n(2,i)}]}class ns extends et{constructor(t){super(),tt(this,t,es,ts,o,{closeWindow:0,fnIds:5})}}function ss(e){let n,s;return{c(){(n=m("a")).textContent="Get old mzML cleanup space",b(n,"class","button")},m(t,l,o){d(t,n,l),o&&s(),s=v(n,"click",e[9])},p:t,d(t){t&&f(n),s()}}}function ls(t){let e,n,s,l;return{c(){e=m("a"),n=h("Cleanup mzML for "),s=h(t[3]),l=h(" of raw files"),b(e,"class","button is-loading")},m(t,o){d(t,e,o),u(e,n),u(e,s),u(e,l)},p(t,e){8&e&&y(s,t[3])},d(t){t&&f(e)}}}function os(t){let e,n,s,l,o;return{c(){e=m("a"),n=h("Cleanup mzML for "),s=h(t[3]),l=h(" of raw files"),b(e,"class","button")},m(i,r,c){d(i,e,r),u(e,n),u(e,s),u(e,l),c&&o(),o=v(e,"click",t[8])},p(t,e){8&e&&y(s,t[3])},d(t){t&&f(e),o()}}}function is(e){return{c:t,m:t,d:t}}function rs(t){let e;const n=new ns({props:{closeWindow:t[12],fnIds:t[2]}});return{c(){K(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,e){const s={};4&e&&(s.closeWindow=t[12]),4&e&&(s.fnIds=t[2]),n.$set(s)},i(t){e||(J(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function cs(t){let e,n,s,l,o,i,r,c;const a=new De({props:{tabshow:"Files",notif:t[1]}});function u(t,e){return t[3]?os:t[4]?ls:ss}let p=u(t),m=p(t),h=t[0].length&&is();function v(e){t[10].call(null,e)}function b(e){t[11].call(null,e)}let y={tab:"Files",fetchUrl:"/show/files",findUrl:"/find/files",getdetails:as,fields:t[5],inactive:["deleted","purged"],statecolors:t[6]};void 0!==t[1]&&(y.notif=t[1]),void 0!==t[0]&&(y.selected=t[0]);const w=new je({props:y});S.push(()=>G(w,"notif",v)),S.push(()=>G(w,"selected",b)),w.$on("detailview",t[7]);let x=t[2]&&rs(t);return{c(){K(a.$$.fragment),e=g(),m.c(),n=g(),h&&h.c(),s=g(),K(w.$$.fragment),i=g(),x&&x.c(),r=$()},m(t,l){V(a,t,l),d(t,e,l),m.m(t,l),d(t,n,l),h&&h.m(t,l),d(t,s,l),V(w,t,l),d(t,i,l),x&&x.m(t,l),d(t,r,l),c=!0},p(t,[e]){const i={};2&e&&(i.notif=t[1]),a.$set(i),p===(p=u(t))&&m?m.p(t,e):(m.d(1),(m=p(t))&&(m.c(),m.m(n.parentNode,n))),t[0].length?h||((h=is()).c(),h.m(s.parentNode,s)):h&&(h.d(1),h=null);const c={};!l&&2&e&&(l=!0,c.notif=t[1],P(()=>l=!1)),!o&&1&e&&(o=!0,c.selected=t[0],P(()=>o=!1)),w.$set(c),t[2]?x?(x.p(t,e),J(x,1)):((x=rs(t)).c(),J(x,1),x.m(r.parentNode,r)):x&&(B(),Y(x,1,1,()=>{x=null}),Q())},i(t){c||(J(a.$$.fragment,t),J(w.$$.fragment,t),J(x),c=!0)},o(t){Y(a.$$.fragment,t),Y(w.$$.fragment,t),Y(x),c=!1},d(t){X(a,t),t&&f(e),m.d(t),t&&f(n),h&&h.d(t),t&&f(s),X(w,t),t&&f(i),x&&x.d(t),t&&f(r)}}}async function as(t){const e=await ht(`/show/file/${t}`);return`\n    <p><span class="has-text-weight-bold">Producer:</span> ${e.producer}</p>\n    <p><span class="has-text-weight-bold">Storage location:</span> <span class="has-text-primary">${e.server}</span> / ${e.path}</p>\n    ${e.description?`<p><span class="has-text-weight-bold">Description:</span> ${e.description}</p>`:""}\n    `}function us(t,e,n){let s=[],l={errors:{},messages:{}},o=!1,i=!1,r=!1;return[s,l,o,i,r,[{id:"jobs",name:"__hourglass-half",type:"state",multi:!0,links:"job_ids",linkroute:"#/jobs"},{id:"name",name:"File",type:"str",multi:!1},{id:"dataset",name:"",type:"icon",help:"Dataset",icon:"clipboard-list",multi:!1,links:"dataset",linkroute:"#/datasets"},{id:"analyses",name:"",type:"icon",help:"Analyses",icon:"cogs",multi:!1,links:"analyses",linkroute:"#/analyses"},{id:"date",name:"Date",type:"str",multi:!1},{id:"size",name:"Size",type:"str",multi:!1},{id:"backup",name:"Backed up",type:"bool",multi:!1},{id:"owner",name:"Belongs",type:"str",multi:!1},{id:"ftype",name:"Type",type:"str",multi:!1}],{stored:!1,jobs:{wait:"has-text-grey-light",pending:"has-text-info",error:"has-text-danger",processing:"has-text-warning",done:"has-text-success"}},function(t){n(2,o=t.detail.ids)},async function(){let t;n(4,r=!0),n(3,i=!1);const e=await gt("files/cleanup/",{queue_job:!0});e.ok?(n(4,r=!1),t="Queued job to delete old mzML from disk",n(1,l.messages[t]=1,l),setTimeout(function(t){n(1,l.messages[t]=0,l)},Lt,t)):(t="error"in e?e.error:"Something went wrong trying to run mzML clean-up",n(1,l.errors[t]=1,l),setTimeout(function(t){n(1,l.errors[t]=0,l)},Lt,t))},async function(){let t;n(4,r=!0);const e=await gt("files/cleanup/",{queue_job:!1});e.ok?(n(3,i=e.mzml_cleanupsize_raws),setTimeout(function(){n(3,i=!1)},3e5)):(t="error"in e?e.error:"Something went wrong trying to fetch mzML clean-up size",n(1,l.errors[t]=1,l),setTimeout(function(t){n(1,l.errors[t]=0,l)},Lt,t)),n(4,r=!1)},function(t){n(1,l=t)},function(t){n(0,s=t)},()=>{n(2,o=!1)}]}function ds(t,e,n){const s=t.slice();return s[15]=e[n],s}function fs(t,e,n){const s=t.slice();return s[15]=e[n],s}function ps(e){let n,s;return{c(){b(n=m("input"),"class","file-input"),b(n,"type","file")},m(t,l,o){d(t,n,l),o&&s(),s=v(n,"change",e[12])},p:t,d(t){t&&f(n),s()}}}function ms(t){let e;return{c(){b(e=m("input"),"files",t[6]),b(e,"class","file-input"),e.disabled=!0,b(e,"type","file")},m(t,n){d(t,e,n)},p(t,n){64&n&&b(e,"files",t[6])},d(t){t&&f(e)}}}function hs(t){let e;return{c(){(e=m("span")).textContent="Choose a file...",b(e,"class","file-label")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function gs(t){let e;return{c(){(e=m("span")).textContent="Uploading file...",b(e,"class","file-label")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function $s(t){let e;return{c(){(e=m("span")).innerHTML='<i class="fa fa-spinner fa-spin"></i>',b(e,"class","has-icon")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function vs(t){let e;return{c(){(e=m("span")).innerHTML='<i class="fa fa-times has-text-danger"></i>',b(e,"class","has-icon")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function bs(t){let e;return{c(){(e=m("span")).innerHTML='<i class="fa fa-check has-text-success"></i>',b(e,"class","has-icon")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function ys(t){let e,n=t[6][0].name+"";return{c(){e=h(n)},m(t,n){d(t,e,n)},p(t,s){64&s&&n!==(n=t[6][0].name+"")&&y(e,n)},d(t){t&&f(e)}}}function ws(t){let e,n,s,l=Object.keys(t[7]),o=[];for(let e=0;e<l.length;e+=1)o[e]=_s(ds(t,l,e));return{c(){e=m("select"),(n=m("option")).textContent="Select filetype";for(let t=0;t<o.length;t+=1)o[t].c();n.__value="Select filetype",n.value=n.__value,void 0===t[2]&&z(()=>t[13].call(e))},m(l,i,r){d(l,e,i),u(e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null);x(e,t[2]),r&&s(),s=v(e,"change",t[13])},p(t,n){if(128&n){let s;for(l=Object.keys(t[7]),s=0;s<l.length;s+=1){const i=ds(t,l,s);o[s]?o[s].p(i,n):(o[s]=_s(i),o[s].c(),o[s].m(e,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=l.length}4&n&&x(e,t[2])},d(t){t&&f(e),p(o,t),s()}}}function xs(t){let e,n,s,l=Object.keys(t[7]),o=[];for(let e=0;e<l.length;e+=1)o[e]=ks(fs(t,l,e));return{c(){e=m("select"),(n=m("option")).textContent="Select filetype";for(let t=0;t<o.length;t+=1)o[t].c();n.__value="Select filetype",n.value=n.__value,e.disabled=!0},m(l,i){d(l,e,i),u(e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null);s=t[2];for(var r=0;r<e.options.length;r+=1){var c=e.options[r];if(c.__value===s){c.selected=!0;break}}},p(t,n){if(128&n){let s;for(l=Object.keys(t[7]),s=0;s<l.length;s+=1){const i=fs(t,l,s);o[s]?o[s].p(i,n):(o[s]=ks(i),o[s].c(),o[s].m(e,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=l.length}if(4&n&&s!==(s=t[2]))for(var i=0;i<e.options.length;i+=1){var r=e.options[i];if(r.__value===s){r.selected=!0;break}}},d(t){t&&f(e),p(o,t)}}}function _s(t){let e,n,s,l=t[7][t[15]]+"";return{c(){e=m("option"),n=h(l),e.__value=s=t[15],e.value=e.__value},m(t,s){d(t,e,s),u(e,n)},p(t,o){128&o&&l!==(l=t[7][t[15]]+"")&&y(n,l),128&o&&s!==(s=t[15])&&(e.__value=s),e.value=e.__value},d(t){t&&f(e)}}}function ks(t){let e,n,s,l=t[7][t[15]]+"";return{c(){e=m("option"),n=h(l),e.__value=s=t[15],e.value=e.__value},m(t,s){d(t,e,s),u(e,n)},p(t,o){128&o&&l!==(l=t[7][t[15]]+"")&&y(n,l),128&o&&s!==(s=t[15])&&(e.__value=s),e.value=e.__value},d(t){t&&f(e)}}}function js(t){let e,n;return{c(){b(e=m("input"),"class","input"),b(e,"type","text"),b(e,"placeholder","Description")},m(s,l,o){d(s,e,l),w(e,t[1]),o&&n(),n=v(e,"input",t[14])},p(t,n){2&n&&e.value!==t[1]&&w(e,t[1])},d(t){t&&f(e),n()}}}function Cs(t){let e;return{c(){b(e=m("input"),"class","input"),e.disabled=!0,e.value=t[1],b(e,"type","text"),b(e,"placeholder","Description")},m(t,n){d(t,e,n)},p(t,n){2&n&&e.value!==t[1]&&(e.value=t[1])},d(t){t&&f(e)}}}function Os(t){let e,n;return{c(){e=m("div"),n=h(t[3]),b(e,"class","has-text-danger")},m(t,s){d(t,e,s),u(e,n)},p(t,e){8&e&&y(n,t[3])},d(t){t&&f(e)}}}function Ts(e){let n;return{c(){(n=m("a")).textContent="Upload file",b(n,"class","button is-small"),b(n,"disabled","")},m(t,e){d(t,n,e)},p:t,d(t){t&&f(n)}}}function Is(e){let n;return{c(){(n=m("a")).textContent="Upload file",b(n,"class","button is-small"),b(n,"disabled","")},m(t,e){d(t,n,e)},p:t,d(t){t&&f(n)}}}function Ns(e){let n,s;return{c(){(n=m("a")).textContent="Upload file",b(n,"class","button is-small")},m(t,l,o){d(t,n,l),o&&s(),s=v(n,"click",e[9])},p:t,d(t){t&&f(n),s()}}}function As(e){let n,o,i,r,c,a,p,h,$,y,w,x,_,k,j,C,O,T,I,N,A,S,W,E,L,M,z,P,R;function U(t,e){return t[8]?ms:ps}let q=U(e),D=q(e);function F(t,e){return t[8]?gs:hs}let H=F(e),B=H(e);function Q(t,e){return t[4]?bs:t[3]?vs:t[5]?$s:void 0}let J=Q(e),Y=J&&J(e),G=e[6].length&&ys(e);function K(t,e){return t[8]?xs:ws}let V=K(e),X=V(e);function Z(t,e){return t[8]?Cs:js}let tt=Z(e),et=tt(e),nt=e[3]&&Os(e);function st(t,e){return t[6].length&&t[1]&&t[2]?Ns:t[8]?Is:Ts}let lt=st(e),ot=lt(e);return{c(){n=m("div"),o=m("div"),i=g(),r=m("div"),c=m("div"),(a=m("h5")).textContent="Upload FASTA files",p=g(),h=m("div"),$=m("div"),y=m("label"),D.c(),w=g(),x=m("span"),(_=m("span")).innerHTML='<i class="fas fa-upload"></i>',k=g(),B.c(),j=g(),C=m("span"),Y&&Y.c(),O=g(),G&&G.c(),T=g(),I=m("div"),N=m("div"),A=m("div"),X.c(),S=g(),W=m("div"),E=m("div"),et.c(),L=g(),nt&&nt.c(),M=g(),ot.c(),z=g(),P=m("button"),b(o,"class","modal-background"),b(a,"class","title is-5"),b(_,"class","file-icon"),b(x,"class","file-cta"),b(C,"class","file-name"),b(y,"class","file-label"),b($,"class","file has-name is-fullwidth"),b(h,"class","field"),b(A,"class","select"),b(N,"class","control"),b(I,"class","field"),b(E,"class","control"),b(W,"class","field"),b(c,"class","box"),b(r,"class","modal-content"),b(P,"class","modal-close is-large"),b(P,"aria-label","close"),b(n,"class","modal is-active")},m(t,f,m){d(t,n,f),u(n,o),u(n,i),u(n,r),u(r,c),u(c,a),u(c,p),u(c,h),u(h,$),u($,y),D.m(y,null),u(y,w),u(y,x),u(x,_),u(x,k),B.m(x,null),u(y,j),u(y,C),Y&&Y.m(C,null),u(C,O),G&&G.m(C,null),u(c,T),u(c,I),u(I,N),u(N,A),X.m(A,null),u(c,S),u(c,W),u(W,E),et.m(E,null),u(c,L),nt&&nt.m(c,null),u(c,M),ot.m(c,null),u(n,z),u(n,P),m&&s(R),R=[v(window,"keyup",e[10]),v(P,"click",function(){l(e[0])&&e[0].apply(this,arguments)})]},p(t,[n]){q===(q=U(e=t))&&D?D.p(e,n):(D.d(1),(D=q(e))&&(D.c(),D.m(y,w))),H!==(H=F(e))&&(B.d(1),(B=H(e))&&(B.c(),B.m(x,null))),J!==(J=Q(e))&&(Y&&Y.d(1),(Y=J&&J(e))&&(Y.c(),Y.m(C,O))),e[6].length?G?G.p(e,n):((G=ys(e)).c(),G.m(C,null)):G&&(G.d(1),G=null),V===(V=K(e))&&X?X.p(e,n):(X.d(1),(X=V(e))&&(X.c(),X.m(A,null))),tt===(tt=Z(e))&&et?et.p(e,n):(et.d(1),(et=tt(e))&&(et.c(),et.m(E,null))),e[3]?nt?nt.p(e,n):((nt=Os(e)).c(),nt.m(c,M)):nt&&(nt.d(1),nt=null),lt===(lt=st(e))&&ot?ot.p(e,n):(ot.d(1),(ot=lt(e))&&(ot.c(),ot.m(c,null)))},i:t,o:t,d(t){t&&f(n),D.d(),B.d(),Y&&Y.d(),G&&G.d(),X.d(),et.d(),nt&&nt.d(),ot.d(),s(R)}}}function Ss(t,e,n){let s,l,o,i,{toggleWindow:r}=e,c="",a=[],u={},d=!1;async function f(){const t=await ht("/files/upload/userfile");n(7,u=t.upload_ftypes)}return T(async()=>{f()}),t.$set=(t=>{"toggleWindow"in t&&n(0,r=t.toggleWindow)}),[r,c,s,l,o,i,a,u,d,async function(){n(8,d=!0),n(5,i=!0),n(3,l=n(4,o=!1));let t=new FormData;t.append("file",a[0]),t.append("desc",c),t.append("ftype_id",s);let e=await fetch("/files/upload/userfile/",{method:"POST",body:t,credentials:"same-origin"});e.ok?("error"in(e=await e.json())?(n(5,i=n(4,o=!1)),n(3,l=e.error)):n(4,o=e.success),n(8,d=!1)):n(3,l="Something went wrong trying to send file to server, contact admin")},function(t){27===t.keyCode&&r()},f,function(){a=this.files,n(6,a)},function(){s=_(this),n(2,s),n(7,u)},function(){c=this.value,n(1,c)}]}class Ws extends et{constructor(t){super(),tt(this,t,Ss,As,o,{toggleWindow:0})}}function Es(t,e,n){const s=t.slice();return s[13]=e[n],s}function Ls(t,e,n){const s=t.slice();return s[10]=e[n],s}function Ms(t,e,n){const s=t.slice();return s[19]=e[n].fn,s[20]=e[n].fnid,s[21]=e[n].desc,s[22]=e[n].parentanalysis,s[23]=e[n].anid,s}function zs(t,e,n){const s=t.slice();return s[16]=e[n],s}function Ps(t,e,n){const s=t.slice();return s[26]=e[n].param,s[19]=e[n].fn,s[20]=e[n].fnid,s[21]=e[n].desc,s[22]=e[n].parentanalysis,s[23]=e[n].anid,s}function Rs(t,e,n){const s=t.slice();return s[29]=e[n],s}function Us(t,e,n){const s=t.slice();return s[32]=e[n].server,s[33]=e[n].path,s[34]=e[n].share,s}function qs(t,e,n){const s=t.slice();return s[37]=e[n],s}function Ds(t,e,n){const s=t.slice();return s[6]=e[n][0],s[7]=e[n][1],s}function Fs(t){let e,n,s,l,o,i,r=t[7].base_analysis.name+"";return{c(){e=m("p"),(n=m("span")).textContent="Complementing previous run:",s=g(),l=m("a"),o=h(r),b(n,"class","has-text-weight-bold"),b(l,"href",i=`#/analyses?ids=${t[7].base_analysis.nfsid}`)},m(t,i){d(t,e,i),u(e,n),u(e,s),u(e,l),u(l,o)},p(t,e){4&e[0]&&r!==(r=t[7].base_analysis.name+"")&&y(o,r),4&e[0]&&i!==(i=`#/analyses?ids=${t[7].base_analysis.nfsid}`)&&b(l,"href",i)},d(t){t&&f(e)}}}function Hs(t){let e,n,s,l,o,i=t[7].base_analysis.nrdsets+"",r=t[7].base_analysis.nrfiles+"";return{c(){e=h("("),n=h(i),s=h(" datasets, "),l=h(r),o=h(" files cumulatively analysed in previous run)")},m(t,i){d(t,e,i),d(t,n,i),d(t,s,i),d(t,l,i),d(t,o,i)},p(t,e){4&e[0]&&i!==(i=t[7].base_analysis.nrdsets+"")&&y(n,i),4&e[0]&&r!==(r=t[7].base_analysis.nrfiles+"")&&y(l,r)},d(t){t&&f(e),t&&f(n),t&&f(s),t&&f(l),t&&f(o)}}}function Bs(t){let e,n,s;return{c(){e=m("a"),n=h("(full log)"),b(e,"href",s=`analysis/log/${t[6]}`),b(e,"class","is-size-7"),b(e,"target","_blank")},m(t,s){d(t,e,s),u(e,n)},p(t,n){4&n[0]&&s!==(s=`analysis/log/${t[6]}`)&&b(e,"href",s)},d(t){t&&f(e)}}}function Qs(t){let e,n,s=t[37]+"";return{c(){e=h(s),n=m("br")},m(t,s){d(t,e,s),d(t,n,s)},p(t,n){4&n[0]&&s!==(s=t[37]+"")&&y(e,s)},d(t){t&&f(e),t&&f(n)}}}function Js(t){let e,n,s,l,o,i,r,c,a=t[32]+"",p=t[34]+"",$=t[33]+"";return{c(){e=m("div"),n=m("span"),s=h(a),l=g(),o=m("span"),i=h(p),r=h("\n       "),c=h($),b(n,"class","tag"),b(o,"class","tag is-primary"),b(e,"class","tags has-addons")},m(t,a){d(t,e,a),u(e,n),u(n,s),u(e,l),u(e,o),u(o,i),u(e,r),u(e,c)},p(t,e){4&e[0]&&a!==(a=t[32]+"")&&y(s,a),4&e[0]&&p!==(p=t[34]+"")&&y(i,p),4&e[0]&&$!==($=t[33]+"")&&y(c,$)},d(t){t&&f(e)}}}function Ys(t){let e,n,s,l,o=t[29][1]+"";return{c(){e=m("div"),n=m("a"),s=h(o),b(n,"href",l="analysis/showfile/"+t[29][0]),b(n,"target","_blank")},m(t,l){d(t,e,l),u(e,n),u(n,s)},p(t,e){4&e[0]&&o!==(o=t[29][1]+"")&&y(s,o),4&e[0]&&l!==(l="analysis/showfile/"+t[29][0])&&b(n,"href",l)},d(t){t&&f(e)}}}function Gs(t){let e,n,s,l,o,i,r,c,a,p,$=t[26]+"",v=t[21]+"",w=t[19]+"";return{c(){e=m("p"),n=m("code"),s=h($),l=g(),o=h(v),i=h(" ( "),r=m("a"),c=h(w),p=h(" )"),b(r,"href",a=`#/files?ids=${t[20]}`)},m(t,a){d(t,e,a),u(e,n),u(n,s),u(e,l),u(e,o),u(e,i),u(e,r),u(r,c),u(e,p)},p(t,e){4&e[0]&&$!==($=t[26]+"")&&y(s,$),4&e[0]&&v!==(v=t[21]+"")&&y(o,v),4&e[0]&&w!==(w=t[19]+"")&&y(c,w),4&e[0]&&a!==(a=`#/files?ids=${t[20]}`)&&b(r,"href",a)},d(t){t&&f(e)}}}function Ks(t){let e,n,s,l,o,i,r,c,a,p,g,$,v=t[26]+"",w=t[22]+"",x=t[19]+"";return{c(){e=m("p"),n=m("code"),s=h(v),l=h(" from "),o=m("a"),i=h(w),c=h(" ( "),a=m("a"),p=h(x),$=h(" )"),b(o,"target","_blank"),b(o,"href",r=`#/analyses?ids=${t[23]}`),b(a,"href",g=`#/files?ids=${t[20]}`)},m(t,r){d(t,e,r),u(e,n),u(n,s),u(e,l),u(e,o),u(o,i),u(e,c),u(e,a),u(a,p),u(e,$)},p(t,e){4&e[0]&&v!==(v=t[26]+"")&&y(s,v),4&e[0]&&w!==(w=t[22]+"")&&y(i,w),4&e[0]&&r!==(r=`#/analyses?ids=${t[23]}`)&&b(o,"href",r),4&e[0]&&x!==(x=t[19]+"")&&y(p,x),4&e[0]&&g!==(g=`#/files?ids=${t[20]}`)&&b(a,"href",g)},d(t){t&&f(e)}}}function Vs(t){let e;function n(t,e){return t[22]?Ks:Gs}let s=n(t),l=s(t);return{c(){l.c(),e=$()},m(t,n){l.m(t,n),d(t,e,n)},p(t,o){s===(s=n(t))&&l?l.p(t,o):(l.d(1),(l=s(t))&&(l.c(),l.m(e.parentNode,e)))},d(t){l.d(t),t&&f(e)}}}function Xs(t){let e,n,s,l,o,i,r,c=t[21]+"",a=t[19]+"";return{c(){e=m("div"),n=h(c),s=h(" ( "),l=m("a"),o=h(a),r=h(" )"),b(l,"href",i=`#/files?ids=${t[20]}`)},m(t,i){d(t,e,i),u(e,n),u(e,s),u(e,l),u(l,o),u(e,r)},p(t,e){4&e[0]&&c!==(c=t[21]+"")&&y(n,c),4&e[0]&&a!==(a=t[19]+"")&&y(o,a),4&e[0]&&i!==(i=`#/files?ids=${t[20]}`)&&b(l,"href",i)},d(t){t&&f(e)}}}function Zs(t){let e,n,s,l,o,i=t[16][0]+"",r=t[16][1],c=[];for(let e=0;e<r.length;e+=1)c[e]=Xs(Ms(t,r,e));return{c(){e=m("div"),n=m("code"),s=h(i),l=g();for(let t=0;t<c.length;t+=1)c[t].c();o=g()},m(t,i){d(t,e,i),u(e,n),u(n,s),u(e,l);for(let t=0;t<c.length;t+=1)c[t].m(e,null);u(e,o)},p(t,n){if(4&n[0]&&i!==(i=t[16][0]+"")&&y(s,i),4&n[0]){let s;for(r=t[16][1],s=0;s<r.length;s+=1){const l=Ms(t,r,s);c[s]?c[s].p(l,n):(c[s]=Xs(l),c[s].c(),c[s].m(e,o))}for(;s<c.length;s+=1)c[s].d(1);c.length=r.length}},d(t){t&&f(e),p(c,t)}}}function tl(t){let e,n,s,l,o=t[7].invocation.sampletable,i=[];for(let e=0;e<o.length;e+=1)i[e]=nl(Ls(t,o,e));return{c(){e=m("table"),(n=m("thead")).innerHTML="<tr><th>Channel</th> \n            <th>Sample set</th> \n            <th>Sample name</th> \n            <th>Sample group</th></tr>",s=g(),l=m("tbody");for(let t=0;t<i.length;t+=1)i[t].c();b(e,"class","table")},m(t,o){d(t,e,o),u(e,n),u(e,s),u(e,l);for(let t=0;t<i.length;t+=1)i[t].m(l,null)},p(t,e){if(4&e[0]){let n;for(o=t[7].invocation.sampletable,n=0;n<o.length;n+=1){const s=Ls(t,o,n);i[n]?i[n].p(s,e):(i[n]=nl(s),i[n].c(),i[n].m(l,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(t){t&&f(e),p(i,t)}}}function el(t){let e,n,s=t[13]+"";return{c(){e=m("td"),n=h(s)},m(t,s){d(t,e,s),u(e,n)},p(t,e){4&e[0]&&s!==(s=t[13]+"")&&y(n,s)},d(t){t&&f(e)}}}function nl(t){let e,n,s=t[10],l=[];for(let e=0;e<s.length;e+=1)l[e]=el(Es(t,s,e));return{c(){e=m("tr");for(let t=0;t<l.length;t+=1)l[t].c();n=g()},m(t,s){d(t,e,s);for(let t=0;t<l.length;t+=1)l[t].m(e,null);u(e,n)},p(t,o){if(4&o[0]){let i;for(s=t[10],i=0;i<s.length;i+=1){const r=Es(t,s,i);l[i]?l[i].p(r,o):(l[i]=el(r),l[i].c(),l[i].m(e,n))}for(;i<l.length;i+=1)l[i].d(1);l.length=s.length}},d(t){t&&f(e),p(l,t)}}}function sl(t){let e,n,s,l,o,i,r,c,a,$,v,w,x,_,k,j,C,O,T,I,N,A,S,W,E,L,M,z,P,R,U,q,D,F,H,B,Q,J,Y,G,K,V,X,Z,tt,et,nt,st,lt,ot,it,rt=t[7].name+"",ct=t[7].wf.name+"",at=t[7].wf.update+"",ut=t[7].nrfiles+"",dt=t[7].nrdsets+"",ft=t[7].quants.join(", ")+"",pt="Analysis without"!==t[7].log[0].slice(0,16),mt=t[7].invocation.params.join(" ")+"",ht=t[7].base_analysis.nfsid&&Fs(t),gt=t[7].base_analysis.nfsid&&Hs(t),$t=pt&&Bs(t),vt=t[7].log,bt=[];for(let e=0;e<vt.length;e+=1)bt[e]=Qs(qs(t,vt,e));let yt=t[7].storage_locs,wt=[];for(let e=0;e<yt.length;e+=1)wt[e]=Js(Us(t,yt,e));let xt=t[7].servedfiles,_t=[];for(let e=0;e<xt.length;e+=1)_t[e]=Ys(Rs(t,xt,e));let kt=t[7].invocation.files,jt=[];for(let e=0;e<kt.length;e+=1)jt[e]=Vs(Ps(t,kt,e));let Ct=t[7].invocation.multifiles,Ot=[];for(let e=0;e<Ct.length;e+=1)Ot[e]=Zs(zs(t,Ct,e));let Tt=t[7].invocation.sampletable&&tl(t);return{c(){e=m("h4"),n=h(rt),s=g(),ht&&ht.c(),l=g(),o=m("p"),(i=m("span")).textContent="Workflow version:",r=g(),c=h(ct),a=h(" - "),$=h(at),v=g(),w=m("p"),(x=m("span")).textContent="Input data:",_=g(),k=h(ut),j=h(" raw files from "),C=h(dt),O=h(" dataset(s) analysed\n      "),gt&&gt.c(),T=g(),I=m("p"),(N=m("span")).textContent="Quant type:",A=g(),S=h(ft),W=g(),E=m("p"),L=m("span"),M=h("Last lines of log  \n      "),$t&&$t.c(),z=h("\n      :"),P=g(),R=m("p");for(let t=0;t<bt.length;t+=1)bt[t].c();U=g(),q=m("div"),(D=m("p")).textContent="Output",F=g();for(let t=0;t<wt.length;t+=1)wt[t].c();H=g();for(let t=0;t<_t.length;t+=1)_t[t].c();B=g(),Q=m("div"),(J=m("p")).textContent="Input files",Y=g();for(let t=0;t<jt.length;t+=1)jt[t].c();G=g();for(let t=0;t<Ot.length;t+=1)Ot[t].c();K=g(),V=m("div"),(X=m("h6")).textContent="Other parameters",Z=g(),tt=m("code"),et=h(mt),nt=g(),st=m("div"),(lt=m("h6")).textContent="Samples:",ot=g(),Tt&&Tt.c(),it=g(),b(e,"class","title is-4"),b(i,"class","has-text-weight-bold"),b(x,"class","has-text-weight-bold"),b(N,"class","has-text-weight-bold"),b(L,"class","has-text-weight-bold"),b(R,"class","is-size-7 is-family-monospace"),b(D,"class","has-text-weight-bold"),b(q,"class","content"),b(J,"class","has-text-weight-bold"),b(Q,"class","content"),b(X,"class","title is-6"),b(V,"class","content"),b(lt,"class","title is-6"),b(st,"class","content")},m(t,f){d(t,e,f),u(e,n),d(t,s,f),ht&&ht.m(t,f),d(t,l,f),d(t,o,f),u(o,i),u(o,r),u(o,c),u(o,a),u(o,$),d(t,v,f),d(t,w,f),u(w,x),u(w,_),u(w,k),u(w,j),u(w,C),u(w,O),gt&&gt.m(w,null),d(t,T,f),d(t,I,f),u(I,N),u(I,A),u(I,S),d(t,W,f),d(t,E,f),u(E,L),u(L,M),$t&&$t.m(L,null),u(L,z),d(t,P,f),d(t,R,f);for(let t=0;t<bt.length;t+=1)bt[t].m(R,null);d(t,U,f),d(t,q,f),u(q,D),u(q,F);for(let t=0;t<wt.length;t+=1)wt[t].m(q,null);u(q,H);for(let t=0;t<_t.length;t+=1)_t[t].m(q,null);d(t,B,f),d(t,Q,f),u(Q,J),u(Q,Y);for(let t=0;t<jt.length;t+=1)jt[t].m(Q,null);u(Q,G);for(let t=0;t<Ot.length;t+=1)Ot[t].m(Q,null);d(t,K,f),d(t,V,f),u(V,X),u(V,Z),u(V,tt),u(tt,et),d(t,nt,f),d(t,st,f),u(st,lt),u(st,ot),Tt&&Tt.m(st,null),u(st,it)},p(t,e){if(4&e[0]&&rt!==(rt=t[7].name+"")&&y(n,rt),t[7].base_analysis.nfsid?ht?ht.p(t,e):((ht=Fs(t)).c(),ht.m(l.parentNode,l)):ht&&(ht.d(1),ht=null),4&e[0]&&ct!==(ct=t[7].wf.name+"")&&y(c,ct),4&e[0]&&at!==(at=t[7].wf.update+"")&&y($,at),4&e[0]&&ut!==(ut=t[7].nrfiles+"")&&y(k,ut),4&e[0]&&dt!==(dt=t[7].nrdsets+"")&&y(C,dt),t[7].base_analysis.nfsid?gt?gt.p(t,e):((gt=Hs(t)).c(),gt.m(w,null)):gt&&(gt.d(1),gt=null),4&e[0]&&ft!==(ft=t[7].quants.join(", ")+"")&&y(S,ft),4&e[0]&&(pt="Analysis without"!==t[7].log[0].slice(0,16)),pt?$t?$t.p(t,e):(($t=Bs(t)).c(),$t.m(L,z)):$t&&($t.d(1),$t=null),4&e[0]){let n;for(vt=t[7].log,n=0;n<vt.length;n+=1){const s=qs(t,vt,n);bt[n]?bt[n].p(s,e):(bt[n]=Qs(s),bt[n].c(),bt[n].m(R,null))}for(;n<bt.length;n+=1)bt[n].d(1);bt.length=vt.length}if(4&e[0]){let n;for(yt=t[7].storage_locs,n=0;n<yt.length;n+=1){const s=Us(t,yt,n);wt[n]?wt[n].p(s,e):(wt[n]=Js(s),wt[n].c(),wt[n].m(q,H))}for(;n<wt.length;n+=1)wt[n].d(1);wt.length=yt.length}if(4&e[0]){let n;for(xt=t[7].servedfiles,n=0;n<xt.length;n+=1){const s=Rs(t,xt,n);_t[n]?_t[n].p(s,e):(_t[n]=Ys(s),_t[n].c(),_t[n].m(q,null))}for(;n<_t.length;n+=1)_t[n].d(1);_t.length=xt.length}if(4&e[0]){let n;for(kt=t[7].invocation.files,n=0;n<kt.length;n+=1){const s=Ps(t,kt,n);jt[n]?jt[n].p(s,e):(jt[n]=Vs(s),jt[n].c(),jt[n].m(Q,G))}for(;n<jt.length;n+=1)jt[n].d(1);jt.length=kt.length}if(4&e[0]){let n;for(Ct=t[7].invocation.multifiles,n=0;n<Ct.length;n+=1){const s=zs(t,Ct,n);Ot[n]?Ot[n].p(s,e):(Ot[n]=Zs(s),Ot[n].c(),Ot[n].m(Q,null))}for(;n<Ot.length;n+=1)Ot[n].d(1);Ot.length=Ct.length}4&e[0]&&mt!==(mt=t[7].invocation.params.join(" ")+"")&&y(et,mt),t[7].invocation.sampletable?Tt?Tt.p(t,e):((Tt=tl(t)).c(),Tt.m(st,it)):Tt&&(Tt.d(1),Tt=null)},d(t){t&&f(e),t&&f(s),ht&&ht.d(t),t&&f(l),t&&f(o),t&&f(v),t&&f(w),gt&&gt.d(),t&&f(T),t&&f(I),t&&f(W),t&&f(E),$t&&$t.d(),t&&f(P),t&&f(R),p(bt,t),t&&f(U),t&&f(q),p(wt,t),p(_t,t),t&&f(B),t&&f(Q),p(jt,t),p(Ot,t),t&&f(K),t&&f(V),t&&f(nt),t&&f(st),Tt&&Tt.d()}}}function ll(t){let e,n=Object.entries(t[2]),s=[];for(let e=0;e<n.length;e+=1)s[e]=sl(Ds(t,n,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=$()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);d(t,e,n)},p(t,l){if(4&l[0]){let o;for(n=Object.entries(t[2]),o=0;o<n.length;o+=1){const i=Ds(t,n,o);s[o]?s[o].p(i,l):(s[o]=sl(i),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){p(s,t),t&&f(e)}}}function ol(t){let e;const n=new sn({props:{notif:t[1],closeWindow:t[0],$$slots:{default:[ll]},$$scope:{ctx:t}}});return{c(){K(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,e){const s={};2&e[0]&&(s.notif=t[1]),1&e[0]&&(s.closeWindow=t[0]),4&e[0]|512&e[1]&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(J(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function il(t,e,n){let{closeWindow:s}=e,{anaIds:l}=e,o={errors:{},messages:{}},i={};function r(t){n(2,i={}),async function(t){let e={};const s=t.map(async t=>{const s=await ht(`/show/analysis/${t}`);if(s.ok)e[t]=s;else{const t=`Something went wrong fetching analysis info: ${s.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},Lt,t)}});await Promise.all(s),n(2,i=Object.assign(i,e))}(t)}return T(async()=>{r(l)}),t.$set=(t=>{"closeWindow"in t&&n(0,s=t.closeWindow),"anaIds"in t&&n(3,l=t.anaIds)}),t.$$.update=(()=>{8&t.$$.dirty[0]&&r(l)}),[s,o,i,l]}class rl extends et{constructor(t){super(),tt(this,t,il,ol,o,{closeWindow:0,anaIds:3},[-1,-1])}}function cl(e){let n,s,l,o,i;return{c(){(n=m("a")).textContent="Delete analyses",s=g(),(l=m("a")).textContent="Undelete analyses",o=g(),(i=m("a")).textContent="Purge analyses",b(n,"class","button"),b(n,"disabled",""),b(l,"class","button"),b(l,"disabled",""),b(i,"class","button"),b(i,"disabled","")},m(t,e){d(t,n,e),d(t,s,e),d(t,l,e),d(t,o,e),d(t,i,e)},p:t,d(t){t&&f(n),t&&f(s),t&&f(l),t&&f(o),t&&f(i)}}}function al(e){let n,l,o,i,r,c;return{c(){(n=m("a")).textContent="Delete analyses",l=g(),(o=m("a")).textContent="Undelete analyses",i=g(),(r=m("a")).textContent="Purge analyses",b(n,"class","button"),b(o,"class","button"),b(r,"class","button")},m(t,a,u){d(t,n,a),d(t,l,a),d(t,o,a),d(t,i,a),d(t,r,a),u&&s(c),c=[v(n,"click",e[11]),v(o,"click",e[12]),v(r,"click",e[13])]},p:t,d(t){t&&f(n),t&&f(l),t&&f(o),t&&f(i),t&&f(r),s(c)}}}function ul(t){let e;const n=new Ws({props:{toggleWindow:t[23]}});return{c(){K(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,e){const s={};4&e&&(s.toggleWindow=t[23]),n.$set(s)},i(t){e||(J(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function dl(t){let e;const n=new rl({props:{closeWindow:t[24],anaIds:t[4]}});return{c(){K(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,e){const s={};16&e&&(s.closeWindow=t[24]),16&e&&(s.anaIds=t[4]),n.$set(s)},i(t){e||(J(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function fl(t){let e,n,s,l,o,i,r,c,a,u,p,h,y;const w=new De({props:{tabshow:"Analyses",notif:t[1]}});function x(t,e){return t[0].length?al:cl}let _=x(t),k=_(t);function j(e){t[18].call(null,e)}function C(e){t[19].call(null,e)}function O(e){t[20].call(null,e)}function T(e){t[21].call(null,e)}let I={tab:"Analyses",fetchUrl:"/show/analyses",findUrl:"/find/analyses",getdetails:ml,fixedbuttons:t[7],fields:t[6],inactive:["deleted","purged"],statecolors:t[9]};void 0!==t[5]&&(I.items=t[5]),void 0!==t[3]&&(I.treatItems=t[3]),void 0!==t[1]&&(I.notif=t[1]),void 0!==t[0]&&(I.selected=t[0]);const N=new je({props:I});S.push(()=>G(N,"items",j)),S.push(()=>G(N,"treatItems",C)),S.push(()=>G(N,"notif",O)),S.push(()=>G(N,"selected",T)),N.$on("detailview",t[10]),N.$on("rowAction",t[22]);let A=t[2]&&ul(t),W=t[4]&&dl(t);return{c(){K(w.$$.fragment),e=g(),k.c(),n=g(),(s=m("a")).textContent="Upload FASTA",l=g(),K(N.$$.fragment),a=g(),A&&A.c(),u=g(),W&&W.c(),p=$(),b(s,"class","button")},m(o,i,r){V(w,o,i),d(o,e,i),k.m(o,i),d(o,n,i),d(o,s,i),d(o,l,i),V(N,o,i),d(o,a,i),A&&A.m(o,i),d(o,u,i),W&&W.m(o,i),d(o,p,i),h=!0,r&&y(),y=v(s,"click",t[17])},p(t,[e]){const s={};2&e&&(s.notif=t[1]),w.$set(s),_===(_=x(t))&&k?k.p(t,e):(k.d(1),(k=_(t))&&(k.c(),k.m(n.parentNode,n)));const l={};!o&&32&e&&(o=!0,l.items=t[5],P(()=>o=!1)),!i&&8&e&&(i=!0,l.treatItems=t[3],P(()=>i=!1)),!r&&2&e&&(r=!0,l.notif=t[1],P(()=>r=!1)),!c&&1&e&&(c=!0,l.selected=t[0],P(()=>c=!1)),N.$set(l),t[2]?A?(A.p(t,e),J(A,1)):((A=ul(t)).c(),J(A,1),A.m(u.parentNode,u)):A&&(B(),Y(A,1,1,()=>{A=null}),Q()),t[4]?W?(W.p(t,e),J(W,1)):((W=dl(t)).c(),J(W,1),W.m(p.parentNode,p)):W&&(B(),Y(W,1,1,()=>{W=null}),Q())},i(t){h||(J(w.$$.fragment,t),J(N.$$.fragment,t),J(A),J(W),h=!0)},o(t){Y(w.$$.fragment,t),Y(N.$$.fragment,t),Y(A),Y(W),h=!1},d(t){X(w,t),t&&f(e),k.d(t),t&&f(n),t&&f(s),t&&f(l),X(N,t),t&&f(a),A&&A.d(t),t&&f(u),W&&W.d(t),t&&f(p),y()}}}function pl(t){window.open(`/analysis/${t}`,"_blank")}async function ml(t){const e=await ht(`/show/analysis/${t}`),n=e.servedfiles.map(([t,e])=>`<div><a href="analysis/showfile/${t}" target="_blank">${e}</a></div>`).join("\n");return`\n    <p><span class="has-text-weight-bold">Workflow version:</span> ${e.wf.update}</p>\n    <p>${e.nrfiles} raw files from ${e.nrdsets} dataset(s) analysed</p>\n    <p><span class="has-text-weight-bold">Quant type:</span> ${e.quants.join(", ")}</p>\n    <p>${n}</p>\n    <p><span class="has-text-weight-bold">Last lines of log:</span></p>\n    <p class="is-family-monospace">${e.log.join("<br>")}</p>\n  `}function hl(t,e,n){let s,l,o=[],i={errors:{},messages:{}},r=!1,c=!1;function a(t){s("/analysis/stop/","job for analysis","stopping",t=>{f(t.id)},[t])}function u(t){s("/analysis/start/","job for analysis","starting",t=>{refreshJob(t.id)},[t])}function d(t,e){({edit:pl,"stop job":a,"run job":u})[t](e)}async function f(t){const e=await ht(`/refresh/analysis/${t}`);if(e.ok)n(5,l[t]=Object.assign(l[t],e),l);else{const s=`Something went wrong trying to refresh analysis data for ${t}: ${e.error}`;n(1,i.errors[s]=1,i),setTimeout(function(t){n(1,i.errors[t]=0,i)},Lt,s)}}return[o,i,r,s,c,l,[{id:"jobstate",name:"__hourglass-half",type:"state",multi:!1,links:"jobid",linkroute:"#/jobs"},{id:"name",name:"Analysis name",type:"str",multi:!1},{id:"files",name:"",help:"Input files",type:"icon",icon:"database",multi:!1,links:"fn_ids",linkroute:"#/files"},{id:"datasets",name:"",help:"Datasets",type:"icon",icon:"clipboard-list",multi:!1,links:"dset_ids",linkroute:"#/datasets"},{id:"wf",name:"Workflow",type:"str",multi:!1,links:"wflink"},{id:"usr",name:"Users",type:"str",multi:!1},{id:"date",name:"Date",type:"str",multi:!1},{id:"actions",name:"Actions",type:"button",multi:!0}],[{name:"__redo",alt:"Refresh analysis info",action:f}],d,{jobstate:{wait:"has-text-grey-light",pending:"has-text-info",error:"has-text-danger",processing:"has-text-warning",revoking:"has-text-grey-dark",done:"has-text-success"}},function(t){n(4,c=t.detail.ids)},function(){s("/analysis/delete/","analysis","deleting",t=>{t.deleted=!0},o)},function(){s("/analysis/undelete/","analysis","undeleting",t=>{t.deleted=!1},o)},function(){s("/analysis/purge/","analysis","purging",t=>{t.deleted=!0},o)},a,u,f,t=>n(2,r=!1===r),function(t){n(5,l=t)},function(t){n(3,s=t)},function(t){n(1,i=t)},function(t){n(0,o=t)},t=>d(t.detail.action,t.detail.id),t=>n(2,r=!1===r),()=>{n(4,c=!1)}]}function gl(e){let n,s,l,o,i;return{c(){(n=m("a")).textContent="Retire projects",s=g(),(l=m("a")).textContent="Reactivate projects",o=g(),(i=m("a")).textContent="Purge projects",b(n,"class","button"),b(n,"title","Move projects to cold storage (delete)"),b(n,"disabled",""),b(l,"class","button"),b(l,"title","Move projects to active storage (undelete)"),b(l,"disabled",""),b(i,"class","button"),b(i,"title","PERMANENTLY delete projects from active and cold storage"),b(i,"disabled","")},m(t,e){d(t,n,e),d(t,s,e),d(t,l,e),d(t,o,e),d(t,i,e)},p:t,d(t){t&&f(n),t&&f(s),t&&f(l),t&&f(o),t&&f(i)}}}function $l(t){let e,n,l,o,i,r;function c(t,e){return t[3]?bl:vl}let a=c(t),u=a(t);return{c(){(e=m("a")).textContent="Retire projects",n=g(),(l=m("a")).textContent="Reactivate projects",o=g(),u.c(),i=$(),b(e,"class","button"),b(e,"title","Move projects to cold storage (delete)"),b(l,"class","button"),b(l,"title","Move projects to active storage (undelete)")},m(c,a,f){d(c,e,a),d(c,n,a),d(c,l,a),d(c,o,a),u.m(c,a),d(c,i,a),f&&s(r),r=[v(e,"click",t[9]),v(l,"click",t[10])]},p(t,e){a===(a=c(t))&&u?u.p(t,e):(u.d(1),(u=a(t))&&(u.c(),u.m(i.parentNode,i)))},d(t){t&&f(e),t&&f(n),t&&f(l),t&&f(o),u.d(t),t&&f(i),s(r)}}}function vl(e){let n,s;return{c(){(n=m("a")).textContent="Purge projects",b(n,"class","button"),b(n,"title","PERMANENTLY delete projects from active and cold storage")},m(t,l,o){d(t,n,l),o&&s(),s=v(n,"click",e[8])},p:t,d(t){t&&f(n),s()}}}function bl(e){let n,s;return{c(){(n=m("a")).textContent="Are you sure? Purge projects",b(n,"class","button is-danger is-light"),b(n,"title","PERMANENTLY delete projects from active and cold storage")},m(t,l,o){d(t,n,l),o&&s(),s=v(n,"click",e[11])},p:t,d(t){t&&f(n),s()}}}function yl(t){let e,n,s,l,o,i;const r=new De({props:{tabshow:"Projects",notif:t[1]}});function c(t,e){return t[0].length?$l:gl}let a=c(t),u=a(t);function p(e){t[14].call(null,e)}function m(e){t[15].call(null,e)}function h(e){t[16].call(null,e)}let $={tab:"Projects",fetchUrl:"/show/projects",findUrl:"/find/projects",getdetails:wl,fixedbuttons:t[7],fields:t[5],inactive:t[4],statecolors:t[6]};void 0!==t[2]&&($.treatItems=t[2]),void 0!==t[1]&&($.notif=t[1]),void 0!==t[0]&&($.selected=t[0]);const v=new je({props:$});return S.push(()=>G(v,"treatItems",p)),S.push(()=>G(v,"notif",m)),S.push(()=>G(v,"selected",h)),v.$on("detailview",t[17]),{c(){K(r.$$.fragment),e=g(),u.c(),n=g(),K(v.$$.fragment)},m(t,s){V(r,t,s),d(t,e,s),u.m(t,s),d(t,n,s),V(v,t,s),i=!0},p(t,[e]){const i={};2&e&&(i.notif=t[1]),r.$set(i),a===(a=c(t))&&u?u.p(t,e):(u.d(1),(u=a(t))&&(u.c(),u.m(n.parentNode,n)));const d={};!s&&4&e&&(s=!0,d.treatItems=t[2],P(()=>s=!1)),!l&&2&e&&(l=!0,d.notif=t[1],P(()=>l=!1)),!o&&1&e&&(o=!0,d.selected=t[0],P(()=>o=!1)),v.$set(d)},i(t){i||(J(r.$$.fragment,t),J(v.$$.fragment,t),i=!0)},o(t){Y(r.$$.fragment,t),Y(v.$$.fragment,t),i=!1},d(t){X(r,t),t&&f(e),u.d(t),t&&f(n),X(v,t)}}}async function wl(t){const e=await ht(`/show/project/${t}`);return`\n    <p><span class="has-text-weight-bold">Storage amount:</span> ${e.stored_total_xbytes}</p>\n    <p><span class="has-text-weight-bold">Owners:</span> ${Object.values(e.owners).join(", ")}</p>\n    <hr>\n    ${Object.entries(e.nrstoredfiles).map(t=>`<div>${t[1]} stored files of type ${t[0]}</div>`).join("")}\n    <div>Instrument(s) used: <b>${e.instruments.join(", ")}</b></div>\n    `}function xl(t,e,n){let s,l,o=[],i={errors:{},messages:{}},r=!1;return[o,i,s,l,["inactive"],[{id:"name",name:"Name",type:"str",multi:!1},{id:"ptype",name:"Type",type:"str",multi:!1},{id:"start",name:"Registered",type:"str",multi:!1},{id:"lastactive",name:"Last active",type:"str",multi:!1}],{storestate:{cold:"is-info",purged:"is-danger",complete:"is-success","active-only":"is-warning",new:"is-warning",empty:"is-light",broken:"is-light"},jobstates:{wait:"has-text-grey-light",pending:"has-text-info",error:"has-text-danger",processing:"has-text-warning",done:"has-text-success"}},[],function(){n(3,l=!0),setTimeout(()=>{n(3,l=!1)},Lt)},function(){s("datasets/archive/project/","project","archiving",t=>{t.inactive=!0},o)},function(){s("datasets/undelete/project/","project","reactivating",t=>{t.inactive=!1},o)},function(){s("datasets/purge/project/","project","purging",t=>{t.inactive=!0},o)},r,function(t){r=t.detail.ids},function(t){n(2,s=t)},function(t){n(1,i=t)},function(t){n(0,o=t)},function(e){N(t,e)}]}const _l={"/":Qn,"/datasets":Qn,"/jobs":class extends et{constructor(t){super(),tt(this,t,Gn,Jn,o,{})}},"/projects":class extends et{constructor(t){super(),tt(this,t,xl,yl,o,{})}},"/files":class extends et{constructor(t){super(),tt(this,t,us,cs,o,{})}},"/analyses":class extends et{constructor(t){super(),tt(this,t,hl,fl,o,{})}}};function kl(t){let e,n,s,l,o,i=t[0].purgable_analyses&&jl(t),r=t[0].old_purgable_analyses&&Cl(t);return{c(){e=m("article"),n=m("div"),(s=m("h5")).textContent="Admin news",l=g(),i&&i.c(),o=g(),r&&r.c(),b(s,"class","title is-5"),b(n,"class","message-body"),b(e,"class","message is-info")},m(t,c){d(t,e,c),u(e,n),u(n,s),u(n,l),i&&i.m(n,null),u(n,o),r&&r.m(n,null)},p(t,e){t[0].purgable_analyses?i?i.p(t,e):((i=jl(t)).c(),i.m(n,o)):i&&(i.d(1),i=null),t[0].old_purgable_analyses?r?r.p(t,e):((r=Cl(t)).c(),r.m(n,null)):r&&(r.d(1),r=null)},d(t){t&&f(e),i&&i.d(),r&&r.d()}}}function jl(t){let e,n,s,l,o,i,r,c=t[0].purgable_analyses.length+"";return{c(){e=m("div"),n=h("There are "),s=m("a"),l=h(c),o=h(" analyses"),r=h(" that can be purged"),b(s,"target","_blank"),b(s,"href",i=Tl(t[0].purgable_analyses))},m(t,i){d(t,e,i),u(e,n),u(e,s),u(s,l),u(s,o),u(e,r)},p(t,e){1&e&&c!==(c=t[0].purgable_analyses.length+"")&&y(l,c),1&e&&i!==(i=Tl(t[0].purgable_analyses))&&b(s,"href",i)},d(t){t&&f(e)}}}function Cl(t){let e,n,s,l,o,i,r,c=t[0].old_purgable_analyses.length+"",a=t[0].olddef+"";return{c(){e=m("div"),n=m("a"),s=h(c),l=h(" purgable analyses"),i=h(" are older than "),r=h(a),b(n,"target","_blank"),b(n,"href",o=Tl(t[0].old_purgable_analyses))},m(t,o){d(t,e,o),u(e,n),u(n,s),u(n,l),u(e,i),u(e,r)},p(t,e){1&e&&c!==(c=t[0].old_purgable_analyses.length+"")&&y(s,c),1&e&&o!==(o=Tl(t[0].old_purgable_analyses))&&b(n,"href",o),1&e&&a!==(a=t[0].olddef+"")&&y(r,a)},d(t){t&&f(e)}}}function Ol(t){let e,n,s,l=t[0]&&kl(t);const o=new pt({props:{routes:_l}});return{c(){e=m("div"),l&&l.c(),n=g(),K(o.$$.fragment),b(e,"class","container")},m(t,i){d(t,e,i),l&&l.m(e,null),u(e,n),V(o,e,null),s=!0},p(t,[s]){t[0]?l?l.p(t,s):((l=kl(t)).c(),l.m(e,n)):l&&(l.d(1),l=null)},i(t){s||(J(o.$$.fragment,t),s=!0)},o(t){Y(o.$$.fragment,t),s=!1},d(t){t&&f(e),l&&l.d(),X(o)}}}function Tl(t){return`#/analyses/?ids=${t.join(",")}`}function Il(t,e,n){let s=!1;function l(){!async function(){const t=await ht("/messages/");"error"in t?console.log(t):(n(0,s={}),n(0,s.olddef=t.olddef,s),n(0,s.purgable_analyses=t.purgable_analyses,s),n(0,s.old_purgable_analyses=t.old_purgable_analyses,s))}()}return T(async()=>{l()}),[s]}return new class extends et{constructor(t){super(),tt(this,t,Il,Ol,o,{})}}({target:document.querySelector("#apps")})}();
//# sourceMappingURL=bundle.js.map
