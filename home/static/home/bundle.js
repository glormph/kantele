var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function l(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function r(t,e,n){t.$$.on_destroy.push(i(e,n))}function c(t,e,n,s){return t[1]&&s?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](s(e))):n.ctx}function a(t){return null==t?"":t}function u(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function g(){return h(" ")}function $(){return h("")}function v(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.data!==e&&(t.data=e)}function w(t,e){(null!=e||t.value)&&(t.value=e)}function x(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}}function _(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}class k{constructor(t,e=null){this.e=m("div"),this.a=e,this.u(t)}m(t,e=null){for(let n=0;n<this.n.length;n+=1)f(t,this.n[n],e);this.t=t}u(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}p(t){this.d(),this.u(t),this.m(this.t,this.a)}d(){this.n.forEach(d)}}let j;function C(t){j=t}function O(){if(!j)throw new Error("Function called outside component initialization");return j}function A(t){O().$$.on_mount.push(t)}function T(){const t=O();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const l=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);s.slice().forEach(e=>{e.call(t,l)})}}}function N(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const S=[],E=[],I=[],W=[],L=Promise.resolve();let M=!1;function P(t){I.push(t)}function U(t){W.push(t)}let q=!1;const z=new Set;function R(){if(!q){q=!0;do{for(let t=0;t<S.length;t+=1){const e=S[t];C(e),D(e.$$)}for(S.length=0;E.length;)E.pop()();for(let t=0;t<I.length;t+=1){const e=I[t];z.has(e)||(z.add(e),e())}I.length=0}while(S.length);for(;W.length;)W.pop()();M=!1,q=!1,z.clear()}}function D(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(P)}}const F=new Set;let H;function B(){H={r:0,c:[],p:H}}function Q(){H.r||s(H.c),H=H.p}function Y(t,e){t&&t.i&&(F.delete(t),t.i(e))}function J(t,e,n,s){if(t&&t.o){if(F.has(t))return;F.add(t),H.c.push(()=>{F.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}}function K(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function G(t){t&&t.c()}function V(t,n,o){const{fragment:i,on_mount:r,on_destroy:c,after_update:a}=t.$$;i&&i.m(n,o),P(()=>{const n=r.map(e).filter(l);c?c.push(...n):s(n),t.$$.on_mount=[]}),a.forEach(P)}function X(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(t,e){-1===t.$$.dirty[0]&&(S.push(t),M||(M=!0,L.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function tt(e,l,o,i,r,c,a=[-1]){const u=j;C(e);const f=l.props||{},p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:a};let m=!1;if(p.ctx=o?o(e,f,(t,n,...s)=>{const l=s.length?s[0]:n;return p.ctx&&r(p.ctx[t],p.ctx[t]=l)&&(p.bound[t]&&p.bound[t](l),m&&Z(e,t)),n}):[],p.update(),m=!0,s(p.before_update),p.fragment=!!i&&i(p.ctx),l.target){if(l.hydrate){const t=(h=l.target,Array.from(h.childNodes));p.fragment&&p.fragment.l(t),t.forEach(d)}else p.fragment&&p.fragment.c();l.intro&&Y(e.$$.fragment),V(e,l.target,l.anchor),R()}var h;C(u)}class et{$destroy(){X(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const nt=[];function st(t,e){return{subscribe:lt(t,e).subscribe}}function lt(e,n=t){let s;const l=[];function i(t){if(o(e,t)&&(e=t,s)){const t=!nt.length;for(let t=0;t<l.length;t+=1){const n=l[t];n[1](),nt.push(n,e)}if(t){for(let t=0;t<nt.length;t+=2)nt[t][0](nt[t+1]);nt.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(o,r=t){const c=[o,r];return l.push(c),1===l.length&&(s=n(i)||t),o(e),()=>{const t=l.indexOf(c);-1!==t&&l.splice(t,1),0===l.length&&(s(),s=null)}}}}function ot(e,n,o){const r=!Array.isArray(e),c=r?[e]:e,a=n.length<2;return st(o,e=>{let o=!1;const u=[];let f=0,d=t;const p=()=>{if(f)return;d();const s=n(r?u[0]:u,e);a?e(s):d=l(s)?s:t},m=c.map((t,e)=>i(t,t=>{u[e]=t,f&=~(1<<e),o&&p()},()=>{f|=1<<e}));return o=!0,p(),function(){s(m),d()}})}function it(t){let e,n;var s=t[0];if(s)var l=new s({});return{c(){l&&G(l.$$.fragment),e=$()},m(t,s){l&&V(l,t,s),f(t,e,s),n=!0},p(t,n){if(s!==(s=t[0])){if(l){B();const t=l;J(t.$$.fragment,1,0,()=>{X(t,1)}),Q()}s?(G((l=new s({})).$$.fragment),Y(l.$$.fragment,1),V(l,e.parentNode,e)):l=null}},i(t){n||(l&&Y(l.$$.fragment,t),n=!0)},o(t){l&&J(l.$$.fragment,t),n=!1},d(t){t&&d(e),l&&X(l,t)}}}function rt(t){let e,n;var s=t[0];function l(t){return{props:{params:t[1]}}}if(s)var o=new s(l(t));return{c(){o&&G(o.$$.fragment),e=$()},m(t,s){o&&V(o,t,s),f(t,e,s),n=!0},p(t,n){const i={};if(2&n&&(i.params=t[1]),s!==(s=t[0])){if(o){B();const t=o;J(t.$$.fragment,1,0,()=>{X(t,1)}),Q()}s?(G((o=new s(l(t))).$$.fragment),Y(o.$$.fragment,1),V(o,e.parentNode,e)):o=null}else s&&o.$set(i)},i(t){n||(o&&Y(o.$$.fragment,t),n=!0)},o(t){o&&J(o.$$.fragment,t),n=!1},d(t){t&&d(e),o&&X(o,t)}}}function ct(t){let e,n,s,l;const o=[rt,it],i=[];function r(t,e){return t[1]?0:1}return e=r(t),n=i[e]=o[e](t),{c(){n.c(),s=$()},m(t,n){i[e].m(t,n),f(t,s,n),l=!0},p(t,[l]){let c=e;(e=r(t))===c?i[e].p(t,l):(B(),J(i[c],1,1,()=>{i[c]=null}),Q(),(n=i[e])||(n=i[e]=o[e](t)).c(),Y(n,1),n.m(s.parentNode,s))},i(t){l||(Y(n),l=!0)},o(t){J(n),l=!1},d(t){i[e].d(t),t&&d(s)}}}function at(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let s="";return n>-1&&(s=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:s}}const ut=st(at(),function(t){const e=()=>{t(at())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}),ft=(ot(ut,t=>t.location),ot(ut,t=>t.querystring));function dt(e,n,s){let l,o=t;r(e,ut,t=>s(4,l=t)),e.$$.on_destroy.push(()=>o());let{routes:i={}}=n,{prefix:c=""}=n;class a{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:n,keys:s}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,s,l,o,i=[],r="",c=t.split("/");for(c[0]||c.shift();l=c.shift();)"*"===(n=l[0])?(i.push("wild"),r+="/(.*)"):":"===n?(s=l.indexOf("?",1),o=l.indexOf(".",1),i.push(l.substring(1,~s?s:~o?o:l.length)),r+=~s&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(r+=(~s?"?":"")+"\\"+l.substring(o))):r+="/"+l;return{keys:i,pattern:new RegExp("^"+r+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.route,this.conditions=e.conditions||[],this.userData=e.userData):(this.component=e,this.conditions=[],this.userData=void 0),this._pattern=n,this._keys=s}match(t){c&&t.startsWith(c)&&(t=t.substr(c.length)||"/");const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let s=0;for(;s<this._keys.length;)n[this._keys[s]]=e[++s]||null;return n}checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!this.conditions[e](t))return!1;return!0}}const u=[];i instanceof Map?i.forEach((t,e)=>{u.push(new a(e,t))}):Object.keys(i).forEach(t=>{u.push(new a(t,i[t]))});let f=null,d=null;const p=T(),m=(t,e)=>{setTimeout(()=>{p(t,e)},0)};return e.$set=(t=>{"routes"in t&&s(2,i=t.routes),"prefix"in t&&s(3,c=t.prefix)}),e.$$.update=(()=>{if(17&e.$$.dirty){s(0,f=null);let t=0;for(;!f&&t<u.length;){const e=u[t].match(l.location);if(e){const n={component:u[t].component,name:u[t].component.name,location:l.location,querystring:l.querystring,userData:u[t].userData};if(!u[t].checkConditions(n)){m("conditionsFailed",n);break}s(0,f=u[t].component),e&&"object"==typeof e&&Object.keys(e).length?s(1,d=e):s(1,d=null),m("routeLoaded",n)}t++}}}),[f,d,i,c]}class pt extends et{constructor(t){super(),tt(this,t,dt,ct,o,{routes:2,prefix:3})}}async function mt(t){let e;try{e=await t.json()}catch(e){return{ok:!1,error:"Server error encountered",status:t.status}}return e.ok=t.ok,e}async function ht(t){let e;try{e=await fetch(t)}catch{return{ok:!1,error:"Kantele encountered a network error",status:!1}}return await mt(e)}async function gt(t,e){let n;try{n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch{return{ok:!1,error:"Kantele encountered a network error",status:!1}}return await mt(n)}const $t=5e3;function vt(t){let e;return{c(){e=h(t[0])},m(t,n){f(t,e,n)},p(t,n){1&n&&y(e,t[0])},d(t){t&&d(e)}}}function bt(t){let e,n;return{c(){e=m("del"),n=h(t[0])},m(t,s){f(t,e,s),u(e,n)},p(t,e){1&e&&y(n,t[0])},d(t){t&&d(e)}}}function yt(t){let e,n,s;function l(t,s){return(null==e||131&s)&&(e=!(!(t[1].confirm&&t[1].confirm.indexOf(t[0])>-1)||t[7])),e?Ot:((null==n||3&s)&&(n=!!(t[1].confirm&&t[1].confirm.indexOf(t[0])>-1)),n?Ct:jt)}let o=l(t,-1),i=o(t);return{c(){i.c(),s=$()},m(t,e){i.m(t,e),f(t,s,e)},p(t,e){o===(o=l(t,e))&&i?i.p(t,e):(i.d(1),(i=o(t))&&(i.c(),i.m(s.parentNode,s)))},d(t){i.d(t),t&&d(s)}}}function wt(t){let e,n,s;return{c(){e=m("span"),b(n=m("i"),"class","fa fa-square"),b(e,"class",s=`icon is-small ${t[5][t[0]]}`)},m(t,s){f(t,e,s),u(e,n)},p(t,n){33&n&&s!==(s=`icon is-small ${t[5][t[0]]}`)&&b(e,"class",s)},d(t){t&&d(e)}}}function xt(t){let e,n,s,l;return{c(){e=m("span"),b(n=m("i"),"class",s=`fa fa-${t[4]}`),b(e,"title",t[3]),b(e,"class",l="icon is-small is-info")},m(t,s){f(t,e,s),u(e,n)},p(t,l){16&l&&s!==(s=`fa fa-${t[4]}`)&&b(n,"class",s),8&l&&b(e,"title",t[3])},d(t){t&&d(e)}}}function _t(t){let e;function n(t,e){return t[0]?Tt:At}let s=n(t),l=s(t);return{c(){e=m("span"),l.c(),b(e,"class","has-icon")},m(t,n){f(t,e,n),l.m(e,null)},p(t,o){s!==(s=n(t))&&(l.d(1),(l=s(t))&&(l.c(),l.m(e,null)))},d(t){t&&d(e),l.d()}}}function kt(t){let e;function n(t,e){return t[5]?St:Nt}let s=n(t),l=s(t);return{c(){l.c(),e=$()},m(t,n){l.m(t,n),f(t,e,n)},p(t,o){s===(s=n(t))&&l?l.p(t,o):(l.d(1),(l=s(t))&&(l.c(),l.m(e.parentNode,e)))},d(t){l.d(t),t&&d(e)}}}function jt(t){let e,n,s;return{c(){e=m("button"),n=h(t[0]),b(e,"class","button is-small")},m(l,o,i){f(l,e,o),u(e,n),i&&s(),s=v(e,"click",t[11])},p(t,e){1&e&&y(n,t[0])},d(t){t&&d(e),s()}}}function Ct(t){let e,n,s,l;return{c(){e=m("button"),n=h(t[0]),s=h(" - Are you sure?"),b(e,"class","button is-small is-danger is-light")},m(o,i,r){f(o,e,i),u(e,n),u(e,s),r&&l(),l=v(e,"click",t[10])},p(t,e){1&e&&y(n,t[0])},d(t){t&&d(e),l()}}}function Ot(t){let e,n,s;return{c(){e=m("button"),n=h(t[0]),b(e,"class","button is-small")},m(l,o,i){f(l,e,o),u(e,n),i&&s(),s=v(e,"click",t[9])},p(t,e){1&e&&y(n,t[0])},d(t){t&&d(e),s()}}}function At(t){let e;return{c(){e=h("-")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function Tt(t){let e;return{c(){b(e=m("i"),"class","fa fa-check has-text-success")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function Nt(t){let e,n;return{c(){e=m("span"),n=h(t[0]),b(e,"class","tag is-info")},m(t,s){f(t,e,s),u(e,n)},p(t,e){1&e&&y(n,t[0])},d(t){t&&d(e)}}}function St(t){let e,n,s;return{c(){e=m("span"),n=h(t[0]),b(e,"class",s=`tag ${t[5][t[0]]}`)},m(t,s){f(t,e,s),u(e,n)},p(t,l){1&l&&y(n,t[0]),33&l&&s!==(s=`tag ${t[5][t[0]]}`)&&b(e,"class",s)},d(t){t&&d(e)}}}function Et(e){let n;function s(t,e){return"tag"===t[1].type?kt:"bool"===t[1].type?_t:"icon"===t[1].type?xt:"state"===t[1].type?wt:"button"===t[1].type?yt:t[6]?bt:vt}let l=s(e),o=l(e);return{c(){o.c(),n=$()},m(t,e){o.m(t,e),f(t,n,e)},p(t,[e]){l===(l=s(t))&&o?o.p(t,e):(o.d(1),(o=l(t))&&(o.c(),o.m(n.parentNode,n)))},i:t,o:t,d(t){o.d(t),t&&d(n)}}}function It(t,e,n){const s=T();let{value:l}=e,{field:o}=e,{rowid:i}=e,{help:r=""}=e,{icon:c}=e,{color:a}=e,{inactive:u}=e,f=!1;return t.$set=(t=>{"value"in t&&n(0,l=t.value),"field"in t&&n(1,o=t.field),"rowid"in t&&n(2,i=t.rowid),"help"in t&&n(3,r=t.help),"icon"in t&&n(4,c=t.icon),"color"in t&&n(5,a=t.color),"inactive"in t&&n(6,u=t.inactive)}),[l,o,i,r,c,a,u,f,s,function(){n(7,f=!0),setTimeout(()=>{n(7,f=!1)},$t)},t=>s("rowAction",{id:i,action:l}),t=>s("rowAction",{id:i,action:l})]}class Wt extends et{constructor(t){super(),tt(this,t,It,Et,o,{value:0,field:1,rowid:2,help:3,icon:4,color:5,inactive:6})}}function Lt(t,e,n){const s=t.slice();return s[53]=e[n],s}function Mt(t,e,n){const s=t.slice();return s[53]=e[n],s}function Pt(t,e,n){const s=t.slice();return s[50]=e[n],s}function Ut(t,e,n){const s=t.slice();return s[58]=e[n],s}function qt(t,e,n){const s=t.slice();return s[46]=e[n][0],s[47]=e[n][1],s}function zt(t,e,n){const s=t.slice();return s[50]=e[n],s}function Rt(t){let e,n=t[50].name+"";return{c(){e=h(n)},m(t,n){f(t,e,n)},p(t,s){4&s[0]&&n!==(n=t[50].name+"")&&y(e,n)},d(t){t&&d(e)}}}function Dt(t){let e,n,s;return{c(){e=m("span"),b(n=m("i"),"class",s=a(`fa fa-${t[50].name.slice(2)}`)+" svelte-1xpxw1y"),b(e,"class","icon is-small")},m(t,s){f(t,e,s),u(e,n)},p(t,e){4&e[0]&&s!==(s=a(`fa fa-${t[50].name.slice(2)}`)+" svelte-1xpxw1y")&&b(n,"class",s)},d(t){t&&d(e)}}}function Ft(t){let e,n,s;function l(t,e){return(null==n||4&e[0])&&(n=!("__"!==t[50].name.slice(0,2))),n?Dt:Rt}let o=l(t,[-1]),i=o(t);return{c(){e=m("th"),i.c(),s=g()},m(t,n){f(t,e,n),i.m(e,null),u(e,s)},p(t,n){o===(o=l(t,n))&&i?i.p(t,n):(i.d(1),(i=o(t))&&(i.c(),i.m(e,s)))},d(t){t&&d(e),i.d()}}}function Ht(t){let e;return{c(){(e=m("div")).innerHTML='<i class="fa fa-spinner fa-pulse fa-2x"></i>',b(e,"class","has-text-centered spinner svelte-1xpxw1y")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function Bt(t){let e;function n(t,e){return t[10]?Qt:Yt}let s=n(t),l=s(t);return{c(){e=m("div"),l.c(),b(e,"class","box svelte-1xpxw1y")},m(t,n){f(t,e,n),l.m(e,null)},p(t,o){s===(s=n(t))&&l?l.p(t,o):(l.d(1),(l=s(t))&&(l.c(),l.m(e,null)))},d(t){t&&d(e),l.d()}}}function Qt(t){let e;return{c(){e=new k(t[11],null)},m(t,n){e.m(t,n)},p(t,n){2048&n[0]&&e.p(t[11])},d(t){t&&e.d()}}}function Yt(e){let n;return{c(){b(n=m("i"),"class","fa fa-spinner fa-pulse fa-2x")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function Jt(t){let e,n,s,l,o,i,r;function c(...e){return t[37](t[58],t[47],...e)}return{c(){e=m("a"),n=m("span"),s=m("i"),o=g(),b(s,"class",l=a(`fa fa-${t[58].name.slice(2)}`)+" svelte-1xpxw1y"),b(n,"class","icon has-text-info is-small"),b(e,"title",i=t[58].alt)},m(t,l,i){f(t,e,l),u(e,n),u(n,s),u(e,o),i&&r(),r=v(e,"click",c)},p(n,o){t=n,16&o[0]&&l!==(l=a(`fa fa-${t[58].name.slice(2)}`)+" svelte-1xpxw1y")&&b(s,"class",l),16&o[0]&&i!==(i=t[58].alt)&&b(e,"title",i)},d(t){t&&d(e),r()}}}function Kt(t){let e;function n(...e){return t[44](t[47],...e)}const s=new Wt({props:{value:t[47][t[50].id],rowid:t[46],inactive:t[5].some(n),help:t[50].help,icon:t[50].icon,field:t[50],color:t[3][t[50].id]}});return s.$on("rowAction",t[45]),{c(){G(s.$$.fragment)},m(t,n){V(s,t,n),e=!0},p(e,l){t=e;const o={};133&l[0]&&(o.value=t[47][t[50].id]),129&l[0]&&(o.rowid=t[46]),161&l[0]&&(o.inactive=t[5].some(n)),4&l[0]&&(o.help=t[50].help),4&l[0]&&(o.icon=t[50].icon),4&l[0]&&(o.field=t[50]),12&l[0]&&(o.color=t[3][t[50].id]),s.$set(o)},i(t){e||(Y(s.$$.fragment,t),e=!0)},o(t){J(s.$$.fragment,t),e=!1},d(t){X(s,t)}}}function Gt(t){let e,n,s=t[47][t[50].id],l=[];for(let e=0;e<s.length;e+=1)l[e]=Xt(Lt(t,s,e));const o=t=>J(l[t],1,1,()=>{l[t]=null});return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=$()},m(t,s){for(let e=0;e<l.length;e+=1)l[e].m(t,s);f(t,e,s),n=!0},p(t,n){if(173&n[0]){let i;for(s=t[47][t[50].id],i=0;i<s.length;i+=1){const o=Lt(t,s,i);l[i]?(l[i].p(o,n),Y(l[i],1)):(l[i]=Xt(o),l[i].c(),Y(l[i],1),l[i].m(e.parentNode,e))}for(B(),i=s.length;i<l.length;i+=1)o(i);Q()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)Y(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)J(l[t]);n=!1},d(t){p(l,t),t&&d(e)}}}function Vt(t){let e,n,s=(t[47][t[50].links].length||t[47][t[50].links]>0)&&Zt(t);return{c(){s&&s.c(),e=$()},m(t,l){s&&s.m(t,l),f(t,e,l),n=!0},p(t,n){t[47][t[50].links].length||t[47][t[50].links]>0?s?(s.p(t,n),Y(s,1)):((s=Zt(t)).c(),Y(s,1),s.m(e.parentNode,e)):s&&(B(),J(s,1,1,()=>{s=null}),Q())},i(t){n||(Y(s),n=!0)},o(t){J(s),n=!1},d(t){s&&s.d(t),t&&d(e)}}}function Xt(t){let e;function n(...e){return t[42](t[47],...e)}const s=new Wt({props:{value:t[53],rowid:t[46],inactive:t[5].some(n),help:t[50].help,icon:t[50].icon,field:t[50],color:t[3][t[50].id]}});return s.$on("rowAction",t[43]),{c(){G(s.$$.fragment)},m(t,n){V(s,t,n),e=!0},p(e,l){t=e;const o={};133&l[0]&&(o.value=t[53]),129&l[0]&&(o.rowid=t[46]),161&l[0]&&(o.inactive=t[5].some(n)),4&l[0]&&(o.help=t[50].help),4&l[0]&&(o.icon=t[50].icon),4&l[0]&&(o.field=t[50]),12&l[0]&&(o.color=t[3][t[50].id]),s.$set(o)},i(t){e||(Y(s.$$.fragment,t),e=!0)},o(t){J(s.$$.fragment,t),e=!1},d(t){X(s,t)}}}function Zt(t){let e,n,s,l,o;const i=[ee,te],r=[];function c(t,e){return t[50].multi?0:1}return n=c(t),s=r[n]=i[n](t),{c(){e=m("a"),s.c(),b(e,"href",l=`${t[50].linkroute}?ids=${t[47][t[50].links]}`)},m(t,s){f(t,e,s),r[n].m(e,null),o=!0},p(t,a){let u=n;(n=c(t))===u?r[n].p(t,a):(B(),J(r[u],1,1,()=>{r[u]=null}),Q(),(s=r[n])||(s=r[n]=i[n](t)).c(),Y(s,1),s.m(e,null)),(!o||133&a[0]&&l!==(l=`${t[50].linkroute}?ids=${t[47][t[50].links]}`))&&b(e,"href",l)},i(t){o||(Y(s),o=!0)},o(t){J(s),o=!1},d(t){t&&d(e),r[n].d()}}}function te(t){let e;function n(...e){return t[40](t[47],...e)}const s=new Wt({props:{value:t[47][t[50].id],rowid:t[46],inactive:t[5].some(n),help:t[50].help,icon:t[50].icon,field:t[50],color:t[3][t[50].id]}});return s.$on("rowAction",t[41]),{c(){G(s.$$.fragment)},m(t,n){V(s,t,n),e=!0},p(e,l){t=e;const o={};133&l[0]&&(o.value=t[47][t[50].id]),129&l[0]&&(o.rowid=t[46]),161&l[0]&&(o.inactive=t[5].some(n)),4&l[0]&&(o.help=t[50].help),4&l[0]&&(o.icon=t[50].icon),4&l[0]&&(o.field=t[50]),12&l[0]&&(o.color=t[3][t[50].id]),s.$set(o)},i(t){e||(Y(s.$$.fragment,t),e=!0)},o(t){J(s.$$.fragment,t),e=!1},d(t){X(s,t)}}}function ee(t){let e,n,s=t[47][t[50].id],l=[];for(let e=0;e<s.length;e+=1)l[e]=ne(Mt(t,s,e));const o=t=>J(l[t],1,1,()=>{l[t]=null});return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=$()},m(t,s){for(let e=0;e<l.length;e+=1)l[e].m(t,s);f(t,e,s),n=!0},p(t,n){if(173&n[0]){let i;for(s=t[47][t[50].id],i=0;i<s.length;i+=1){const o=Mt(t,s,i);l[i]?(l[i].p(o,n),Y(l[i],1)):(l[i]=ne(o),l[i].c(),Y(l[i],1),l[i].m(e.parentNode,e))}for(B(),i=s.length;i<l.length;i+=1)o(i);Q()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)Y(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)J(l[t]);n=!1},d(t){p(l,t),t&&d(e)}}}function ne(t){let e;function n(...e){return t[38](t[47],...e)}const s=new Wt({props:{value:t[53],rowid:t[46],inactive:t[5].some(n),help:t[50].help,icon:t[50].icon,field:t[50],color:t[3][t[50].id]}});return s.$on("rowAction",t[39]),{c(){G(s.$$.fragment)},m(t,n){V(s,t,n),e=!0},p(e,l){t=e;const o={};133&l[0]&&(o.value=t[53]),129&l[0]&&(o.rowid=t[46]),161&l[0]&&(o.inactive=t[5].some(n)),4&l[0]&&(o.help=t[50].help),4&l[0]&&(o.icon=t[50].icon),4&l[0]&&(o.field=t[50]),12&l[0]&&(o.color=t[3][t[50].id]),s.$set(o)},i(t){e||(Y(s.$$.fragment,t),e=!0)},o(t){J(s.$$.fragment,t),e=!1},d(t){X(s,t)}}}function se(t){let e,n,s,l;const o=[Vt,Gt,Kt],i=[];function r(t,e){return t[50].links?0:t[50].multi?1:2}return n=r(t),s=i[n]=o[n](t),{c(){e=m("td"),s.c()},m(t,s){f(t,e,s),i[n].m(e,null),l=!0},p(t,l){let c=n;(n=r(t))===c?i[n].p(t,l):(B(),J(i[c],1,1,()=>{i[c]=null}),Q(),(s=i[n])||(s=i[n]=o[n](t)).c(),Y(s,1),s.m(e,null))},i(t){l||(Y(s),l=!0)},o(t){J(s),l=!1},d(t){t&&d(e),i[n].d()}}}function le(t){let e,n,l,o,i,r,c,a,h,$,y,w,x,_=t[9]===t[46]&&Bt(t);function k(...e){return t[34](t[46],...e)}function j(...e){return t[35](t[46],...e)}let C=t[4],O=[];for(let e=0;e<C.length;e+=1)O[e]=Jt(Ut(t,C,e));let A=t[2],T=[];for(let e=0;e<A.length;e+=1)T[e]=se(Pt(t,A,e));const N=t=>J(T[t],1,1,()=>{T[t]=null});return{c(){e=m("tr"),n=m("td"),l=m("input"),i=g(),r=m("a"),(c=m("span")).innerHTML='<i class="fa fa-eye"></i>',a=g(),_&&_.c(),h=g();for(let t=0;t<O.length;t+=1)O[t].c();$=g();for(let t=0;t<T.length;t+=1)T[t].c();y=g(),b(l,"type","checkbox"),l.__value=o=t[47].id,l.value=l.__value,t[33][0].push(l),b(c,"class","has-text-info icon is-small")},m(o,d,p){f(o,e,d),u(e,n),u(n,l),l.checked=~t[1].indexOf(l.__value),u(n,i),u(n,r),u(r,c),u(r,a),_&&_.m(r,null),u(n,h);for(let t=0;t<O.length;t+=1)O[t].m(n,null);u(e,$);for(let t=0;t<T.length;t+=1)T[t].m(e,null);u(e,y),w=!0,p&&s(x),x=[v(l,"change",t[32]),v(r,"click",k),v(r,"mouseenter",j),v(r,"mouseleave",t[36])]},p(s,i){if(t=s,(!w||129&i[0]&&o!==(o=t[47].id))&&(l.__value=o),l.value=l.__value,2&i[0]&&(l.checked=~t[1].indexOf(l.__value)),t[9]===t[46]?_?_.p(t,i):((_=Bt(t)).c(),_.m(r,null)):_&&(_.d(1),_=null),145&i[0]){let e;for(C=t[4],e=0;e<C.length;e+=1){const s=Ut(t,C,e);O[e]?O[e].p(s,i):(O[e]=Jt(s),O[e].c(),O[e].m(n,null))}for(;e<O.length;e+=1)O[e].d(1);O.length=C.length}if(173&i[0]){let n;for(A=t[2],n=0;n<A.length;n+=1){const s=Pt(t,A,n);T[n]?(T[n].p(s,i),Y(T[n],1)):(T[n]=se(s),T[n].c(),Y(T[n],1),T[n].m(e,y))}for(B(),n=A.length;n<T.length;n+=1)N(n);Q()}},i(t){if(!w){for(let t=0;t<A.length;t+=1)Y(T[t]);w=!0}},o(t){T=T.filter(Boolean);for(let t=0;t<T.length;t+=1)J(T[t]);w=!1},d(n){n&&d(e),t[33][0].splice(t[33][0].indexOf(l),1),_&&_.d(),p(O,n),p(T,n),s(x)}}}function oe(t){let e,n,l,o,i,r,c,a,$,x,_,k,j,C,O,A,T,N,S,E=t[6].toLowerCase()+"",I=t[2],W=[];for(let e=0;e<I.length;e+=1)W[e]=Ft(zt(t,I,e));let L=t[13]&&Ht(),M=t[7].map(t[31]),P=[];for(let e=0;e<M.length;e+=1)P[e]=le(qt(t,M,e));const U=t=>J(P[t],1,1,()=>{P[t]=null});return{c(){e=m("div"),n=m("input"),l=h("Search deleted "),o=h(E),i=g(),r=m("input"),a=g(),$=m("table"),x=m("thead"),_=m("tr"),k=m("th"),j=m("input"),C=g();for(let t=0;t<W.length;t+=1)W[t].c();O=g(),L&&L.c(),A=g(),T=m("tbody");for(let t=0;t<P.length;t+=1)P[t].c();b(n,"type","checkbox"),b(r,"class","input is-small"),b(r,"type","text"),b(r,"placeholder",c=`Type a query and press enter to search ${t[6].toLowerCase()}`),b(j,"type","checkbox"),b($,"class","table"),b(e,"class","content is-small")},m(c,d,p){f(c,e,d),u(e,n),n.checked=t[12],u(e,l),u(e,o),u(e,i),u(e,r),w(r,t[8]),u(e,a),u(e,$),u($,x),u(x,_),u(_,k),u(k,j),u(_,C);for(let t=0;t<W.length;t+=1)W[t].m(_,null);u($,O),L&&L.m($,null),u($,A),u($,T);for(let t=0;t<P.length;t+=1)P[t].m(T,null);N=!0,p&&s(S),S=[v(n,"change",t[29]),v(r,"keyup",t[15]),v(r,"input",t[30]),v(j,"click",t[14])]},p(t,e){if(4096&e[0]&&(n.checked=t[12]),(!N||64&e[0])&&E!==(E=t[6].toLowerCase()+"")&&y(o,E),(!N||64&e[0]&&c!==(c=`Type a query and press enter to search ${t[6].toLowerCase()}`))&&b(r,"placeholder",c),256&e[0]&&r.value!==t[8]&&w(r,t[8]),4&e[0]){let n;for(I=t[2],n=0;n<I.length;n+=1){const s=zt(t,I,n);W[n]?W[n].p(s,e):(W[n]=Ft(s),W[n].c(),W[n].m(_,null))}for(;n<W.length;n+=1)W[n].d(1);W.length=I.length}if(t[13]?L||((L=Ht()).c(),L.m($,A)):L&&(L.d(1),L=null),200383&e[0]){let n;for(M=t[7].map(t[31]),n=0;n<M.length;n+=1){const s=qt(t,M,n);P[n]?(P[n].p(s,e),Y(P[n],1)):(P[n]=le(s),P[n].c(),Y(P[n],1),P[n].m(T,null))}for(B(),n=M.length;n<P.length;n+=1)U(n);Q()}},i(t){if(!N){for(let t=0;t<M.length;t+=1)Y(P[t]);N=!0}},o(t){P=P.filter(Boolean);for(let t=0;t<P.length;t+=1)J(P[t]);N=!1},d(t){t&&d(e),p(W,t),L&&L.d(),p(P,t),s(S)}}}function ie(t,e,n){let s;r(t,ft,t=>n(24,s=t));let{items:l={}}=e,{fields:o}=e,{statecolors:i}=e,{fixedbuttons:c=[]}=e,{selected:a}=e,{getdetails:u}=e,{inactive:f=[]}=e,{fetchUrl:d}=e,{findUrl:p}=e,{notif:m}=e,{tab:h}=e,{treatItems:g=async function(t,e,s,o,i){for(let r of i){const i=await gt(t,{item_id:r});if(i.ok){const t=`${e} with id ${r} queued for ${s}`;n(18,m.messages[t]=1,m),setTimeout(function(t){n(18,m.messages[t]=0,m)},$t,t),o&&o(l[r]),n(0,l)}else{const t=`Something went wrong ${s} ${e} with id ${r}: ${i.error}`;n(18,m.errors[t]=1,m),setTimeout(function(t){n(18,m.errors[t]=0,m)},$t,t)}}}}=e;const $=T();let v,b=[],y="",w=!1,x=!1,_="",k=!1,j=!1;function C(t){I(t.length?d+`?ids=${t.join(",")}`:d)}function O(t){I(`${p}?q=${t}&deleted=${k}`)}async function S(t){n(9,w=t),n(10,x=!1),n(11,_=await u(t)),n(10,x=!0)}function E(t){$("detailview",{ids:[t]})}async function I(t){n(13,j=!0);const e=v=new Object,s=await ht(t);if(n(13,j=!1),"error"in s){const t=`While fetching ${h.toLowerCase()}: ${s.error}`;n(18,m.errors[t]=1,m),setTimeout(function(t){n(18,m.errors[t]=0,m)},$t,t)}else{if(e!==v)return;n(7,b=[]),n(0,l={}),n(0,l=s.items),n(7,b=s.order)}}A(async()=>{let t;try{t=Object.fromEntries(s.split("&").map(t=>t.split("=")))}catch{return void C([])}"ids"in t?C(t.ids.split(",")):"q"in t?(n(12,k="deleted"in t&&["true",1,"True"].indexOf(t.deleted)>-1),n(8,y=t.q.split(",").join(" ")),O(t.q)):C([])});const W=[[]];return t.$set=(t=>{"items"in t&&n(0,l=t.items),"fields"in t&&n(2,o=t.fields),"statecolors"in t&&n(3,i=t.statecolors),"fixedbuttons"in t&&n(4,c=t.fixedbuttons),"selected"in t&&n(1,a=t.selected),"getdetails"in t&&n(19,u=t.getdetails),"inactive"in t&&n(5,f=t.inactive),"fetchUrl"in t&&n(20,d=t.fetchUrl),"findUrl"in t&&n(21,p=t.findUrl),"notif"in t&&n(18,m=t.notif),"tab"in t&&n(6,h=t.tab),"treatItems"in t&&n(22,g=t.treatItems)}),[l,a,o,i,c,f,h,b,y,w,x,_,k,j,function(){a.length<b.length?n(1,a=b):n(1,a=[])},function(t){if(13===t.keyCode){const t=y.split(" ").join(",");!function(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");setTimeout(()=>{window.location.hash=("#"==t.charAt(0)?"":"#")+t},0)}(`#/${h.toLowerCase()}?q=${t}&deleted=${k}`),O(t)}},S,E,m,u,d,p,g,v,s,$,C,O,I,function(){k=this.checked,n(12,k)},function(){y=this.value,n(8,y)},t=>[t,l[t]],function(){a=function(t){const e=[];for(let n=0;n<t.length;n+=1)t[n].checked&&e.push(t[n].__value);return e}(W[0]),n(1,a)},W,(t,e)=>E(t),(t,e)=>S(t),t=>n(9,w=!1),(t,e,n)=>t.action(e.id),(t,e)=>t[e],function(e){N(t,e)},(t,e)=>t[e],function(e){N(t,e)},(t,e)=>t[e],function(e){N(t,e)},(t,e)=>t[e],function(e){N(t,e)}]}class re extends et{constructor(t){super(),tt(this,t,ie,oe,o,{items:0,fields:2,statecolors:3,fixedbuttons:4,selected:1,getdetails:19,inactive:5,fetchUrl:20,findUrl:21,notif:18,tab:6,treatItems:22},[-1,-1,-1])}}function ce(t,e,n){const s=t.slice();return s[3]=e[n],s}function ae(t,e,n){const s=t.slice();return s[6]=e[n],s}function ue(t,e,n){const s=t.slice();return s[9]=e[n],s}function fe(t){let e,n=Object.entries(t[1].errors).filter(be).map(ye),s=[];for(let e=0;e<n.length;e+=1)s[e]=de(ue(t,n,e));return{c(){e=m("div");for(let t=0;t<s.length;t+=1)s[t].c();b(e,"class","notification is-danger is-light errormsg svelte-e70ios")},m(t,n){f(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,l){if(2&l){let o;for(n=Object.entries(t[1].errors).filter(be).map(ye),o=0;o<n.length;o+=1){const i=ue(t,n,o);s[o]?s[o].p(i,l):(s[o]=de(i),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){t&&d(e),p(s,t)}}}function de(t){let e,n,s=t[9]+"";return{c(){e=m("div"),n=h(s)},m(t,s){f(t,e,s),u(e,n)},p(t,e){2&e&&s!==(s=t[9]+"")&&y(n,s)},d(t){t&&d(e)}}}function pe(t){let e,n=Object.entries(t[1].messages).filter(we).map(xe),s=[];for(let e=0;e<n.length;e+=1)s[e]=me(ae(t,n,e));return{c(){e=m("div");for(let t=0;t<s.length;t+=1)s[t].c();b(e,"class","notification is-success is-light errormsg svelte-e70ios")},m(t,n){f(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,l){if(2&l){let o;for(n=Object.entries(t[1].messages).filter(we).map(xe),o=0;o<n.length;o+=1){const i=ae(t,n,o);s[o]?s[o].p(i,l):(s[o]=me(i),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){t&&d(e),p(s,t)}}}function me(t){let e,n,s=t[6]+"";return{c(){e=m("div"),n=h(s)},m(t,s){f(t,e,s),u(e,n)},p(t,e){2&e&&s!==(s=t[6]+"")&&y(n,s)},d(t){t&&d(e)}}}function he(t){let e,n,s,l,o,i,r,c=t[3]+"";return{c(){e=m("li"),n=m("a"),s=m("span"),l=h(c),i=g(),b(n,"href",o=`#/${t[3].toLowerCase()}`),b(e,"class",r=t[0]===t[3]?"is-active":"")},m(t,o){f(t,e,o),u(e,n),u(n,s),u(s,l),u(e,i)},p(t,n){1&n&&r!==(r=t[0]===t[3]?"is-active":"")&&b(e,"class",r)},d(t){t&&d(e)}}}function ge(e){let n,s,l,o,i,r=Object.values(e[1].errors).some(ve),c=Object.values(e[1].messages).some($e),a=r&&fe(e),h=c&&pe(e),$=e[2],v=[];for(let t=0;t<$.length;t+=1)v[t]=he(ce(e,$,t));return{c(){a&&a.c(),n=g(),h&&h.c(),s=g(),l=m("div"),o=m("div"),i=m("ul");for(let t=0;t<v.length;t+=1)v[t].c();b(o,"class","tabs is-toggle is-centered is-small"),b(l,"class","content")},m(t,e){a&&a.m(t,e),f(t,n,e),h&&h.m(t,e),f(t,s,e),f(t,l,e),u(l,o),u(o,i);for(let t=0;t<v.length;t+=1)v[t].m(i,null)},p(t,[e]){if(2&e&&(r=Object.values(t[1].errors).some(ve)),r?a?a.p(t,e):((a=fe(t)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),2&e&&(c=Object.values(t[1].messages).some($e)),c?h?h.p(t,e):((h=pe(t)).c(),h.m(s.parentNode,s)):h&&(h.d(1),h=null),5&e){let n;for($=t[2],n=0;n<$.length;n+=1){const s=ce(t,$,n);v[n]?v[n].p(s,e):(v[n]=he(s),v[n].c(),v[n].m(i,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=$.length}},i:t,o:t,d(t){a&&a.d(t),t&&d(n),h&&h.d(t),t&&d(s),t&&d(l),p(v,t)}}}const $e=t=>1===t,ve=t=>1===t,be=t=>1==t[1],ye=t=>t[0],we=t=>1==t[1],xe=t=>t[0];function _e(t,e,n){let{tabshow:s}=e,{notif:l}=e;return t.$set=(t=>{"tabshow"in t&&n(0,s=t.tabshow),"notif"in t&&n(1,l=t.notif)}),[s,l,["Datasets","Projects","Analyses","Files","Jobs"]]}class ke extends et{constructor(t){super(),tt(this,t,_e,ge,o,{tabshow:0,notif:1})}}function je(t,e,n){const s=t.slice();return s[5]=e[n],s}function Ce(t,e,n){const s=t.slice();return s[8]=e[n],s}function Oe(t){let e,n=Object.entries(t[0].errors).filter(We).map(Le),s=[];for(let e=0;e<n.length;e+=1)s[e]=Ae(Ce(t,n,e));return{c(){e=m("div");for(let t=0;t<s.length;t+=1)s[t].c();b(e,"class","notification is-danger is-light errormsg svelte-1jth1a0")},m(t,n){f(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,l){if(1&l){let o;for(n=Object.entries(t[0].errors).filter(We).map(Le),o=0;o<n.length;o+=1){const i=Ce(t,n,o);s[o]?s[o].p(i,l):(s[o]=Ae(i),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){t&&d(e),p(s,t)}}}function Ae(t){let e,n,s=t[8]+"";return{c(){e=m("div"),n=h(s)},m(t,s){f(t,e,s),u(e,n)},p(t,e){1&e&&s!==(s=t[8]+"")&&y(n,s)},d(t){t&&d(e)}}}function Te(t){let e,n=Object.entries(t[0].messages).filter(Me).map(Pe),s=[];for(let e=0;e<n.length;e+=1)s[e]=Ne(je(t,n,e));return{c(){e=m("div");for(let t=0;t<s.length;t+=1)s[t].c();b(e,"class","notification is-success is-light errormsg svelte-1jth1a0")},m(t,n){f(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,l){if(1&l){let o;for(n=Object.entries(t[0].messages).filter(Me).map(Pe),o=0;o<n.length;o+=1){const i=je(t,n,o);s[o]?s[o].p(i,l):(s[o]=Ne(i),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){t&&d(e),p(s,t)}}}function Ne(t){let e,n,s=t[5]+"";return{c(){e=m("div"),n=h(s)},m(t,s){f(t,e,s),u(e,n)},p(t,e){1&e&&s!==(s=t[5]+"")&&y(n,s)},d(t){t&&d(e)}}}function Se(t){let e,n,o,i,r,a,p,h,$=Object.values(t[0].errors).some(Ie),y=Object.values(t[0].messages).some(Ee),w=$&&Oe(t),x=y&&Te(t);const _=t[4].default,k=function(t,e,n,s){if(t){const l=c(t,e,n,s);return t[0](l)}}(_,t,t[3],null);return{c(){e=m("div"),n=m("div"),w&&w.c(),o=g(),x&&x.c(),i=g(),k&&k.c(),r=g(),(a=m("button")).innerHTML='<span class="icon"><i class="fa fa-times"></i></span>',b(a,"class","button closebutton svelte-1jth1a0"),b(a,"aria-label","close"),b(n,"class","box modalbox svelte-1jth1a0"),b(e,"class","detailbox svelte-1jth1a0")},m(c,d,m){f(c,e,d),u(e,n),w&&w.m(n,null),u(n,o),x&&x.m(n,null),u(n,i),k&&k.m(n,null),u(n,r),u(n,a),p=!0,m&&s(h),h=[v(window,"keyup",t[2]),v(a,"click",function(){l(t[1]())&&t[1]().apply(this,arguments)})]},p(e,[s]){t=e,1&s&&($=Object.values(t[0].errors).some(Ie)),$?w?w.p(t,s):((w=Oe(t)).c(),w.m(n,o)):w&&(w.d(1),w=null),1&s&&(y=Object.values(t[0].messages).some(Ee)),y?x?x.p(t,s):((x=Te(t)).c(),x.m(n,i)):x&&(x.d(1),x=null),k&&k.p&&8&s&&k.p(c(_,t,t[3],null),function(t,e,n,s){if(t[2]&&s){const l=t[2](s(n));if(void 0===e.dirty)return l;if("object"==typeof l){const t=[],n=Math.max(e.dirty.length,l.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|l[s];return t}return e.dirty|l}return e.dirty}(_,t[3],s,null))},i(t){p||(Y(k,t),p=!0)},o(t){J(k,t),p=!1},d(t){t&&d(e),w&&w.d(),x&&x.d(),k&&k.d(t),s(h)}}}const Ee=t=>1===t,Ie=t=>1===t,We=t=>1==t[1],Le=t=>t[0],Me=t=>1==t[1],Pe=t=>t[0];function Ue(t,e,n){let{notif:s}=e,{closeWindow:l}=e;let{$$slots:o={},$$scope:i}=e;return t.$set=(t=>{"notif"in t&&n(0,s=t.notif),"closeWindow"in t&&n(1,l=t.closeWindow),"$$scope"in t&&n(3,i=t.$$scope)}),[s,l,function(t){27===t.keyCode&&l()},i,o]}class qe extends et{constructor(t){super(),tt(this,t,Ue,Se,o,{notif:0,closeWindow:1})}}function ze(t,e,n){const s=t.slice();return s[21]=e[n],s}function Re(t,e,n){const s=t.slice();return s[24]=e[n],s}function De(t,e,n){const s=t.slice();return s[27]=e[n][0],s[28]=e[n][1],s}function Fe(t,e,n){const s=t.slice();return s[31]=e[n],s}function He(t,e,n){const s=t.slice();return s[34]=e[n],s}function Be(t,e,n){const s=t.slice();return s[37]=e[n],s}function Qe(t,e,n){const s=t.slice();return s[17]=e[n][0],s[18]=e[n][1],s[19]=e,s[20]=n,s}function Ye(t){let e,n,s,l,o=t[37][1]+"",i=t[37][0]+"";return{c(){e=m("div"),n=h(o),s=h(" stored files of type "),l=h(i)},m(t,o){f(t,e,o),u(e,n),u(e,s),u(e,l)},p(t,e){4&e[0]&&o!==(o=t[37][1]+"")&&y(n,o),4&e[0]&&i!==(i=t[37][0]+"")&&y(l,i)},d(t){t&&d(e)}}}function Je(t){let e,n,s,l;function o(t,e){return"ready"==t[18].mzmlable?Ge:"blocked"==t[18].mzmlable?Ke:void 0}let i=o(t),r=i&&i(t);return{c(){e=m("div"),(n=m("label")).textContent="Convert to mzml using version:",s=g(),l=m("div"),r&&r.c(),b(n,"class","label"),b(l,"class","control"),b(e,"class","field")},m(t,o){f(t,e,o),u(e,n),u(e,s),u(e,l),r&&r.m(l,null)},p(t,e){i===(i=o(t))&&r?r.p(t,e):(r&&r.d(1),(r=i&&i(t))&&(r.c(),r.m(l,null)))},d(t){t&&d(e),r&&r.d()}}}function Ke(e){let n;return{c(){(n=m("button")).textContent="Convert job queued",n.disabled=!0,b(n,"class","button")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function Ge(t){let e,n,l,o,i,r=t[18].pwiz_versions,c=[];for(let e=0;e<r.length;e+=1)c[e]=Ve(He(t,r,e));function a(){t[10].call(n,t[18])}function h(...e){return t[11](t[17],...e)}return{c(){e=m("div"),n=m("select");for(let t=0;t<c.length;t+=1)c[t].c();l=g(),(o=m("button")).textContent="Convert!",void 0===t[18].previous_or_latest_pwiz&&P(a),b(e,"class","select"),b(o,"class","button")},m(r,d,p){f(r,e,d),u(e,n);for(let t=0;t<c.length;t+=1)c[t].m(n,null);x(n,t[18].previous_or_latest_pwiz),f(r,l,d),f(r,o,d),p&&s(i),i=[v(n,"change",a),v(o,"click",h)]},p(e,s){if(t=e,4&s[0]){let e;for(r=t[18].pwiz_versions,e=0;e<r.length;e+=1){const l=He(t,r,e);c[e]?c[e].p(l,s):(c[e]=Ve(l),c[e].c(),c[e].m(n,null))}for(;e<c.length;e+=1)c[e].d(1);c.length=r.length}4&s[0]&&x(n,t[18].previous_or_latest_pwiz)},d(t){t&&d(e),p(c,t),t&&d(l),t&&d(o),s(i)}}}function Ve(t){let e,n,s,l=t[34]+"";return{c(){e=m("option"),n=h(l),e.__value=s=t[34],e.value=e.__value},m(t,s){f(t,e,s),u(e,n)},p(t,o){4&o[0]&&l!==(l=t[34]+"")&&y(n,l),4&o[0]&&s!==(s=t[34])&&(e.__value=s),e.value=e.__value},d(t){t&&d(e)}}}function Xe(t){let e,n,s,l,o,i,r,c,a,h,$,y=t[18].refine_versions,w=[];for(let e=0;e<y.length;e+=1)w[e]=Ze(Fe(t,y,e));function _(){t[12].call(c,t[18])}function k(t,e){return(null==h||4&e[0])&&(h=!!(["ready","partly"].indexOf(t[18].refinable)>-1)),h?en:"blocked"==t[18].refinable?tn:void 0}let j=k(t,[-1]),C=j&&j(t);return{c(){e=m("div"),(n=m("label")).textContent="Refine precursor data",s=g(),(l=m("label")).textContent="Adjust prec.mass in case of MS drift (visible in QC)",o=g(),i=m("div"),r=m("div"),c=m("select");for(let t=0;t<w.length;t+=1)w[t].c();a=g(),C&&C.c(),b(n,"class","label"),b(l,"class","label is-small"),void 0===t[18].previous_or_latest_pwiz&&P(_),b(r,"class","select"),b(i,"class","control"),b(e,"class","field")},m(d,p,m){f(d,e,p),u(e,n),u(e,s),u(e,l),u(e,o),u(e,i),u(i,r),u(r,c);for(let t=0;t<w.length;t+=1)w[t].m(c,null);x(c,t[18].previous_or_latest_pwiz),u(i,a),C&&C.m(i,null),m&&$(),$=v(c,"change",_)},p(e,n){if(t=e,4&n[0]){let e;for(y=t[18].refine_versions,e=0;e<y.length;e+=1){const s=Fe(t,y,e);w[e]?w[e].p(s,n):(w[e]=Ze(s),w[e].c(),w[e].m(c,null))}for(;e<w.length;e+=1)w[e].d(1);w.length=y.length}4&n[0]&&x(c,t[18].previous_or_latest_pwiz),j===(j=k(t,n))&&C?C.p(t,n):(C&&C.d(1),(C=j&&j(t))&&(C.c(),C.m(i,null)))},d(t){t&&d(e),p(w,t),C&&C.d(),$()}}}function Ze(t){let e,n,s,l=t[31]+"";return{c(){e=m("option"),n=h(l),e.__value=s=t[31],e.value=e.__value},m(t,s){f(t,e,s),u(e,n)},p(t,o){4&o[0]&&l!==(l=t[31]+"")&&y(n,l),4&o[0]&&s!==(s=t[31])&&(e.__value=s),e.value=e.__value},d(t){t&&d(e)}}}function tn(e){let n;return{c(){(n=m("button")).textContent="Refinery job queued",n.disabled=!0,b(n,"class","button")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function en(t){let e,n;function s(...e){return t[13](t[17],...e)}return{c(){(e=m("button")).textContent="Start refinery",b(e,"class","button")},m(t,l,o){f(t,e,l),o&&n(),n=v(e,"click",s)},p(e,n){t=e},d(t){t&&d(e),n()}}}function nn(t){let e,n,s,l,o,i,r,c,a=t[28]+"";function p(...e){return t[14](t[17],t[27],...e)}return{c(){e=m("div"),n=m("div"),s=m("span"),l=h(a),o=g(),i=m("a"),r=g(),b(s,"class","tag is-light"),b(i,"class","tag is-info is-delete"),b(n,"class","tags has-addons"),b(e,"class","control")},m(t,a,d){f(t,e,a),u(e,n),u(n,s),u(s,l),u(n,o),u(n,i),u(e,r),d&&c(),c=v(i,"click",p)},p(e,n){t=e,4&n[0]&&a!==(a=t[28]+"")&&y(l,a)},d(t){t&&d(e),c()}}}function sn(t){let e,n,s,l=t[18].allowners[t[24]]+"";return{c(){e=m("option"),n=h(l),e.__value=s=t[24],e.value=e.__value},m(t,s){f(t,e,s),u(e,n)},p(t,o){4&o[0]&&l!==(l=t[18].allowners[t[24]]+"")&&y(n,l),4&o[0]&&s!==(s=t[24])&&(e.__value=s),e.value=e.__value},d(t){t&&d(e)}}}function ln(t){let e,n,s,l,o=t[18].qtype.name+"";return{c(){e=m("div"),(n=m("span")).textContent="Quant type",s=g(),l=h(o),b(n,"class","has-text-weight-bold")},m(t,o){f(t,e,o),u(e,n),u(e,s),u(e,l)},p(t,e){4&e[0]&&o!==(o=t[18].qtype.name+"")&&y(l,o)},d(t){t&&d(e)}}}function on(t){let e,n,s,l,o,i=t[21]+"";return{c(){e=m("div"),n=m("div"),s=m("span"),l=h(i),o=g(),b(s,"class","tag is-light"),b(n,"class","tags"),b(e,"class","control")},m(t,i){f(t,e,i),u(e,n),u(n,s),u(s,l),u(e,o)},p(t,e){4&e[0]&&i!==(i=t[21]+"")&&y(l,i)},d(t){t&&d(e)}}}function rn(t){let e,n,l,o,i,r,c,a,$,w,_,k,j,C,O,A,T,N,S,E,I,W,L,M,U,q,z,R,D,F,H,B,Q=t[18].storage_loc+"",Y=Object.entries(t[18].nrstoredfiles),J=[];for(let e=0;e<Y.length;e+=1)J[e]=Ye(Be(t,Y,e));let K=t[18].mzmlable&&Je(t),G=t[18].refinable&&Xe(t),V=Object.entries(t[18].owners),X=[];for(let e=0;e<V.length;e+=1)X[e]=nn(De(t,V,e));let Z=un(t[18].allowners,t[18].owners),tt=[];for(let e=0;e<Z.length;e+=1)tt[e]=sn(Re(t,Z,e));function et(){t[15].call(W,t[17])}function nt(...e){return t[16](t[17],...e)}let st=t[18].qtype&&ln(t),lt=t[18].instruments,ot=[];for(let e=0;e<lt.length;e+=1)ot[e]=on(ze(t,lt,e));return{c(){e=m("p"),(n=m("span")).textContent="Storage location:",l=g(),o=h(Q),i=g(),r=m("hr"),c=g(),a=m("div"),$=m("div"),w=m("div");for(let t=0;t<J.length;t+=1)J[t].c();_=g(),K&&K.c(),k=g(),G&&G.c(),j=g(),C=m("div"),(O=m("div")).textContent="Owners",A=g(),T=m("div");for(let t=0;t<X.length;t+=1)X[t].c();N=g(),S=m("div"),E=m("div"),I=m("div"),W=m("select"),(L=m("option")).textContent="Add an owner";for(let t=0;t<tt.length;t+=1)tt[t].c();U=g(),q=m("div"),st&&st.c(),z=g(),(R=m("div")).textContent="Instrument(s)",D=g(),F=m("div");for(let t=0;t<ot.length;t+=1)ot[t].c();H=g(),b(n,"class","has-text-weight-bold"),b(w,"class","field"),b($,"class","column"),b(O,"class","has-text-weight-bold"),b(T,"class","field is-grouped is-grouped-multiline"),L.disabled=!0,L.__value=M=!1,L.value=L.__value,void 0===t[3][t[17]]&&P(et),b(I,"class","select"),b(E,"class","control"),b(S,"class","field"),b(C,"class","column"),b(R,"class","has-text-weight-bold"),b(F,"class","field is-grouped is-grouped-multiline"),b(q,"class","column"),b(a,"class","columns")},m(d,p,m){f(d,e,p),u(e,n),u(e,l),u(e,o),f(d,i,p),f(d,r,p),f(d,c,p),f(d,a,p),u(a,$),u($,w);for(let t=0;t<J.length;t+=1)J[t].m(w,null);u($,_),K&&K.m($,null),u($,k),G&&G.m($,null),u(a,j),u(a,C),u(C,O),u(C,A),u(C,T);for(let t=0;t<X.length;t+=1)X[t].m(T,null);u(C,N),u(C,S),u(S,E),u(E,I),u(I,W),u(W,L);for(let t=0;t<tt.length;t+=1)tt[t].m(W,null);x(W,t[3][t[17]]),u(a,U),u(a,q),st&&st.m(q,null),u(q,z),u(q,R),u(q,D),u(q,F);for(let t=0;t<ot.length;t+=1)ot[t].m(F,null);u(a,H),m&&s(B),B=[v(W,"change",et),v(W,"change",nt)]},p(e,n){if(t=e,4&n[0]&&Q!==(Q=t[18].storage_loc+"")&&y(o,Q),4&n[0]){let e;for(Y=Object.entries(t[18].nrstoredfiles),e=0;e<Y.length;e+=1){const s=Be(t,Y,e);J[e]?J[e].p(s,n):(J[e]=Ye(s),J[e].c(),J[e].m(w,null))}for(;e<J.length;e+=1)J[e].d(1);J.length=Y.length}if(t[18].mzmlable?K?K.p(t,n):((K=Je(t)).c(),K.m($,k)):K&&(K.d(1),K=null),t[18].refinable?G?G.p(t,n):((G=Xe(t)).c(),G.m($,null)):G&&(G.d(1),G=null),68&n[0]){let e;for(V=Object.entries(t[18].owners),e=0;e<V.length;e+=1){const s=De(t,V,e);X[e]?X[e].p(s,n):(X[e]=nn(s),X[e].c(),X[e].m(T,null))}for(;e<X.length;e+=1)X[e].d(1);X.length=V.length}if(4&n[0]){let e;for(Z=un(t[18].allowners,t[18].owners),e=0;e<Z.length;e+=1){const s=Re(t,Z,e);tt[e]?tt[e].p(s,n):(tt[e]=sn(s),tt[e].c(),tt[e].m(W,null))}for(;e<tt.length;e+=1)tt[e].d(1);tt.length=Z.length}if(12&n[0]&&x(W,t[3][t[17]]),t[18].qtype?st?st.p(t,n):((st=ln(t)).c(),st.m(q,z)):st&&(st.d(1),st=null),4&n[0]){let e;for(lt=t[18].instruments,e=0;e<lt.length;e+=1){const s=ze(t,lt,e);ot[e]?ot[e].p(s,n):(ot[e]=on(s),ot[e].c(),ot[e].m(F,null))}for(;e<ot.length;e+=1)ot[e].d(1);ot.length=lt.length}},d(t){t&&d(e),t&&d(i),t&&d(r),t&&d(c),t&&d(a),p(J,t),K&&K.d(),G&&G.d(),p(X,t),p(tt,t),st&&st.d(),p(ot,t),s(B)}}}function cn(t){let e,n=Object.entries(t[2]),s=[];for(let e=0;e<n.length;e+=1)s[e]=rn(Qe(t,n,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=$()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);f(t,e,n)},p(t,l){if(124&l[0]){let o;for(n=Object.entries(t[2]),o=0;o<n.length;o+=1){const i=Qe(t,n,o);s[o]?s[o].p(i,l):(s[o]=rn(i),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){p(s,t),t&&d(e)}}}function an(t){let e;const n=new qe({props:{notif:t[1],closeWindow:t[0],$$slots:{default:[cn]},$$scope:{ctx:t}}});return{c(){G(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,e){const s={};2&e[0]&&(s.notif=t[1]),1&e[0]&&(s.closeWindow=t[0]),12&e[0]|512&e[1]&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(Y(n.$$.fragment,t),e=!0)},o(t){J(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function un(t,e){const n=Object.keys(t).concat(Object.keys(e)).reduce(function(t,e){return t.delete(e)||t.add(e),t},new Set);return Array.from(n)}function fn(t,e,n){let{closeWindow:s}=e,{dsetIds:l}=e,o={errors:{},messages:{}},i={},r=Object.fromEntries(l.map(t=>[t,!1]));async function c(t){const e=await gt("createmzml/",{dsid:t});if(e.ok){n(2,i[t].mzmlable="blocked",i);const e="Queued dataset for mzML conversion";n(1,o.messages[e]=1,o),setTimeout(function(t){n(1,o.messages[t]=0,o)},$t,e)}else{const t=`Something went wrong trying to queue dataset mzML conversion: ${e.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},$t,t)}}async function a(t){const e=await gt("refinemzml/",{dsid:t});if(e.ok){n(2,i[t].refinable="blocked",i);const e="Queued dataset for mzML precursor refining";n(1,o.messages[e]=1,o),setTimeout(function(t){n(1,o.messages[t]=0,o)},$t,e)}else{const t=`Something went wrong trying to queue precursor refining: ${e.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},$t,t)}}async function u(t,e,s){const l=await gt("datasets/save/owner/",{dataset_id:t,op:s,owner:e});if(l.ok)f([t]);else{const t=`Something went wrong trying to change owner of the dataset: ${l.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},$t,t)}n(3,r[t]=!1,r)}async function f(t){let e={};const s=t.map(async t=>{const s=await ht(`/show/dataset/${t}`);if(s.ok)e[t]=s;else{const t=`Something went wrong fetching dataset info: ${s.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},$t,t)}});await Promise.all(s);n(2,i=Object.assign(i,e))}function d(t){n(2,i={}),f(t)}A(async()=>{d(l)});return t.$set=(t=>{"closeWindow"in t&&n(0,s=t.closeWindow),"dsetIds"in t&&n(7,l=t.dsetIds)}),t.$$.update=(()=>{128&t.$$.dirty[0]&&d(l)}),[s,o,i,r,c,a,u,l,f,d,function(t){t.previous_or_latest_pwiz=_(this),n(2,i)},(t,e)=>c(t),function(t){t.previous_or_latest_pwiz=_(this),n(2,i)},(t,e)=>a(t),(t,e,n)=>u(t,e,"del"),function(t){r[t]=_(this),n(3,r),n(2,i)},(t,e)=>u(t,r[t],"add")]}class dn extends et{constructor(t){super(),tt(this,t,fn,an,o,{closeWindow:0,dsetIds:7},[-1,-1])}}function pn(e){let n,s,l,o,i,r,c;return{c(){(n=m("a")).textContent="Analyze datasets",s=g(),(l=m("a")).textContent="Retire datasets",o=g(),(i=m("a")).textContent="Reactivate datasets",r=g(),(c=m("a")).textContent="Purge datasets",b(n,"class","button"),b(n,"title","Search MS data"),b(n,"disabled",""),b(l,"class","button"),b(l,"title","Move datasets to cold storage (delete)"),b(l,"disabled",""),b(i,"class","button"),b(i,"title","Move datasets to active storage (undelete)"),b(i,"disabled",""),b(c,"class","button"),b(c,"title","PERMANENTLY delete datasets from active and cold storage"),b(c,"disabled","")},m(t,e){f(t,n,e),f(t,s,e),f(t,l,e),f(t,o,e),f(t,i,e),f(t,r,e),f(t,c,e)},p:t,d(t){t&&d(n),t&&d(s),t&&d(l),t&&d(o),t&&d(i),t&&d(r),t&&d(c)}}}function mn(t){let e,n,l,o,i,r,c,a;function u(t,e){return t[4]?gn:hn}let p=u(t),h=p(t);return{c(){(e=m("a")).textContent="Analyze datasets",n=g(),(l=m("a")).textContent="Retire datasets",o=g(),(i=m("a")).textContent="Reactivate datasets",r=g(),h.c(),c=$(),b(e,"class","button"),b(e,"title","Search MS data"),b(l,"class","button"),b(l,"title","Move datasets to cold storage (delete)"),b(i,"class","button"),b(i,"title","Move datasets to active storage (undelete)")},m(u,d,p){f(u,e,d),f(u,n,d),f(u,l,d),f(u,o,d),f(u,i,d),f(u,r,d),h.m(u,d),f(u,c,d),p&&s(a),a=[v(e,"click",t[10]),v(l,"click",t[11]),v(i,"click",t[12])]},p(t,e){p===(p=u(t))&&h?h.p(t,e):(h.d(1),(h=p(t))&&(h.c(),h.m(c.parentNode,c)))},d(t){t&&d(e),t&&d(n),t&&d(l),t&&d(o),t&&d(i),t&&d(r),h.d(t),t&&d(c),s(a)}}}function hn(e){let n,s;return{c(){(n=m("a")).textContent="Purge datasets",b(n,"class","button"),b(n,"title","PERMANENTLY delete datasets from active and cold storage")},m(t,l,o){f(t,n,l),o&&s(),s=v(n,"click",e[14])},p:t,d(t){t&&d(n),s()}}}function gn(e){let n,s;return{c(){(n=m("a")).textContent="Are you sure? Purge datasets",b(n,"class","button is-danger is-light"),b(n,"title","PERMANENTLY delete datasets from active and cold storage")},m(t,l,o){f(t,n,l),o&&s(),s=v(n,"click",e[13])},p:t,d(t){t&&d(n),s()}}}function $n(t){let e;const n=new dn({props:{closeWindow:t[18],dsetIds:t[2]}});return{c(){G(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,e){const s={};4&e&&(s.closeWindow=t[18]),4&e&&(s.dsetIds=t[2]),n.$set(s)},i(t){e||(Y(n.$$.fragment,t),e=!0)},o(t){J(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function vn(t){let e,n,s,l,o,i,r,c;const a=new ke({props:{tabshow:"Datasets",notif:t[1]}});function u(t,e){return t[0].length?mn:pn}let p=u(t),m=p(t);function h(e){t[15].call(null,e)}function v(e){t[16].call(null,e)}function b(e){t[17].call(null,e)}let y={tab:"Datasets",fetchUrl:"/show/datasets",findUrl:"/find/datasets",getdetails:yn,fixedbuttons:t[8],fields:t[6],inactive:t[5],statecolors:t[7]};void 0!==t[3]&&(y.treatItems=t[3]),void 0!==t[1]&&(y.notif=t[1]),void 0!==t[0]&&(y.selected=t[0]);const w=new re({props:y});E.push(()=>K(w,"treatItems",h)),E.push(()=>K(w,"notif",v)),E.push(()=>K(w,"selected",b)),w.$on("detailview",t[9]);let x=t[2]&&$n(t);return{c(){G(a.$$.fragment),e=g(),m.c(),n=g(),G(w.$$.fragment),i=g(),x&&x.c(),r=$()},m(t,s){V(a,t,s),f(t,e,s),m.m(t,s),f(t,n,s),V(w,t,s),f(t,i,s),x&&x.m(t,s),f(t,r,s),c=!0},p(t,[e]){const i={};2&e&&(i.notif=t[1]),a.$set(i),p===(p=u(t))&&m?m.p(t,e):(m.d(1),(m=p(t))&&(m.c(),m.m(n.parentNode,n)));const c={};!s&&8&e&&(s=!0,c.treatItems=t[3],U(()=>s=!1)),!l&&2&e&&(l=!0,c.notif=t[1],U(()=>l=!1)),!o&&1&e&&(o=!0,c.selected=t[0],U(()=>o=!1)),w.$set(c),t[2]?x?(x.p(t,e),Y(x,1)):((x=$n(t)).c(),Y(x,1),x.m(r.parentNode,r)):x&&(B(),J(x,1,1,()=>{x=null}),Q())},i(t){c||(Y(a.$$.fragment,t),Y(w.$$.fragment,t),Y(x),c=!0)},o(t){J(a.$$.fragment,t),J(w.$$.fragment,t),J(x),c=!1},d(t){X(a,t),t&&d(e),m.d(t),t&&d(n),X(w,t),t&&d(i),x&&x.d(t),t&&d(r)}}}function bn(t){window.open(`/datasets/show/${t}`,"_blank")}async function yn(t){const e=await ht(`/show/dataset/${t}`);return`\n    <p><span class="has-text-weight-bold">Storage location:</span> ${e.storage_loc}</p>\n    <p><span class="has-text-weight-bold">Owners:</span> ${Object.values(e.owners).join(", ")}</p>\n    <hr>\n    <p>\n    ${Object.entries(e.nrstoredfiles).map(t=>`<div>${t[1]} stored files of type ${t[0]}</div>`).join("")}\n    </p>\n    `}function wn(t,e,n){let s,l=[],o={errors:{},messages:{}},i=!1,r=!1;return[l,o,i,s,r,["deleted"],[{id:"ptype",name:"Project type",type:"str",multi:!1},{id:"storestate",name:"Stored",type:"tag",multi:!1,links:"fn_ids",linkroute:"#/files/"},{id:"jobstates",name:"__hourglass-half",type:"state",multi:!0,links:"jobids",linkroute:"#/jobs"},{id:"analyses",name:"",type:"icon",icon:"cogs",links:"ana_ids",linkroute:"#/analyses"},{id:"proj",name:"Project",type:"str",multi:!1},{id:"exp",name:"Experiment",type:"str",multi:!1},{id:"run",name:"Run",type:"str",multi:!1},{id:"usr",name:"Creator",type:"str",multi:!1},{id:"dtype",name:"Datatype",type:"str",multi:!1}],{storestate:{cold:"is-info",purged:"is-danger",complete:"is-success","active-only":"is-warning",new:"is-warning",empty:"is-light",broken:"is-light"},jobstates:{wait:"has-text-grey-light",pending:"has-text-info",error:"has-text-danger",processing:"has-text-warning",done:"has-text-success"}},[{name:"__edit",alt:"Show metadata",action:bn}],function(t){n(2,i=t.detail.ids)},async function(){window.open(`/analysis/init?dsids=${l.join(",")}`,"_blank")},function(){s("datasets/archive/dataset/","dataset","archiving",t=>{t.deleted=!0},l)},function(){s("datasets/undelete/dataset/","dataset","reactivating",t=>{t.deleted=!1},l)},function(){s("datasets/purge/dataset/","dataset","reactivating",t=>{t.deleted=!0},l)},function(){n(4,r=!0),setTimeout(()=>{n(4,r=!1)},$t)},function(t){n(3,s=t)},function(t){n(1,o=t)},function(t){n(0,l=t)},()=>{n(2,i=!1)}]}class xn extends et{constructor(t){super(),tt(this,t,wn,vn,o,{})}}function _n(t){let e,n,s,l,o,i;const r=new ke({props:{tabshow:"Jobs",notif:t[1]}});function c(e){t[11].call(null,e)}function a(e){t[12].call(null,e)}function u(e){t[13].call(null,e)}function p(e){t[14].call(null,e)}let m={tab:"Jobs",fetchUrl:"/show/jobs",findUrl:"find/jobs",getdetails:kn,fixedbuttons:t[6],fields:t[4],inactive:["canceled"],statecolors:t[5]};void 0!==t[3]&&(m.items=t[3]),void 0!==t[2]&&(m.treatItems=t[2]),void 0!==t[1]&&(m.notif=t[1]),void 0!==t[0]&&(m.selected=t[0]);const h=new re({props:m});return E.push(()=>K(h,"items",c)),E.push(()=>K(h,"treatItems",a)),E.push(()=>K(h,"notif",u)),E.push(()=>K(h,"selected",p)),h.$on("rowAction",t[15]),{c(){G(r.$$.fragment),e=g(),G(h.$$.fragment)},m(t,n){V(r,t,n),f(t,e,n),V(h,t,n),i=!0},p(t,[e]){const i={};2&e&&(i.notif=t[1]),r.$set(i);const c={};!n&&8&e&&(n=!0,c.items=t[3],U(()=>n=!1)),!s&&4&e&&(s=!0,c.treatItems=t[2],U(()=>s=!1)),!l&&2&e&&(l=!0,c.notif=t[1],U(()=>l=!1)),!o&&1&e&&(o=!0,c.selected=t[0],U(()=>o=!1)),h.$set(c)},i(t){i||(Y(r.$$.fragment,t),Y(h.$$.fragment,t),i=!0)},o(t){J(r.$$.fragment,t),J(h.$$.fragment,t),i=!1},d(t){X(r,t),t&&d(e),X(h,t)}}}async function kn(t){const e=await ht(`/show/job/${t}`);return`\n    <p>${e.files} files in job</p>\n    ${e.errmsg?`<p>Error msg: ${e.errmsg}</p>`:""}\n    <p>\n    <span class="tag is-danger">${e.tasks.error}</span>\n    <span class="tag is-warning">${e.tasks.procpen}</span>\n    <span class="tag is-success">${e.tasks.done}</span>\n    </p>\n  `}function jn(t,e,n){let s,l,o=[],i={errors:{},messages:{}};function r(t){s("/jobs/retry/","job","retrying",t=>{u(t.id)},[t])}function c(t){s("/jobs/delete/","job","deleting",t=>{u(t.id)},[t])}function a(t,e){({retry:r,"force retry":r,delete:c})[t](e)}async function u(t){const e=await ht(`/refresh/job/${t}`);if(e.ok)n(3,l[t]=Object.assign(l[t],e),l);else{const s=`Something went wrong trying to refresh job ${t}: ${e.error}`;n(1,i.errors[s]=1,i),setTimeout(function(t){n(1,i.errors[t]=0,i)},$t,s)}}return[o,i,s,l,[{id:"state",name:"__hourglass-half",type:"state",multi:!1},{id:"name",name:"Job name",type:"str",multi:!1},{id:"files",name:"",help:"Files",type:"icon",icon:"database",multi:!1,links:"fn_ids",linkroute:"#/files"},{id:"analysis",name:"",help:"Analysis",type:"icon",icon:"cogs",multi:!1,links:"analysis",linkroute:"#/analyses"},{id:"datasets",name:"",help:"Datasets",type:"icon",icon:"clipboard-list",multi:!1,links:"dset_ids",linkroute:"#/datasets"},{id:"usr",name:"Users",type:"str",multi:!1},{id:"date",name:"Date",type:"str",multi:!1},{id:"actions",name:"Actions",type:"button",multi:!0,confirm:["delete"]}],{state:{wait:"has-text-grey-light",pending:"has-text-info",error:"has-text-danger",processing:"has-text-warning",done:"has-text-success"}},[{name:"__redo",alt:"Refresh job",action:u}],a,r,c,u,function(t){n(3,l=t)},function(t){n(2,s=t)},function(t){n(1,i=t)},function(t){n(0,o=t)},t=>a(t.detail.action,t.detail.id)]}function Cn(t,e,n){const s=t.slice();return s[9]=e[n][0],s[10]=e[n][1],s}function On(t){let e,n,s,l=t[10].description+"";return{c(){e=m("p"),(n=m("span")).textContent="Description:",s=h(l),b(n,"class","has-text-weight-bold")},m(t,l){f(t,e,l),u(e,n),u(e,s)},p(t,e){4&e&&l!==(l=t[10].description+"")&&y(s,l)},d(t){t&&d(e)}}}function An(t){let e,n,o,i,r,c,a,p,$,x,_,k,j,C,O,A,T,N,S,E=t[10].producer+"",I=t[10].path+"",W=t[10].description&&On(t);function L(){t[8].call(C,t[9])}return{c(){e=m("p"),(n=m("span")).textContent="Producer",o=g(),i=h(E),r=g(),c=m("p"),(a=m("span")).textContent="Storage location:",p=g(),$=h(I),x=g(),W&&W.c(),_=g(),k=m("div"),j=m("p"),C=m("input"),O=g(),A=m("p"),(T=m("a")).textContent="Rename file",N=g(),b(n,"class","has-text-weight-bold"),b(a,"class","has-text-weight-bold"),b(C,"class","input is-small"),b(C,"type","text"),b(j,"class","control is-expanded"),b(T,"class","button is-small is-primary"),b(A,"class","control"),b(k,"class","field is-grouped")},m(d,m,h){f(d,e,m),u(e,n),u(e,o),u(e,i),f(d,r,m),f(d,c,m),u(c,a),u(c,p),u(c,$),f(d,x,m),W&&W.m(d,m),f(d,_,m),f(d,k,m),u(k,j),u(j,C),w(C,t[3][t[9]]),u(k,O),u(k,A),u(A,T),u(k,N),h&&s(S),S=[v(C,"input",L),v(T,"click",function(){l(t[4](t[3][t[9]],t[9]))&&t[4](t[3][t[9]],t[9]).apply(this,arguments)})]},p(e,n){t=e,4&n&&E!==(E=t[10].producer+"")&&y(i,E),4&n&&I!==(I=t[10].path+"")&&y($,I),t[10].description?W?W.p(t,n):((W=On(t)).c(),W.m(_.parentNode,_)):W&&(W.d(1),W=null),12&n&&C.value!==t[3][t[9]]&&w(C,t[3][t[9]])},d(t){t&&d(e),t&&d(r),t&&d(c),t&&d(x),W&&W.d(t),t&&d(_),t&&d(k),s(S)}}}function Tn(t){let e,n=Object.entries(t[2]),s=[];for(let e=0;e<n.length;e+=1)s[e]=An(Cn(t,n,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=$()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);f(t,e,n)},p(t,l){if(28&l){let o;for(n=Object.entries(t[2]),o=0;o<n.length;o+=1){const i=Cn(t,n,o);s[o]?s[o].p(i,l):(s[o]=An(i),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){p(s,t),t&&d(e)}}}function Nn(t){let e;const n=new qe({props:{notif:t[1],closeWindow:t[0],$$slots:{default:[Tn]},$$scope:{ctx:t}}});return{c(){G(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,[e]){const s={};2&e&&(s.notif=t[1]),1&e&&(s.closeWindow=t[0]),8204&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(Y(n.$$.fragment,t),e=!0)},o(t){J(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function Sn(t,e,n){let{closeWindow:s}=e,{fnIds:l}=e,o={errors:{},messages:{}},i={},r=Object.fromEntries(l.map(t=>[t,!1]));async function c(t){let e={};const s=t.map(async t=>{const s=await ht(`/show/file/${t}`);if(s.ok)e[t]=s,n(3,r[t]=s.filename,r);else{const t=`Something went wrong fetching file info: ${s.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},$t,t)}});await Promise.all(s);n(2,i=Object.assign(i,e))}function a(t){n(2,i={}),c(t)}return A(async()=>{a(l)}),t.$set=(t=>{"closeWindow"in t&&n(0,s=t.closeWindow),"fnIds"in t&&n(5,l=t.fnIds)}),t.$$.update=(()=>{32&t.$$.dirty&&a(l)}),[s,o,i,r,async function(t,e){if(console.log(i[e].filename),console.log(t),t!==i[e].filename){const s=await gt("/files/rename/",{newname:t,sf_id:e});if(s.ok){n(2,i[e].filename=t,i);const s=`Queued file for renaming to ${t}`;n(1,o.messages[s]=1,o),setTimeout(function(t){n(1,o.messages[t]=0,o)},$t,s)}else{const t=`Something went wrong trying to rename the file: ${s.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},$t,t)}}},l,c,a,function(t){r[t]=this.value,n(3,r),n(2,i)}]}class En extends et{constructor(t){super(),tt(this,t,Sn,Nn,o,{closeWindow:0,fnIds:5})}}function In(e){return{c:t,m:t,d:t}}function Wn(t){let e;const n=new En({props:{closeWindow:t[8],fnIds:t[2]}});return{c(){G(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,e){const s={};4&e&&(s.closeWindow=t[8]),4&e&&(s.fnIds=t[2]),n.$set(s)},i(t){e||(Y(n.$$.fragment,t),e=!0)},o(t){J(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function Ln(t){let e,n,s,l,o,i,r;const c=new ke({props:{tabshow:"Files",notif:t[1]}});let a=t[0].length&&In();function u(e){t[6].call(null,e)}function p(e){t[7].call(null,e)}let m={tab:"Files",fetchUrl:"/show/files",findUrl:"/find/files",getdetails:Mn,fields:t[3],inactive:["deleted","purged"],statecolors:t[4]};void 0!==t[1]&&(m.notif=t[1]),void 0!==t[0]&&(m.selected=t[0]);const h=new re({props:m});E.push(()=>K(h,"notif",u)),E.push(()=>K(h,"selected",p)),h.$on("detailview",t[5]);let v=t[2]&&Wn(t);return{c(){G(c.$$.fragment),e=g(),a&&a.c(),n=g(),G(h.$$.fragment),o=g(),v&&v.c(),i=$()},m(t,s){V(c,t,s),f(t,e,s),a&&a.m(t,s),f(t,n,s),V(h,t,s),f(t,o,s),v&&v.m(t,s),f(t,i,s),r=!0},p(t,[e]){const o={};2&e&&(o.notif=t[1]),c.$set(o),t[0].length?a||((a=In()).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null);const r={};!s&&2&e&&(s=!0,r.notif=t[1],U(()=>s=!1)),!l&&1&e&&(l=!0,r.selected=t[0],U(()=>l=!1)),h.$set(r),t[2]?v?(v.p(t,e),Y(v,1)):((v=Wn(t)).c(),Y(v,1),v.m(i.parentNode,i)):v&&(B(),J(v,1,1,()=>{v=null}),Q())},i(t){r||(Y(c.$$.fragment,t),Y(h.$$.fragment,t),Y(v),r=!0)},o(t){J(c.$$.fragment,t),J(h.$$.fragment,t),J(v),r=!1},d(t){X(c,t),t&&d(e),a&&a.d(t),t&&d(n),X(h,t),t&&d(o),v&&v.d(t),t&&d(i)}}}async function Mn(t){const e=await ht(`/show/file/${t}`);return`\n    <p><span class="has-text-weight-bold">Producer:</span> ${e.producer}</p>\n    <p><span class="has-text-weight-bold">Storage location:</span> ${e.path}</p>\n    ${e.description?`<p><span class="has-text-weight-bold">Description:</span> ${e.description}</p>`:""}\n    `}function Pn(t,e,n){let s=[],l={errors:{},messages:{}},o=!1;return[s,l,o,[{id:"jobs",name:"__hourglass-half",type:"state",multi:!0,links:"job_ids",linkroute:"#/jobs"},{id:"name",name:"File",type:"str",multi:!1},{id:"dataset",name:"",type:"icon",help:"Dataset",icon:"clipboard-list",multi:!1,links:"dataset",linkroute:"#/datasets"},{id:"analyses",name:"",type:"icon",help:"Analyses",icon:"cogs",multi:!1,links:"analyses",linkroute:"#/analyses"},{id:"date",name:"Date",type:"str",multi:!1},{id:"backup",name:"Backed up",type:"bool",multi:!1},{id:"owner",name:"Belongs",type:"str",multi:!1},{id:"ftype",name:"Type",type:"str",multi:!1}],{stored:!1,jobs:{wait:"has-text-grey-light",pending:"has-text-info",error:"has-text-danger",processing:"has-text-warning",done:"has-text-success"}},function(t){n(2,o=t.detail.ids)},function(t){n(1,l=t)},function(t){n(0,s=t)},()=>{n(2,o=!1)}]}function Un(t,e,n){const s=t.slice();return s[15]=e[n],s}function qn(t,e,n){const s=t.slice();return s[15]=e[n],s}function zn(e){let n,s;return{c(){b(n=m("input"),"class","file-input"),b(n,"type","file")},m(t,l,o){f(t,n,l),o&&s(),s=v(n,"change",e[12])},p:t,d(t){t&&d(n),s()}}}function Rn(t){let e;return{c(){b(e=m("input"),"files",t[6]),b(e,"class","file-input"),e.disabled=!0,b(e,"type","file")},m(t,n){f(t,e,n)},p(t,n){64&n&&b(e,"files",t[6])},d(t){t&&d(e)}}}function Dn(t){let e;return{c(){(e=m("span")).textContent="Choose a file...",b(e,"class","file-label")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function Fn(t){let e;return{c(){(e=m("span")).textContent="Uploading file...",b(e,"class","file-label")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function Hn(t){let e;return{c(){(e=m("span")).innerHTML='<i class="fa fa-spinner fa-spin"></i>',b(e,"class","has-icon")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function Bn(t){let e;return{c(){(e=m("span")).innerHTML='<i class="fa fa-times has-text-danger"></i>',b(e,"class","has-icon")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function Qn(t){let e;return{c(){(e=m("span")).innerHTML='<i class="fa fa-check has-text-success"></i>',b(e,"class","has-icon")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function Yn(t){let e,n=t[6][0].name+"";return{c(){e=h(n)},m(t,n){f(t,e,n)},p(t,s){64&s&&n!==(n=t[6][0].name+"")&&y(e,n)},d(t){t&&d(e)}}}function Jn(t){let e,n,s,l=Object.keys(t[7]),o=[];for(let e=0;e<l.length;e+=1)o[e]=Gn(Un(t,l,e));return{c(){e=m("select"),(n=m("option")).textContent="Select filetype";for(let t=0;t<o.length;t+=1)o[t].c();n.__value="Select filetype",n.value=n.__value,void 0===t[2]&&P(()=>t[13].call(e))},m(l,i,r){f(l,e,i),u(e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null);x(e,t[2]),r&&s(),s=v(e,"change",t[13])},p(t,n){if(128&n){let s;for(l=Object.keys(t[7]),s=0;s<l.length;s+=1){const i=Un(t,l,s);o[s]?o[s].p(i,n):(o[s]=Gn(i),o[s].c(),o[s].m(e,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=l.length}4&n&&x(e,t[2])},d(t){t&&d(e),p(o,t),s()}}}function Kn(t){let e,n,s,l=Object.keys(t[7]),o=[];for(let e=0;e<l.length;e+=1)o[e]=Vn(qn(t,l,e));return{c(){e=m("select"),(n=m("option")).textContent="Select filetype";for(let t=0;t<o.length;t+=1)o[t].c();n.__value="Select filetype",n.value=n.__value,e.disabled=!0},m(l,i){f(l,e,i),u(e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null);s=t[2];for(var r=0;r<e.options.length;r+=1){var c=e.options[r];if(c.__value===s){c.selected=!0;break}}},p(t,n){if(128&n){let s;for(l=Object.keys(t[7]),s=0;s<l.length;s+=1){const i=qn(t,l,s);o[s]?o[s].p(i,n):(o[s]=Vn(i),o[s].c(),o[s].m(e,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=l.length}if(4&n&&s!==(s=t[2]))for(var i=0;i<e.options.length;i+=1){var r=e.options[i];if(r.__value===s){r.selected=!0;break}}},d(t){t&&d(e),p(o,t)}}}function Gn(t){let e,n,s,l=t[7][t[15]]+"";return{c(){e=m("option"),n=h(l),e.__value=s=t[15],e.value=e.__value},m(t,s){f(t,e,s),u(e,n)},p(t,o){128&o&&l!==(l=t[7][t[15]]+"")&&y(n,l),128&o&&s!==(s=t[15])&&(e.__value=s),e.value=e.__value},d(t){t&&d(e)}}}function Vn(t){let e,n,s,l=t[7][t[15]]+"";return{c(){e=m("option"),n=h(l),e.__value=s=t[15],e.value=e.__value},m(t,s){f(t,e,s),u(e,n)},p(t,o){128&o&&l!==(l=t[7][t[15]]+"")&&y(n,l),128&o&&s!==(s=t[15])&&(e.__value=s),e.value=e.__value},d(t){t&&d(e)}}}function Xn(t){let e,n;return{c(){b(e=m("input"),"class","input"),b(e,"type","text"),b(e,"placeholder","Description")},m(s,l,o){f(s,e,l),w(e,t[1]),o&&n(),n=v(e,"input",t[14])},p(t,n){2&n&&e.value!==t[1]&&w(e,t[1])},d(t){t&&d(e),n()}}}function Zn(t){let e;return{c(){b(e=m("input"),"class","input"),e.disabled=!0,e.value=t[1],b(e,"type","text"),b(e,"placeholder","Description")},m(t,n){f(t,e,n)},p(t,n){2&n&&e.value!==t[1]&&(e.value=t[1])},d(t){t&&d(e)}}}function ts(t){let e,n;return{c(){e=m("div"),n=h(t[3]),b(e,"class","has-text-danger")},m(t,s){f(t,e,s),u(e,n)},p(t,e){8&e&&y(n,t[3])},d(t){t&&d(e)}}}function es(e){let n;return{c(){(n=m("a")).textContent="Upload file",b(n,"class","button is-small"),b(n,"disabled","")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function ns(e){let n;return{c(){(n=m("a")).textContent="Upload file",b(n,"class","button is-small"),b(n,"disabled","")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function ss(e){let n,s;return{c(){(n=m("a")).textContent="Upload file",b(n,"class","button is-small")},m(t,l,o){f(t,n,l),o&&s(),s=v(n,"click",e[9])},p:t,d(t){t&&d(n),s()}}}function ls(e){let n,o,i,r,c,a,p,h,$,y,w,x,_,k,j,C,O,A,T,N,S,E,I,W,L,M,P,U,q;function z(t,e){return t[8]?Rn:zn}let R=z(e),D=R(e);function F(t,e){return t[8]?Fn:Dn}let H=F(e),B=H(e);function Q(t,e){return t[4]?Qn:t[3]?Bn:t[5]?Hn:void 0}let Y=Q(e),J=Y&&Y(e),K=e[6].length&&Yn(e);function G(t,e){return t[8]?Kn:Jn}let V=G(e),X=V(e);function Z(t,e){return t[8]?Zn:Xn}let tt=Z(e),et=tt(e),nt=e[3]&&ts(e);function st(t,e){return t[6].length&&t[1]&&t[2]?ss:t[8]?ns:es}let lt=st(e),ot=lt(e);return{c(){n=m("div"),o=m("div"),i=g(),r=m("div"),c=m("div"),(a=m("h5")).textContent="Upload FASTA files",p=g(),h=m("div"),$=m("div"),y=m("label"),D.c(),w=g(),x=m("span"),(_=m("span")).innerHTML='<i class="fas fa-upload"></i>',k=g(),B.c(),j=g(),C=m("span"),J&&J.c(),O=g(),K&&K.c(),A=g(),T=m("div"),N=m("div"),S=m("div"),X.c(),E=g(),I=m("div"),W=m("div"),et.c(),L=g(),nt&&nt.c(),M=g(),ot.c(),P=g(),U=m("button"),b(o,"class","modal-background"),b(a,"class","title is-5"),b(_,"class","file-icon"),b(x,"class","file-cta"),b(C,"class","file-name"),b(y,"class","file-label"),b($,"class","file has-name is-fullwidth"),b(h,"class","field"),b(S,"class","select"),b(N,"class","control"),b(T,"class","field"),b(W,"class","control"),b(I,"class","field"),b(c,"class","box"),b(r,"class","modal-content"),b(U,"class","modal-close is-large"),b(U,"aria-label","close"),b(n,"class","modal is-active")},m(t,d,m){f(t,n,d),u(n,o),u(n,i),u(n,r),u(r,c),u(c,a),u(c,p),u(c,h),u(h,$),u($,y),D.m(y,null),u(y,w),u(y,x),u(x,_),u(x,k),B.m(x,null),u(y,j),u(y,C),J&&J.m(C,null),u(C,O),K&&K.m(C,null),u(c,A),u(c,T),u(T,N),u(N,S),X.m(S,null),u(c,E),u(c,I),u(I,W),et.m(W,null),u(c,L),nt&&nt.m(c,null),u(c,M),ot.m(c,null),u(n,P),u(n,U),m&&s(q),q=[v(window,"keyup",e[10]),v(U,"click",function(){l(e[0])&&e[0].apply(this,arguments)})]},p(t,[n]){R===(R=z(e=t))&&D?D.p(e,n):(D.d(1),(D=R(e))&&(D.c(),D.m(y,w))),H!==(H=F(e))&&(B.d(1),(B=H(e))&&(B.c(),B.m(x,null))),Y!==(Y=Q(e))&&(J&&J.d(1),(J=Y&&Y(e))&&(J.c(),J.m(C,O))),e[6].length?K?K.p(e,n):((K=Yn(e)).c(),K.m(C,null)):K&&(K.d(1),K=null),V===(V=G(e))&&X?X.p(e,n):(X.d(1),(X=V(e))&&(X.c(),X.m(S,null))),tt===(tt=Z(e))&&et?et.p(e,n):(et.d(1),(et=tt(e))&&(et.c(),et.m(W,null))),e[3]?nt?nt.p(e,n):((nt=ts(e)).c(),nt.m(c,M)):nt&&(nt.d(1),nt=null),lt===(lt=st(e))&&ot?ot.p(e,n):(ot.d(1),(ot=lt(e))&&(ot.c(),ot.m(c,null)))},i:t,o:t,d(t){t&&d(n),D.d(),B.d(),J&&J.d(),K&&K.d(),X.d(),et.d(),nt&&nt.d(),ot.d(),s(q)}}}function os(t,e,n){let s,l,o,i,{toggleWindow:r}=e,c="",a=[],u={},f=!1;async function d(){const t=await ht("/files/upload/userfile");n(7,u=t.upload_ftypes)}return A(async()=>{d()}),t.$set=(t=>{"toggleWindow"in t&&n(0,r=t.toggleWindow)}),[r,c,s,l,o,i,a,u,f,async function(){n(8,f=!0),n(5,i=!0),n(3,l=n(4,o=!1));let t=new FormData;t.append("file",a[0]),t.append("desc",c),t.append("ftype_id",s);let e=await fetch("/files/upload/userfile/",{method:"POST",body:t,credentials:"same-origin"});e.ok?("error"in(e=await e.json())?(n(5,i=n(4,o=!1)),n(3,l=e.error)):n(4,o=e.success),n(8,f=!1)):n(3,l="Something went wrong trying to send file to server, contact admin")},function(t){27===t.keyCode&&r()},d,function(){a=this.files,n(6,a)},function(){s=_(this),n(2,s),n(7,u)},function(){c=this.value,n(1,c)}]}class is extends et{constructor(t){super(),tt(this,t,os,ls,o,{toggleWindow:0})}}function rs(t,e,n){const s=t.slice();return s[13]=e[n],s}function cs(t,e,n){const s=t.slice();return s[10]=e[n],s}function as(t,e,n){const s=t.slice();return s[16]=e[n],s}function us(t,e,n){const s=t.slice();return s[19]=e[n],s}function fs(t,e,n){const s=t.slice();return s[22]=e[n],s}function ds(t,e,n){const s=t.slice();return s[6]=e[n][0],s[7]=e[n][1],s}function ps(t){let e,n,s;return{c(){e=m("a"),n=h("(full log)"),b(e,"href",s=`analysis/log/${t[6]}`),b(e,"class","is-size-7"),b(e,"target","_blank")},m(t,s){f(t,e,s),u(e,n)},p(t,n){4&n&&s!==(s=`analysis/log/${t[6]}`)&&b(e,"href",s)},d(t){t&&d(e)}}}function ms(t){let e,n,s=t[22]+"";return{c(){e=h(s),n=m("br")},m(t,s){f(t,e,s),f(t,n,s)},p(t,n){4&n&&s!==(s=t[22]+"")&&y(e,s)},d(t){t&&d(e),t&&d(n)}}}function hs(t){let e,n,s,l,o=t[19][1]+"";return{c(){e=m("div"),n=m("a"),s=h(o),b(n,"href",l="analysis/showfile/"+t[19][0]),b(n,"target","_blank")},m(t,l){f(t,e,l),u(e,n),u(n,s)},p(t,e){4&e&&o!==(o=t[19][1]+"")&&y(s,o),4&e&&l!==(l="analysis/showfile/"+t[19][0])&&b(n,"href",l)},d(t){t&&d(e)}}}function gs(t){let e,n,s,l,o,i,r,c,a=t[16][0]+"",p=t[16][2]+"",g=t[16][1]+"";return{c(){e=m("p"),n=m("code"),s=h(a),l=h(": "),o=h(p),i=h(" ( "),r=h(g),c=h(" )")},m(t,a){f(t,e,a),u(e,n),u(n,s),u(e,l),u(e,o),u(e,i),u(e,r),u(e,c)},p(t,e){4&e&&a!==(a=t[16][0]+"")&&y(s,a),4&e&&p!==(p=t[16][2]+"")&&y(o,p),4&e&&g!==(g=t[16][1]+"")&&y(r,g)},d(t){t&&d(e)}}}function $s(t){let e,n,s,l,o=t[7].invocation.sampletable,i=[];for(let e=0;e<o.length;e+=1)i[e]=bs(cs(t,o,e));return{c(){e=m("table"),(n=m("thead")).innerHTML="<tr><th>Channel</th> \n          <th>Sample set</th> \n          <th>Sample name</th> \n          <th>Sample group</th></tr>",s=g(),l=m("tbody");for(let t=0;t<i.length;t+=1)i[t].c();b(e,"class","table")},m(t,o){f(t,e,o),u(e,n),u(e,s),u(e,l);for(let t=0;t<i.length;t+=1)i[t].m(l,null)},p(t,e){if(4&e){let n;for(o=t[7].invocation.sampletable,n=0;n<o.length;n+=1){const s=cs(t,o,n);i[n]?i[n].p(s,e):(i[n]=bs(s),i[n].c(),i[n].m(l,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(t){t&&d(e),p(i,t)}}}function vs(t){let e,n,s=t[13]+"";return{c(){e=m("td"),n=h(s)},m(t,s){f(t,e,s),u(e,n)},p(t,e){4&e&&s!==(s=t[13]+"")&&y(n,s)},d(t){t&&d(e)}}}function bs(t){let e,n,s=t[10],l=[];for(let e=0;e<s.length;e+=1)l[e]=vs(rs(t,s,e));return{c(){e=m("tr");for(let t=0;t<l.length;t+=1)l[t].c();n=g()},m(t,s){f(t,e,s);for(let t=0;t<l.length;t+=1)l[t].m(e,null);u(e,n)},p(t,o){if(4&o){let i;for(s=t[10],i=0;i<s.length;i+=1){const r=rs(t,s,i);l[i]?l[i].p(r,o):(l[i]=vs(r),l[i].c(),l[i].m(e,n))}for(;i<l.length;i+=1)l[i].d(1);l.length=s.length}},d(t){t&&d(e),p(l,t)}}}function ys(t){let e,n,s,l,o,i,r,c,a,$,v,w,x,_,k,j,C,O,A,T,N,S,E,I,W,L,M,P,U,q,z,R,D,F,H,B,Q,Y,J,K,G,V,X,Z,tt,et,nt,st=t[7].name+"",lt="Analysis without"!==t[7].log[0].slice(0,16),ot=t[7].wf.update+"",it=t[7].nrfiles+"",rt=t[7].nrdsets+"",ct=t[7].quants.join(", ")+"",at=t[7].invocation.params.join(" ")+"",ut=lt&&ps(t),ft=t[7].log,dt=[];for(let e=0;e<ft.length;e+=1)dt[e]=ms(fs(t,ft,e));let pt=t[7].servedfiles,mt=[];for(let e=0;e<pt.length;e+=1)mt[e]=hs(us(t,pt,e));let ht=t[7].invocation.files,gt=[];for(let e=0;e<ht.length;e+=1)gt[e]=gs(as(t,ht,e));let $t=t[7].invocation.sampletable&&$s(t);return{c(){e=m("h5"),n=h(st),s=g(),l=m("p"),o=m("span"),i=h("Last lines of log  \n      "),ut&&ut.c(),r=h("\n      :"),c=g(),a=m("p");for(let t=0;t<dt.length;t+=1)dt[t].c();$=g(),v=m("section"),w=m("div"),x=m("div"),(_=m("h6")).textContent="Output",k=g();for(let t=0;t<mt.length;t+=1)mt[t].c();j=g(),C=m("div"),(O=m("h6")).textContent="Input data",A=g(),T=m("p"),(N=m("span")).textContent="Workflow version:",S=g(),E=h(ot),I=g(),W=m("p"),L=h(it),M=h(" raw files from "),P=h(rt),U=h(" dataset(s) analysed"),q=g(),z=m("p"),(R=m("span")).textContent="Quant type:",D=g(),F=h(ct),H=g(),(B=m("h6")).textContent="Pipeline parameters",Q=g();for(let t=0;t<gt.length;t+=1)gt[t].c();Y=g(),J=m("p"),K=h("Other parameters: "),G=m("code"),V=h(at),X=m("code"),Z=g(),(tt=m("h6")).textContent="Samples:",et=g(),$t&&$t.c(),nt=g(),b(e,"class","title is-6"),b(o,"class","has-text-weight-bold"),b(a,"class","is-family-monospace"),b(_,"class","title is-6"),b(x,"class","column"),b(O,"class","title is-6"),b(N,"class","has-text-weight-bold"),b(R,"class","has-text-weight-bold"),b(C,"class","column"),b(w,"class","columns"),b(B,"class","title is-6"),b(tt,"class","title is-6"),b(v,"class","section")},m(t,d){f(t,e,d),u(e,n),f(t,s,d),f(t,l,d),u(l,o),u(o,i),ut&&ut.m(o,null),u(o,r),f(t,c,d),f(t,a,d);for(let t=0;t<dt.length;t+=1)dt[t].m(a,null);f(t,$,d),f(t,v,d),u(v,w),u(w,x),u(x,_),u(x,k);for(let t=0;t<mt.length;t+=1)mt[t].m(x,null);u(w,j),u(w,C),u(C,O),u(C,A),u(C,T),u(T,N),u(T,S),u(T,E),u(C,I),u(C,W),u(W,L),u(W,M),u(W,P),u(W,U),u(C,q),u(C,z),u(z,R),u(z,D),u(z,F),u(v,H),u(v,B),u(v,Q);for(let t=0;t<gt.length;t+=1)gt[t].m(v,null);u(v,Y),u(v,J),u(J,K),u(J,G),u(G,V),u(G,X),u(v,Z),u(v,tt),u(v,et),$t&&$t.m(v,null),u(v,nt)},p(t,e){if(4&e&&st!==(st=t[7].name+"")&&y(n,st),4&e&&(lt="Analysis without"!==t[7].log[0].slice(0,16)),lt?ut?ut.p(t,e):((ut=ps(t)).c(),ut.m(o,r)):ut&&(ut.d(1),ut=null),4&e){let n;for(ft=t[7].log,n=0;n<ft.length;n+=1){const s=fs(t,ft,n);dt[n]?dt[n].p(s,e):(dt[n]=ms(s),dt[n].c(),dt[n].m(a,null))}for(;n<dt.length;n+=1)dt[n].d(1);dt.length=ft.length}if(4&e){let n;for(pt=t[7].servedfiles,n=0;n<pt.length;n+=1){const s=us(t,pt,n);mt[n]?mt[n].p(s,e):(mt[n]=hs(s),mt[n].c(),mt[n].m(x,null))}for(;n<mt.length;n+=1)mt[n].d(1);mt.length=pt.length}if(4&e&&ot!==(ot=t[7].wf.update+"")&&y(E,ot),4&e&&it!==(it=t[7].nrfiles+"")&&y(L,it),4&e&&rt!==(rt=t[7].nrdsets+"")&&y(P,rt),4&e&&ct!==(ct=t[7].quants.join(", ")+"")&&y(F,ct),4&e){let n;for(ht=t[7].invocation.files,n=0;n<ht.length;n+=1){const s=as(t,ht,n);gt[n]?gt[n].p(s,e):(gt[n]=gs(s),gt[n].c(),gt[n].m(v,Y))}for(;n<gt.length;n+=1)gt[n].d(1);gt.length=ht.length}4&e&&at!==(at=t[7].invocation.params.join(" ")+"")&&y(V,at),t[7].invocation.sampletable?$t?$t.p(t,e):(($t=$s(t)).c(),$t.m(v,nt)):$t&&($t.d(1),$t=null)},d(t){t&&d(e),t&&d(s),t&&d(l),ut&&ut.d(),t&&d(c),t&&d(a),p(dt,t),t&&d($),t&&d(v),p(mt,t),p(gt,t),$t&&$t.d()}}}function ws(t){let e,n=Object.entries(t[2]),s=[];for(let e=0;e<n.length;e+=1)s[e]=ys(ds(t,n,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=$()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);f(t,e,n)},p(t,l){if(4&l){let o;for(n=Object.entries(t[2]),o=0;o<n.length;o+=1){const i=ds(t,n,o);s[o]?s[o].p(i,l):(s[o]=ys(i),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){p(s,t),t&&d(e)}}}function xs(t){let e;const n=new qe({props:{notif:t[1],closeWindow:t[0],$$slots:{default:[ws]},$$scope:{ctx:t}}});return{c(){G(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,[e]){const s={};2&e&&(s.notif=t[1]),1&e&&(s.closeWindow=t[0]),33554436&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(Y(n.$$.fragment,t),e=!0)},o(t){J(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function _s(t,e,n){let{closeWindow:s}=e,{anaIds:l}=e,o={errors:{},messages:{}},i={};function r(t){n(2,i={}),async function(t){let e={};const s=t.map(async t=>{const s=await ht(`/show/analysis/${t}`);if(s.ok)e[t]=s;else{const t=`Something went wrong fetching analysis info: ${s.error}`;n(1,o.errors[t]=1,o),setTimeout(function(t){n(1,o.errors[t]=0,o)},$t,t)}});await Promise.all(s),n(2,i=Object.assign(i,e))}(t)}return A(async()=>{r(l)}),t.$set=(t=>{"closeWindow"in t&&n(0,s=t.closeWindow),"anaIds"in t&&n(3,l=t.anaIds)}),t.$$.update=(()=>{8&t.$$.dirty&&r(l)}),[s,o,i,l]}class ks extends et{constructor(t){super(),tt(this,t,_s,xs,o,{closeWindow:0,anaIds:3})}}function js(e){let n,s,l,o,i;return{c(){(n=m("a")).textContent="Delete analyses",s=g(),(l=m("a")).textContent="Undelete analyses",o=g(),(i=m("a")).textContent="Purge analyses",b(n,"class","button"),b(n,"disabled",""),b(l,"class","button"),b(l,"disabled",""),b(i,"class","button"),b(i,"disabled","")},m(t,e){f(t,n,e),f(t,s,e),f(t,l,e),f(t,o,e),f(t,i,e)},p:t,d(t){t&&d(n),t&&d(s),t&&d(l),t&&d(o),t&&d(i)}}}function Cs(e){let n,l,o,i,r,c;return{c(){(n=m("a")).textContent="Delete analyses",l=g(),(o=m("a")).textContent="Undelete analyses",i=g(),(r=m("a")).textContent="Purge analyses",b(n,"class","button"),b(o,"class","button"),b(r,"class","button")},m(t,a,u){f(t,n,a),f(t,l,a),f(t,o,a),f(t,i,a),f(t,r,a),u&&s(c),c=[v(n,"click",e[8]),v(o,"click",e[9]),v(r,"click",e[10])]},p:t,d(t){t&&d(n),t&&d(l),t&&d(o),t&&d(i),t&&d(r),s(c)}}}function Os(t){let e;const n=new is({props:{toggleWindow:t[15]}});return{c(){G(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,e){const s={};4&e&&(s.toggleWindow=t[15]),n.$set(s)},i(t){e||(Y(n.$$.fragment,t),e=!0)},o(t){J(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function As(t){let e;const n=new ks({props:{closeWindow:t[16],anaIds:t[4]}});return{c(){G(n.$$.fragment)},m(t,s){V(n,t,s),e=!0},p(t,e){const s={};16&e&&(s.closeWindow=t[16]),16&e&&(s.anaIds=t[4]),n.$set(s)},i(t){e||(Y(n.$$.fragment,t),e=!0)},o(t){J(n.$$.fragment,t),e=!1},d(t){X(n,t)}}}function Ts(t){let e,n,s,l,o,i,r,c,a,u,p,h;const y=new ke({props:{tabshow:"Analyses",notif:t[1]}});function w(t,e){return t[0].length?Cs:js}let x=w(t),_=x(t);function k(e){t[12].call(null,e)}function j(e){t[13].call(null,e)}function C(e){t[14].call(null,e)}let O={tab:"Analyses",fetchUrl:"/show/analyses",findUrl:"/find/analyses",getdetails:Ns,fixedbuttons:[],fields:t[5],inactive:["deleted","purged"],statecolors:t[6]};void 0!==t[3]&&(O.treatItems=t[3]),void 0!==t[1]&&(O.notif=t[1]),void 0!==t[0]&&(O.selected=t[0]);const A=new re({props:O});E.push(()=>K(A,"treatItems",k)),E.push(()=>K(A,"notif",j)),E.push(()=>K(A,"selected",C)),A.$on("detailview",t[7]);let T=t[2]&&Os(t),N=t[4]&&As(t);return{c(){G(y.$$.fragment),e=g(),_.c(),n=g(),(s=m("a")).textContent="Upload FASTA",l=g(),G(A.$$.fragment),c=g(),T&&T.c(),a=g(),N&&N.c(),u=$(),b(s,"class","button")},m(o,i,r){V(y,o,i),f(o,e,i),_.m(o,i),f(o,n,i),f(o,s,i),f(o,l,i),V(A,o,i),f(o,c,i),T&&T.m(o,i),f(o,a,i),N&&N.m(o,i),f(o,u,i),p=!0,r&&h(),h=v(s,"click",t[11])},p(t,[e]){const s={};2&e&&(s.notif=t[1]),y.$set(s),x===(x=w(t))&&_?_.p(t,e):(_.d(1),(_=x(t))&&(_.c(),_.m(n.parentNode,n)));const l={};!o&&8&e&&(o=!0,l.treatItems=t[3],U(()=>o=!1)),!i&&2&e&&(i=!0,l.notif=t[1],U(()=>i=!1)),!r&&1&e&&(r=!0,l.selected=t[0],U(()=>r=!1)),A.$set(l),t[2]?T?(T.p(t,e),Y(T,1)):((T=Os(t)).c(),Y(T,1),T.m(a.parentNode,a)):T&&(B(),J(T,1,1,()=>{T=null}),Q()),t[4]?N?(N.p(t,e),Y(N,1)):((N=As(t)).c(),Y(N,1),N.m(u.parentNode,u)):N&&(B(),J(N,1,1,()=>{N=null}),Q())},i(t){p||(Y(y.$$.fragment,t),Y(A.$$.fragment,t),Y(T),Y(N),p=!0)},o(t){J(y.$$.fragment,t),J(A.$$.fragment,t),J(T),J(N),p=!1},d(t){X(y,t),t&&d(e),_.d(t),t&&d(n),t&&d(s),t&&d(l),X(A,t),t&&d(c),T&&T.d(t),t&&d(a),N&&N.d(t),t&&d(u),h()}}}async function Ns(t){const e=await ht(`/show/analysis/${t}`),n=e.servedfiles.map(([t,e])=>`<div><a href="analysis/showfile/${t}" target="_blank">${e}</a></div>`).join("\n");return`\n    <p><span class="has-text-weight-bold">Workflow version:</span> ${e.wf.update}</p>\n    <p>${e.nrfiles} raw files from ${e.nrdsets} dataset(s) analysed</p>\n    <p><span class="has-text-weight-bold">Quant type:</span> ${e.quants.join(", ")}</p>\n    <p>${n}</p>\n    <p><span class="has-text-weight-bold">Last lines of log:</span></p>\n    <p class="is-family-monospace">${e.log.join("<br>")}</p>\n  `}function Ss(t,e,n){let s,l=[],o={errors:{},messages:{}},i=!1,r=!1;return[l,o,i,s,r,[{id:"jobstate",name:"__hourglass-half",type:"state",multi:!1,links:"jobid",linkroute:"#/jobs"},{id:"name",name:"Analysis name",type:"str",multi:!1},{id:"files",name:"",help:"Input files",type:"icon",icon:"database",multi:!1,links:"fn_ids",linkroute:"#/files"},{id:"datasets",name:"",help:"Datasets",type:"icon",icon:"clipboard-list",multi:!1,links:"dset_ids",linkroute:"#/datasets"},{id:"wf",name:"Workflow",type:"str",multi:!1,links:"wflink"},{id:"usr",name:"Users",type:"str",multi:!1},{id:"date",name:"Date",type:"str",multi:!1}],{jobstate:{wait:"has-text-grey-light",pending:"has-text-info",error:"has-text-danger",processing:"has-text-warning",done:"has-text-success"}},function(t){n(4,r=t.detail.ids)},function(){s("/analysis/delete/","analysis","deleting",t=>{t.deleted=!0},l)},function(){s("/analysis/undelete/","analysis","undeleting",t=>{t.deleted=!1},l)},function(){s("/analysis/purge/","analysis","purging",t=>{t.deleted=!0},l)},t=>n(2,i=!1===i),function(t){n(3,s=t)},function(t){n(1,o=t)},function(t){n(0,l=t)},t=>n(2,i=!1===i),()=>{n(4,r=!1)}]}function Es(e){let n,s,l,o,i;return{c(){(n=m("a")).textContent="Retire projects",s=g(),(l=m("a")).textContent="Reactivate projects",o=g(),(i=m("a")).textContent="Purge projects",b(n,"class","button"),b(n,"title","Move projects to cold storage (delete)"),b(n,"disabled",""),b(l,"class","button"),b(l,"title","Move projects to active storage (undelete)"),b(l,"disabled",""),b(i,"class","button"),b(i,"title","PERMANENTLY delete projects from active and cold storage"),b(i,"disabled","")},m(t,e){f(t,n,e),f(t,s,e),f(t,l,e),f(t,o,e),f(t,i,e)},p:t,d(t){t&&d(n),t&&d(s),t&&d(l),t&&d(o),t&&d(i)}}}function Is(t){let e,n,l,o,i,r;function c(t,e){return t[3]?Ls:Ws}let a=c(t),u=a(t);return{c(){(e=m("a")).textContent="Retire projects",n=g(),(l=m("a")).textContent="Reactivate projects",o=g(),u.c(),i=$(),b(e,"class","button"),b(e,"title","Move projects to cold storage (delete)"),b(l,"class","button"),b(l,"title","Move projects to active storage (undelete)")},m(c,a,d){f(c,e,a),f(c,n,a),f(c,l,a),f(c,o,a),u.m(c,a),f(c,i,a),d&&s(r),r=[v(e,"click",t[9]),v(l,"click",t[10])]},p(t,e){a===(a=c(t))&&u?u.p(t,e):(u.d(1),(u=a(t))&&(u.c(),u.m(i.parentNode,i)))},d(t){t&&d(e),t&&d(n),t&&d(l),t&&d(o),u.d(t),t&&d(i),s(r)}}}function Ws(e){let n,s;return{c(){(n=m("a")).textContent="Purge projects",b(n,"class","button"),b(n,"title","PERMANENTLY delete projects from active and cold storage")},m(t,l,o){f(t,n,l),o&&s(),s=v(n,"click",e[8])},p:t,d(t){t&&d(n),s()}}}function Ls(e){let n,s;return{c(){(n=m("a")).textContent="Are you sure? Purge projects",b(n,"class","button is-danger is-light"),b(n,"title","PERMANENTLY delete projects from active and cold storage")},m(t,l,o){f(t,n,l),o&&s(),s=v(n,"click",e[11])},p:t,d(t){t&&d(n),s()}}}function Ms(t){let e,n,s,l,o,i;const r=new ke({props:{tabshow:"Projects",notif:t[1]}});function c(t,e){return t[0].length?Is:Es}let a=c(t),u=a(t);function p(e){t[14].call(null,e)}function m(e){t[15].call(null,e)}function h(e){t[16].call(null,e)}let $={tab:"Projects",fetchUrl:"/show/projects",findUrl:"/find/projects",getdetails:Ps,fixedbuttons:t[7],fields:t[5],inactive:t[4],statecolors:t[6]};void 0!==t[2]&&($.treatItems=t[2]),void 0!==t[1]&&($.notif=t[1]),void 0!==t[0]&&($.selected=t[0]);const v=new re({props:$});return E.push(()=>K(v,"treatItems",p)),E.push(()=>K(v,"notif",m)),E.push(()=>K(v,"selected",h)),v.$on("detailview",t[17]),{c(){G(r.$$.fragment),e=g(),u.c(),n=g(),G(v.$$.fragment)},m(t,s){V(r,t,s),f(t,e,s),u.m(t,s),f(t,n,s),V(v,t,s),i=!0},p(t,[e]){const i={};2&e&&(i.notif=t[1]),r.$set(i),a===(a=c(t))&&u?u.p(t,e):(u.d(1),(u=a(t))&&(u.c(),u.m(n.parentNode,n)));const f={};!s&&4&e&&(s=!0,f.treatItems=t[2],U(()=>s=!1)),!l&&2&e&&(l=!0,f.notif=t[1],U(()=>l=!1)),!o&&1&e&&(o=!0,f.selected=t[0],U(()=>o=!1)),v.$set(f)},i(t){i||(Y(r.$$.fragment,t),Y(v.$$.fragment,t),i=!0)},o(t){J(r.$$.fragment,t),J(v.$$.fragment,t),i=!1},d(t){X(r,t),t&&d(e),u.d(t),t&&d(n),X(v,t)}}}async function Ps(t){const e=await ht(`/show/project/${t}`);return`\n    <p><span class="has-text-weight-bold">Storage amount:</span> ${e.stored_total_xbytes}</p>\n    <p><span class="has-text-weight-bold">Owners:</span> ${Object.values(e.owners).join(", ")}</p>\n    <hr>\n    ${Object.entries(e.nrstoredfiles).map(t=>`<div>${t[1]} stored files of type ${t[0]}</div>`).join("")}\n    <div>Instrument(s) used: <b>${e.instruments.join(", ")}</b></div>\n    `}function Us(t,e,n){let s,l,o=[],i={errors:{},messages:{}},r=!1;return[o,i,s,l,["inactive"],[{id:"name",name:"Name",type:"str",multi:!1},{id:"ptype",name:"Type",type:"str",multi:!1},{id:"start",name:"Registered",type:"str",multi:!1},{id:"lastactive",name:"Last active",type:"str",multi:!1}],{storestate:{cold:"is-info",purged:"is-danger",complete:"is-success","active-only":"is-warning",new:"is-warning",empty:"is-light",broken:"is-light"},jobstates:{wait:"has-text-grey-light",pending:"has-text-info",error:"has-text-danger",processing:"has-text-warning",done:"has-text-success"}},[],function(){n(3,l=!0),setTimeout(()=>{n(3,l=!1)},$t)},function(){s("datasets/archive/project/","project","archiving",t=>{t.inactive=!0},o)},function(){s("datasets/undelete/project/","project","reactivating",t=>{t.inactive=!1},o)},function(){s("datasets/purge/project/","project","purging",t=>{t.inactive=!0},o)},r,function(t){r=t.detail.ids},function(t){n(2,s=t)},function(t){n(1,i=t)},function(t){n(0,o=t)},function(e){N(t,e)}]}const qs={"/":xn,"/datasets":xn,"/jobs":class extends et{constructor(t){super(),tt(this,t,jn,_n,o,{})}},"/projects":class extends et{constructor(t){super(),tt(this,t,Us,Ms,o,{})}},"/files":class extends et{constructor(t){super(),tt(this,t,Pn,Ln,o,{})}},"/analyses":class extends et{constructor(t){super(),tt(this,t,Ss,Ts,o,{})}}};function zs(t){let e,n,s,l,o,i=t[0].purgable_analyses&&Rs(t),r=t[0].old_purgable_analyses&&Ds(t);return{c(){e=m("article"),n=m("div"),(s=m("h5")).textContent="Admin news",l=g(),i&&i.c(),o=g(),r&&r.c(),b(s,"class","title is-5"),b(n,"class","message-body"),b(e,"class","message is-info")},m(t,c){f(t,e,c),u(e,n),u(n,s),u(n,l),i&&i.m(n,null),u(n,o),r&&r.m(n,null)},p(t,e){t[0].purgable_analyses?i?i.p(t,e):((i=Rs(t)).c(),i.m(n,o)):i&&(i.d(1),i=null),t[0].old_purgable_analyses?r?r.p(t,e):((r=Ds(t)).c(),r.m(n,null)):r&&(r.d(1),r=null)},d(t){t&&d(e),i&&i.d(),r&&r.d()}}}function Rs(t){let e,n,s,l,o,i,r,c=t[0].purgable_analyses.length+"";return{c(){e=m("div"),n=h("There are "),s=m("a"),l=h(c),o=h(" analyses"),r=h(" that can be purged"),b(s,"target","_blank"),b(s,"href",i=Hs(t[0].purgable_analyses))},m(t,i){f(t,e,i),u(e,n),u(e,s),u(s,l),u(s,o),u(e,r)},p(t,e){1&e&&c!==(c=t[0].purgable_analyses.length+"")&&y(l,c),1&e&&i!==(i=Hs(t[0].purgable_analyses))&&b(s,"href",i)},d(t){t&&d(e)}}}function Ds(t){let e,n,s,l,o,i,r,c=t[0].old_purgable_analyses.length+"",a=t[0].olddef+"";return{c(){e=m("div"),n=m("a"),s=h(c),l=h(" purgable analyses"),i=h(" are older than "),r=h(a),b(n,"target","_blank"),b(n,"href",o=Hs(t[0].old_purgable_analyses))},m(t,o){f(t,e,o),u(e,n),u(n,s),u(n,l),u(e,i),u(e,r)},p(t,e){1&e&&c!==(c=t[0].old_purgable_analyses.length+"")&&y(s,c),1&e&&o!==(o=Hs(t[0].old_purgable_analyses))&&b(n,"href",o),1&e&&a!==(a=t[0].olddef+"")&&y(r,a)},d(t){t&&d(e)}}}function Fs(t){let e,n,s,l=t[0]&&zs(t);const o=new pt({props:{routes:qs}});return{c(){e=m("div"),l&&l.c(),n=g(),G(o.$$.fragment),b(e,"class","container")},m(t,i){f(t,e,i),l&&l.m(e,null),u(e,n),V(o,e,null),s=!0},p(t,[s]){t[0]?l?l.p(t,s):((l=zs(t)).c(),l.m(e,n)):l&&(l.d(1),l=null)},i(t){s||(Y(o.$$.fragment,t),s=!0)},o(t){J(o.$$.fragment,t),s=!1},d(t){t&&d(e),l&&l.d(),X(o)}}}function Hs(t){return`#/analyses/?ids=${t.join(",")}`}function Bs(t,e,n){let s=!1;function l(){!async function(){const t=await ht("/messages/");"error"in t?console.log(t):(n(0,s={}),n(0,s.olddef=t.olddef,s),n(0,s.purgable_analyses=t.purgable_analyses,s),n(0,s.old_purgable_analyses=t.old_purgable_analyses,s))}()}return A(async()=>{l()}),[s]}return new class extends et{constructor(t){super(),tt(this,t,Bs,Fs,o,{})}}({target:document.querySelector("#apps")})}();
//# sourceMappingURL=bundle.js.map
