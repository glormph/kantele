var app=function(){"use strict";function noop(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function null_to_empty(e){return null==e?"":e}const has_prop=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function append(e,t){e.appendChild(t)}function insert(e,t,n){e.insertBefore(t,n||null)}function detach(e){e.parentNode.removeChild(e)}function destroy_each(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function element(e){return document.createElement(e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function empty(){return text("")}function listen(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function attr(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function children(e){return Array.from(e.childNodes)}let current_component;function set_current_component(e){current_component=e}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(e){render_callbacks.push(e)}function add_flush_callback(e){flush_callbacks.push(e)}function flush(){const e=new Set;do{for(;dirty_components.length;){const e=dirty_components.shift();set_current_component(e),update(e.$$)}for(;binding_callbacks.length;)binding_callbacks.pop()();for(let t=0;t<render_callbacks.length;t+=1){const n=render_callbacks[t];e.has(n)||(n(),e.add(n))}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1}function update(e){null!==e.fragment&&(e.update(e.dirty),run_all(e.before_update),e.fragment&&e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(add_render_callback))}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function transition_out(e,t,n,o){if(e&&e.o){if(outroing.has(e))return;outroing.add(e),outros.c.push(()=>{outroing.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}const globals="undefined"!=typeof window?window:global;function bind(e,t,n){has_prop(e.$$.props,t)&&(t=e.$$.props[t]||t,e.$$.bound[t]=n,n(e.$$.ctx[t]))}function create_component(e){e&&e.c()}function mount_component(e,t,n){const{fragment:o,on_mount:a,on_destroy:c,after_update:r}=e.$$;o&&o.m(t,n),add_render_callback(()=>{const t=a.map(run).filter(is_function);c?c.push(...t):run_all(t),e.$$.on_mount=[]}),r.forEach(add_render_callback)}function destroy_component(e,t){const n=e.$$;null!==n.fragment&&(run_all(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx={})}function make_dirty(e,t){e.$$.dirty||(dirty_components.push(e),schedule_update(),e.$$.dirty=blank_object()),e.$$.dirty[t]=!0}function init(e,t,n,o,a,c){const r=current_component;set_current_component(e);const i=t.props||{},s=e.$$={fragment:null,ctx:null,props:c,update:noop,not_equal:a,bound:blank_object(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(r?r.$$.context:[]),callbacks:blank_object(),dirty:null};let d=!1;s.ctx=n?n(e,i,(t,n,o=n)=>(s.ctx&&a(s.ctx[t],s.ctx[t]=o)&&(s.bound[t]&&s.bound[t](o),d&&make_dirty(e,t)),n)):i,s.update(),d=!0,run_all(s.before_update),s.fragment=!!o&&o(s.ctx),t.target&&(t.hydrate?s.fragment&&s.fragment.l(children(t.target)):s.fragment&&s.fragment.c(),t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor),flush()),set_current_component(r)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function create_if_block(e){let t,n,o,a,c,r;return{c(){(t=element("h5")).textContent="Ion mobility",n=space(),o=element("div"),c=space(),r=element("hr"),attr(t,"class","title is-5"),attr(o,"class","bk-plotdiv"),attr(o,"id",a=e.bokeh_code.div.ionmob.elementid)},m(e,a){insert(e,t,a),insert(e,n,a),insert(e,o,a),insert(e,c,a),insert(e,r,a)},p(e,t){e.bokeh_code&&a!==(a=t.bokeh_code.div.ionmob.elementid)&&attr(o,"id",a)},d(e){e&&detach(t),e&&detach(n),e&&detach(o),e&&detach(c),e&&detach(r)}}}function create_fragment(e){let t,n,o,a,c,r,i,s,d,l,p,u,_,h,m,b,f,k,g,$,v,y,w,q,x,C,j,I,S,O,E,A,P,M,N,Q,B,L,R,F,G,T,z,D="ionmob"in e.bokeh_code.div&&create_if_block(e);return{c(){t=element("div"),(n=element("h5")).textContent="# Identifications",o=space(),a=element("div"),r=space(),i=element("hr"),s=space(),(d=element("h5")).textContent="# PSMs",l=space(),p=element("div"),_=space(),h=element("hr"),m=space(),(b=element("h5")).textContent="Peptide precursor areas",f=space(),k=element("div"),$=space(),v=element("hr"),y=space(),D&&D.c(),w=space(),(q=element("h5")).textContent="PSM MSGFScore",x=space(),C=element("div"),I=space(),S=element("hr"),O=space(),(E=element("h5")).textContent="Precursor error (ppm)",A=space(),P=element("div"),N=space(),Q=element("hr"),B=space(),(L=element("h5")).textContent="Retention time (min)",R=space(),F=element("div"),T=space(),z=element("hr"),attr(n,"class","title is-5"),attr(a,"class","bk-plotdiv"),attr(a,"id",c=e.bokeh_code.div.amount_peptides.elementid),attr(d,"class","title is-5"),attr(p,"class","bk-plotdiv"),attr(p,"id",u=e.bokeh_code.div.amount_psms.elementid),attr(b,"class","title is-5"),attr(k,"class","bk-plotdiv"),attr(k,"id",g=e.bokeh_code.div.precursorarea.elementid),attr(q,"class","title is-5"),attr(C,"class","bk-plotdiv"),attr(C,"id",j=e.bokeh_code.div.msgfscore.elementid),attr(E,"class","title is-5"),attr(P,"class","bk-plotdiv"),attr(P,"id",M=e.bokeh_code.div.prec_error.elementid),attr(L,"class","title is-5"),attr(F,"class","bk-plotdiv"),attr(F,"id",G=e.bokeh_code.div.rt.elementid),attr(t,"class","bk-root")},m(e,c){insert(e,t,c),append(t,n),append(t,o),append(t,a),append(t,r),append(t,i),append(t,s),append(t,d),append(t,l),append(t,p),append(t,_),append(t,h),append(t,m),append(t,b),append(t,f),append(t,k),append(t,$),append(t,v),append(t,y),D&&D.m(t,null),append(t,w),append(t,q),append(t,x),append(t,C),append(t,I),append(t,S),append(t,O),append(t,E),append(t,A),append(t,P),append(t,N),append(t,Q),append(t,B),append(t,L),append(t,R),append(t,F),append(t,T),append(t,z)},p(e,n){e.bokeh_code&&c!==(c=n.bokeh_code.div.amount_peptides.elementid)&&attr(a,"id",c),e.bokeh_code&&u!==(u=n.bokeh_code.div.amount_psms.elementid)&&attr(p,"id",u),e.bokeh_code&&g!==(g=n.bokeh_code.div.precursorarea.elementid)&&attr(k,"id",g),"ionmob"in n.bokeh_code.div?D?D.p(e,n):((D=create_if_block(n)).c(),D.m(t,w)):D&&(D.d(1),D=null),e.bokeh_code&&j!==(j=n.bokeh_code.div.msgfscore.elementid)&&attr(C,"id",j),e.bokeh_code&&M!==(M=n.bokeh_code.div.prec_error.elementid)&&attr(P,"id",M),e.bokeh_code&&G!==(G=n.bokeh_code.div.rt.elementid)&&attr(F,"id",G)},i:noop,o:noop,d(e){e&&detach(t),D&&D.d()}}}function instance(e,t,n){let{bokeh_code:o}=t;return e.$set=(e=>{"bokeh_code"in e&&n("bokeh_code",o=e.bokeh_code)}),{bokeh_code:o}}class Instrument extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{bokeh_code:0})}}const{Object:Object_1}=globals;function get_each_context(e,t,n){const o=Object_1.create(e);return o.instr=t[n],o}function get_each_context_1(e,t,n){const o=Object_1.create(e);return o.instr=t[n],o}function create_each_block_1(e){let t,n,o,a,c,r,i,s=e.instr[0]+"";function d(...t){return e.click_handler(e,...t)}return{c(){t=element("li"),n=element("a"),o=element("span"),a=text(s),c=space(),attr(t,"class",r=e.tabshow===`instr_${e.instr[1]}`?"is-active":""),i=listen(n,"click",d)},m(e,r){insert(e,t,r),append(t,n),append(n,o),append(o,a),append(t,c)},p(n,o){e=o,n.tabshow&&r!==(r=e.tabshow===`instr_${e.instr[1]}`?"is-active":"")&&attr(t,"class",r)},d(e){e&&detach(t),i()}}}function create_if_block$1(e){let t,n,o,a,c;function r(t){e.instrument_bokeh_code_binding.call(null,t,e),n=!0,add_flush_callback(()=>n=!1)}let i={};void 0!==e.qcdata[e.instr[1]].bokeh_code&&(i.bokeh_code=e.qcdata[e.instr[1]].bokeh_code);const s=new Instrument({props:i});return binding_callbacks.push(()=>bind(s,"bokeh_code",r)),{c(){t=element("div"),create_component(s.$$.fragment),o=space(),attr(t,"class",a=null_to_empty(`instrplot ${e.tabshow===`instr_${e.instr[1]}`?"active":"inactive"}`)+" svelte-sub9ii")},m(e,n){insert(e,t,n),mount_component(s,t,null),append(t,o),c=!0},p(o,r){e=r;const i={};n||!o.qcdata&&!o.instruments||(i.bokeh_code=e.qcdata[e.instr[1]].bokeh_code),s.$set(i),(!c||o.tabshow&&a!==(a=null_to_empty(`instrplot ${e.tabshow===`instr_${e.instr[1]}`?"active":"inactive"}`)+" svelte-sub9ii"))&&attr(t,"class",a)},i(e){c||(transition_in(s.$$.fragment,e),c=!0)},o(e){transition_out(s.$$.fragment,e),c=!1},d(e){e&&detach(t),destroy_component(s)}}}function create_each_block(e){let t,n,o=e.qcdata[e.instr[1]].loaded&&create_if_block$1(e);return{c(){o&&o.c(),t=empty()},m(e,a){o&&o.m(e,a),insert(e,t,a),n=!0},p(e,n){n.qcdata[n.instr[1]].loaded?o?(o.p(e,n),transition_in(o,1)):((o=create_if_block$1(n)).c(),transition_in(o,1),o.m(t.parentNode,t)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros())},i(e){n||(transition_in(o),n=!0)},o(e){transition_out(o),n=!1},d(e){o&&o.d(e),e&&detach(t)}}}function create_fragment$1(e){let t,n,o,a,c,r,i,s,d,l,p,u=instruments,_=[];for(let t=0;t<u.length;t+=1)_[t]=create_each_block_1(get_each_context_1(e,u,t));let h=instruments,m=[];for(let t=0;t<h.length;t+=1)m[t]=create_each_block(get_each_context(e,h,t));const b=e=>transition_out(m[e],1,1,()=>{m[e]=null});return{c(){t=element("div"),n=element("ul");for(let e=0;e<_.length;e+=1)_[e].c();o=space(),a=element("div"),(c=element("a")).textContent="Refresh",r=space(),i=element("hr"),s=space(),d=element("section");for(let e=0;e<m.length;e+=1)m[e].c();attr(t,"class","tabs is-toggle is-centered is-small"),attr(c,"class","button is-info is-small"),attr(a,"class","container"),p=listen(c,"click",e.reload)},m(e,p){insert(e,t,p),append(t,n);for(let e=0;e<_.length;e+=1)_[e].m(n,null);insert(e,o,p),insert(e,a,p),append(a,c),append(a,r),append(a,i),append(a,s),append(a,d);for(let e=0;e<m.length;e+=1)m[e].m(d,null);l=!0},p(e,t){if(e.tabshow||e.instruments||e.showInst){let o;for(u=instruments,o=0;o<u.length;o+=1){const a=get_each_context_1(t,u,o);_[o]?_[o].p(e,a):(_[o]=create_each_block_1(a),_[o].c(),_[o].m(n,null))}for(;o<_.length;o+=1)_[o].d(1);_.length=u.length}if(e.qcdata||e.instruments||e.tabshow){let n;for(h=instruments,n=0;n<h.length;n+=1){const o=get_each_context(t,h,n);m[n]?(m[n].p(e,o),transition_in(m[n],1)):(m[n]=create_each_block(o),m[n].c(),transition_in(m[n],1),m[n].m(d,null))}for(group_outros(),n=h.length;n<m.length;n+=1)b(n);check_outros()}},i(e){if(!l){for(let e=0;e<h.length;e+=1)transition_in(m[e]);l=!0}},o(e){m=m.filter(Boolean);for(let e=0;e<m.length;e+=1)transition_out(m[e]);l=!1},d(e){e&&detach(t),destroy_each(_,e),e&&detach(o),e&&detach(a),destroy_each(m,e),p()}}}function instance$1($$self,$$props,$$invalidate){let tabshow="dash",qcdata=Object.fromEntries(instruments.map(e=>[e[1],{loaded:!1}]));async function showInst(iid){qcdata[iid].loaded||(await getInstrumentQC(iid),eval(qcdata[iid].bokeh_code.script)),$$invalidate("tabshow",tabshow=`instr_${iid}`)}async function reload(){if("instr_"===tabshow.slice(0,6)){const iid=tabshow.substr(6);$$invalidate("qcdata",qcdata[iid].loaded=!1,qcdata),await getInstrumentQC(iid),eval(qcdata[iid].bokeh_code.script)}}async function getInstrumentQC(e){const t=await fetch("/dash/longqc/"+e),n=await t.json();$$invalidate("qcdata",qcdata[e]={},qcdata);for(let t in n)$$invalidate("qcdata",qcdata[e][t]=n[t],qcdata);$$invalidate("qcdata",qcdata[e].loaded=!0,qcdata)}const click_handler=({instr:e},t)=>showInst(e[1]);function instrument_bokeh_code_binding(e,{instr:t}){qcdata[t[1]].bokeh_code=e,$$invalidate("qcdata",qcdata)}return{tabshow:tabshow,qcdata:qcdata,showInst:showInst,reload:reload,click_handler:click_handler,instrument_bokeh_code_binding:instrument_bokeh_code_binding}}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{})}}var app=new App({target:document.querySelector("#apps")});return app}();
//# sourceMappingURL=bundle.js.map
