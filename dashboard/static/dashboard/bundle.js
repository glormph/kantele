var app=function(){"use strict";function noop(){}function run(t){return t()}function blank_object(){return Object.create(null)}function run_all(t){t.forEach(run)}function is_function(t){return"function"==typeof t}function safe_not_equal(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function null_to_empty(t){return null==t?"":t}const has_prop=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);function append(t,e){t.appendChild(e)}function insert(t,e,n){t.insertBefore(e,n||null)}function detach(t){t.parentNode.removeChild(t)}function destroy_each(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function element(t){return document.createElement(t)}function text(t){return document.createTextNode(t)}function space(){return text(" ")}function empty(){return text("")}function listen(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function attr(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function children(t){return Array.from(t.childNodes)}let current_component;function set_current_component(t){current_component=t}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(t){render_callbacks.push(t)}function add_flush_callback(t){flush_callbacks.push(t)}function flush(){const t=new Set;do{for(;dirty_components.length;){const t=dirty_components.shift();set_current_component(t),update(t.$$)}for(;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const n=render_callbacks[e];t.has(n)||(n(),t.add(n))}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1}function update(t){null!==t.fragment&&(t.update(t.dirty),run_all(t.before_update),t.fragment&&t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(add_render_callback))}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(t,e){t&&t.i&&(outroing.delete(t),t.i(e))}function transition_out(t,e,n,o){if(t&&t.o){if(outroing.has(t))return;outroing.add(t),outros.c.push(()=>{outroing.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}const globals="undefined"!=typeof window?window:global;function bind(t,e,n){has_prop(t.$$.props,e)&&(e=t.$$.props[e]||e,t.$$.bound[e]=n,n(t.$$.ctx[e]))}function create_component(t){t&&t.c()}function mount_component(t,e,n){const{fragment:o,on_mount:a,on_destroy:c,after_update:r}=t.$$;o&&o.m(e,n),add_render_callback(()=>{const e=a.map(run).filter(is_function);c?c.push(...e):run_all(e),t.$$.on_mount=[]}),r.forEach(add_render_callback)}function destroy_component(t,e){const n=t.$$;null!==n.fragment&&(run_all(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx={})}function make_dirty(t,e){t.$$.dirty||(dirty_components.push(t),schedule_update(),t.$$.dirty=blank_object()),t.$$.dirty[e]=!0}function init(t,e,n,o,a,c){const r=current_component;set_current_component(t);const i=e.props||{},s=t.$$={fragment:null,ctx:null,props:c,update:noop,not_equal:a,bound:blank_object(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(r?r.$$.context:[]),callbacks:blank_object(),dirty:null};let d=!1;s.ctx=n?n(t,i,(e,n,o=n)=>(s.ctx&&a(s.ctx[e],s.ctx[e]=o)&&(s.bound[e]&&s.bound[e](o),d&&make_dirty(t,e)),n)):i,s.update(),d=!0,run_all(s.before_update),s.fragment=!!o&&o(s.ctx),e.target&&(e.hydrate?s.fragment&&s.fragment.l(children(e.target)):s.fragment&&s.fragment.c(),e.intro&&transition_in(t.$$.fragment),mount_component(t,e.target,e.anchor),flush()),set_current_component(r)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function create_fragment(t){let e,n,o,a,c,r,i,s,d,l,p,u,_,h,m,f,b,k,g,$,v,y,w,q,x,C,j,I,S,O,E,A,P,M,N,Q,B,L,R,F,G,T;return{c(){e=element("div"),(n=element("h5")).textContent="# Identifications",o=space(),a=element("div"),r=space(),i=element("hr"),s=space(),(d=element("h5")).textContent="# PSMs",l=space(),p=element("div"),_=space(),h=element("hr"),m=space(),(f=element("h5")).textContent="Peptide precursor areas",b=space(),k=element("div"),$=space(),v=element("hr"),y=space(),(w=element("h5")).textContent="PSM MSGFScore",q=space(),x=element("div"),j=space(),I=element("hr"),S=space(),(O=element("h5")).textContent="Precursor error (ppm)",E=space(),A=element("div"),M=space(),N=element("hr"),Q=space(),(B=element("h5")).textContent="Retention time (min)",L=space(),R=element("div"),G=space(),T=element("hr"),attr(n,"class","title is-5"),attr(a,"class","bk-plotdiv"),attr(a,"id",c=t.bokeh_code.div.amount_peptides.elementid),attr(d,"class","title is-5"),attr(p,"class","bk-plotdiv"),attr(p,"id",u=t.bokeh_code.div.amount_psms.elementid),attr(f,"class","title is-5"),attr(k,"class","bk-plotdiv"),attr(k,"id",g=t.bokeh_code.div.precursorarea.elementid),attr(w,"class","title is-5"),attr(x,"class","bk-plotdiv"),attr(x,"id",C=t.bokeh_code.div.msgfscore.elementid),attr(O,"class","title is-5"),attr(A,"class","bk-plotdiv"),attr(A,"id",P=t.bokeh_code.div.prec_error.elementid),attr(B,"class","title is-5"),attr(R,"class","bk-plotdiv"),attr(R,"id",F=t.bokeh_code.div.rt.elementid),attr(e,"class","bk-root")},m(t,c){insert(t,e,c),append(e,n),append(e,o),append(e,a),append(e,r),append(e,i),append(e,s),append(e,d),append(e,l),append(e,p),append(e,_),append(e,h),append(e,m),append(e,f),append(e,b),append(e,k),append(e,$),append(e,v),append(e,y),append(e,w),append(e,q),append(e,x),append(e,j),append(e,I),append(e,S),append(e,O),append(e,E),append(e,A),append(e,M),append(e,N),append(e,Q),append(e,B),append(e,L),append(e,R),append(e,G),append(e,T)},p(t,e){t.bokeh_code&&c!==(c=e.bokeh_code.div.amount_peptides.elementid)&&attr(a,"id",c),t.bokeh_code&&u!==(u=e.bokeh_code.div.amount_psms.elementid)&&attr(p,"id",u),t.bokeh_code&&g!==(g=e.bokeh_code.div.precursorarea.elementid)&&attr(k,"id",g),t.bokeh_code&&C!==(C=e.bokeh_code.div.msgfscore.elementid)&&attr(x,"id",C),t.bokeh_code&&P!==(P=e.bokeh_code.div.prec_error.elementid)&&attr(A,"id",P),t.bokeh_code&&F!==(F=e.bokeh_code.div.rt.elementid)&&attr(R,"id",F)},i:noop,o:noop,d(t){t&&detach(e)}}}function instance(t,e,n){let{bokeh_code:o}=e;return t.$set=(t=>{"bokeh_code"in t&&n("bokeh_code",o=t.bokeh_code)}),{bokeh_code:o}}class Instrument extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{bokeh_code:0})}}const{Object:Object_1}=globals;function get_each_context(t,e,n){const o=Object_1.create(t);return o.instr=e[n],o}function get_each_context_1(t,e,n){const o=Object_1.create(t);return o.instr=e[n],o}function create_each_block_1(t){let e,n,o,a,c,r,i,s=t.instr[0]+"";function d(...e){return t.click_handler(t,...e)}return{c(){e=element("li"),n=element("a"),o=element("span"),a=text(s),c=space(),attr(e,"class",r=t.tabshow===`instr_${t.instr[1]}`?"is-active":""),i=listen(n,"click",d)},m(t,r){insert(t,e,r),append(e,n),append(n,o),append(o,a),append(e,c)},p(n,o){t=o,n.tabshow&&r!==(r=t.tabshow===`instr_${t.instr[1]}`?"is-active":"")&&attr(e,"class",r)},d(t){t&&detach(e),i()}}}function create_if_block(t){let e,n,o,a,c;function r(e){t.instrument_bokeh_code_binding.call(null,e,t),n=!0,add_flush_callback(()=>n=!1)}let i={};void 0!==t.qcdata[t.instr[1]].bokeh_code&&(i.bokeh_code=t.qcdata[t.instr[1]].bokeh_code);const s=new Instrument({props:i});return binding_callbacks.push(()=>bind(s,"bokeh_code",r)),{c(){e=element("div"),create_component(s.$$.fragment),o=space(),attr(e,"class",a=null_to_empty(`instrplot ${t.tabshow===`instr_${t.instr[1]}`?"active":"inactive"}`)+" svelte-sub9ii")},m(t,n){insert(t,e,n),mount_component(s,e,null),append(e,o),c=!0},p(o,r){t=r;const i={};n||!o.qcdata&&!o.instruments||(i.bokeh_code=t.qcdata[t.instr[1]].bokeh_code),s.$set(i),(!c||o.tabshow&&a!==(a=null_to_empty(`instrplot ${t.tabshow===`instr_${t.instr[1]}`?"active":"inactive"}`)+" svelte-sub9ii"))&&attr(e,"class",a)},i(t){c||(transition_in(s.$$.fragment,t),c=!0)},o(t){transition_out(s.$$.fragment,t),c=!1},d(t){t&&detach(e),destroy_component(s)}}}function create_each_block(t){let e,n,o=t.qcdata[t.instr[1]].loaded&&create_if_block(t);return{c(){o&&o.c(),e=empty()},m(t,a){o&&o.m(t,a),insert(t,e,a),n=!0},p(t,n){n.qcdata[n.instr[1]].loaded?o?(o.p(t,n),transition_in(o,1)):((o=create_if_block(n)).c(),transition_in(o,1),o.m(e.parentNode,e)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros())},i(t){n||(transition_in(o),n=!0)},o(t){transition_out(o),n=!1},d(t){o&&o.d(t),t&&detach(e)}}}function create_fragment$1(t){let e,n,o,a,c,r,i,s,d,l,p,u=instruments,_=[];for(let e=0;e<u.length;e+=1)_[e]=create_each_block_1(get_each_context_1(t,u,e));let h=instruments,m=[];for(let e=0;e<h.length;e+=1)m[e]=create_each_block(get_each_context(t,h,e));const f=t=>transition_out(m[t],1,1,()=>{m[t]=null});return{c(){e=element("div"),n=element("ul");for(let t=0;t<_.length;t+=1)_[t].c();o=space(),a=element("div"),(c=element("a")).textContent="Refresh",r=space(),i=element("hr"),s=space(),d=element("section");for(let t=0;t<m.length;t+=1)m[t].c();attr(e,"class","tabs is-toggle is-centered is-small"),attr(c,"class","button is-info is-small"),attr(a,"class","container"),p=listen(c,"click",t.reload)},m(t,p){insert(t,e,p),append(e,n);for(let t=0;t<_.length;t+=1)_[t].m(n,null);insert(t,o,p),insert(t,a,p),append(a,c),append(a,r),append(a,i),append(a,s),append(a,d);for(let t=0;t<m.length;t+=1)m[t].m(d,null);l=!0},p(t,e){if(t.tabshow||t.instruments||t.showInst){let o;for(u=instruments,o=0;o<u.length;o+=1){const a=get_each_context_1(e,u,o);_[o]?_[o].p(t,a):(_[o]=create_each_block_1(a),_[o].c(),_[o].m(n,null))}for(;o<_.length;o+=1)_[o].d(1);_.length=u.length}if(t.qcdata||t.instruments||t.tabshow){let n;for(h=instruments,n=0;n<h.length;n+=1){const o=get_each_context(e,h,n);m[n]?(m[n].p(t,o),transition_in(m[n],1)):(m[n]=create_each_block(o),m[n].c(),transition_in(m[n],1),m[n].m(d,null))}for(group_outros(),n=h.length;n<m.length;n+=1)f(n);check_outros()}},i(t){if(!l){for(let t=0;t<h.length;t+=1)transition_in(m[t]);l=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)transition_out(m[t]);l=!1},d(t){t&&detach(e),destroy_each(_,t),t&&detach(o),t&&detach(a),destroy_each(m,t),p()}}}function instance$1($$self,$$props,$$invalidate){let tabshow="dash",qcdata=Object.fromEntries(instruments.map(t=>[t[1],{loaded:!1}]));async function showInst(iid){qcdata[iid].loaded||(await getInstrumentQC(iid),eval(qcdata[iid].bokeh_code.script)),$$invalidate("tabshow",tabshow=`instr_${iid}`)}async function reload(){if("instr_"===tabshow.slice(0,6)){const iid=tabshow.substr(6);$$invalidate("qcdata",qcdata[iid].loaded=!1,qcdata),await getInstrumentQC(iid),eval(qcdata[iid].bokeh_code.script)}}async function getInstrumentQC(t){const e=await fetch("/dash/longqc/"+t),n=await e.json();$$invalidate("qcdata",qcdata[t]={},qcdata);for(let e in n)$$invalidate("qcdata",qcdata[t][e]=n[e],qcdata);$$invalidate("qcdata",qcdata[t].loaded=!0,qcdata)}const click_handler=({instr:t},e)=>showInst(t[1]);function instrument_bokeh_code_binding(t,{instr:e}){qcdata[e[1]].bokeh_code=t,$$invalidate("qcdata",qcdata)}return{tabshow:tabshow,qcdata:qcdata,showInst:showInst,reload:reload,click_handler:click_handler,instrument_bokeh_code_binding:instrument_bokeh_code_binding}}class App extends SvelteComponent{constructor(t){super(),init(this,t,instance$1,create_fragment$1,safe_not_equal,{})}}var app=new App({target:document.querySelector("#apps")});return app}();
//# sourceMappingURL=bundle.js.map
